<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.48" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://sword-demon.github.io/views/deploy/linux-install-php-swoole.html"><meta property="og:site_name" content="wxvirus"><meta property="og:title" content="Linux编译安装PHP7.4和Swoole扩展"><meta property="og:type" content="article"><meta property="og:updated_time" content="2022-08-14T13:07:44.000Z"><meta property="og:locale" content="zh-CN"><meta property="article:tag" content="PHP"><meta property="article:tag" content="Swoole"><meta property="article:published_time" content="2022-08-14T21:04:10.000Z"><meta property="article:modified_time" content="2022-08-14T13:07:44.000Z"><title>Linux编译安装PHP7.4和Swoole扩展 | wxvirus</title><meta name="description" content="wxvirus blog and note">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/assets/style.df48266e.css">
    <link rel="modulepreload" href="/assets/app.03a58151.js"><link rel="modulepreload" href="/assets/linux-install-php-swoole.html.4a6c4f62.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/assets/linux-install-php-swoole.html.d547a664.js"><link rel="prefetch" href="/assets/index.html.afcba7ea.js"><link rel="prefetch" href="/assets/home.html.0a26905f.js"><link rel="prefetch" href="/assets/slide.html.26f397b0.js"><link rel="prefetch" href="/assets/index.html.ff3d67b3.js"><link rel="prefetch" href="/assets/index.html.961667c8.js"><link rel="prefetch" href="/assets/disable.html.ef50b637.js"><link rel="prefetch" href="/assets/encrypt.html.e3b48358.js"><link rel="prefetch" href="/assets/markdown.html.b91e4fd1.js"><link rel="prefetch" href="/assets/page.html.96c946e3.js"><link rel="prefetch" href="/assets/index.html.3c6c8ca9.js"><link rel="prefetch" href="/assets/go-questions.html.736dd292.js"><link rel="prefetch" href="/assets/index.html.03c8292c.js"><link rel="prefetch" href="/assets/index.html.24a4b944.js"><link rel="prefetch" href="/assets/curl-pdf.html.4eb8e6c3.js"><link rel="prefetch" href="/assets/distributed-dtm.html.f0b89b1d.js"><link rel="prefetch" href="/assets/multi-goroutine-result.html.52ecc09a.js"><link rel="prefetch" href="/assets/mysql-dtm.html.5f789dd5.js"><link rel="prefetch" href="/assets/mysql-index-b-tree.html.0c7fe189.js"><link rel="prefetch" href="/assets/mysql-master-slave.html.9a4c7bb2.js"><link rel="prefetch" href="/assets/mysql-transiation.html.92319946.js"><link rel="prefetch" href="/assets/php-slice-upload.html.a0bdbdaa.js"><link rel="prefetch" href="/assets/redis-cache-struct.html.a29c52e8.js"><link rel="prefetch" href="/assets/sql-auth.html.ab9f1c21.js"><link rel="prefetch" href="/assets/sql-lifecycle.html.604739c5.js"><link rel="prefetch" href="/assets/strategy.html.113b8504.js"><link rel="prefetch" href="/assets/unique-hash-algom.html.3d9aff64.js"><link rel="prefetch" href="/assets/vscode-generate-code.html.660f689e.js"><link rel="prefetch" href="/assets/index.html.76420b56.js"><link rel="prefetch" href="/assets/index.html.aa873f3d.js"><link rel="prefetch" href="/assets/c-helloworld.html.51e921e1.js"><link rel="prefetch" href="/assets/c-ld.html.24644c13.js"><link rel="prefetch" href="/assets/file-include.html.f47ab2b9.js"><link rel="prefetch" href="/assets/makefile.html.73112bce.js"><link rel="prefetch" href="/assets/variable-memory.html.e99e5168.js"><link rel="prefetch" href="/assets/index.html.be2fed02.js"><link rel="prefetch" href="/assets/elf.html.c7ed2909.js"><link rel="prefetch" href="/assets/swoole-process.html.48ea97fb.js"><link rel="prefetch" href="/assets/index.html.aa506daf.js"><link rel="prefetch" href="/assets/algo-base.html.1121a933.js"><link rel="prefetch" href="/assets/algo-insert-sort.html.9d3bcfc2.js"><link rel="prefetch" href="/assets/algo-palindrome.html.19f33d20.js"><link rel="prefetch" href="/assets/algo-recursive.html.ec6dca12.js"><link rel="prefetch" href="/assets/algo-search.html.c07df1a0.js"><link rel="prefetch" href="/assets/algo-sort.html.b5a4f638.js"><link rel="prefetch" href="/assets/leetcode-plusone.html.fbc30bc0.js"><link rel="prefetch" href="/assets/line-table.html.ed7afb3e.js"><link rel="prefetch" href="/assets/index.html.4466c5ad.js"><link rel="prefetch" href="/assets/docker-install-mysql.html.358f3a53.js"><link rel="prefetch" href="/assets/docker-install-redis.html.51713cf9.js"><link rel="prefetch" href="/assets/linux-install-docker.html.42cc8f39.js"><link rel="prefetch" href="/assets/linux-install-nginx.html.9b52ea62.js"><link rel="prefetch" href="/assets/linux-mysql8.html.407687bf.js"><link rel="prefetch" href="/assets/mac-laradock.html.fcc73e72.js"><link rel="prefetch" href="/assets/vagrant-centos7.html.ae81920e.js"><link rel="prefetch" href="/assets/index.html.5d931294.js"><link rel="prefetch" href="/assets/base.html.c117e495.js"><link rel="prefetch" href="/assets/go-base-datatype.html.f3c03fad.js"><link rel="prefetch" href="/assets/go-channel.html.352036a8.js"><link rel="prefetch" href="/assets/go-concurrent-base.html.6d8b2bf2.js"><link rel="prefetch" href="/assets/go-constant.html.44b232f4.js"><link rel="prefetch" href="/assets/go-context.html.f2dccaf5.js"><link rel="prefetch" href="/assets/go-coroutine-dispath.html.30cf3842.js"><link rel="prefetch" href="/assets/go-cross-compiler.html.686c1e19.js"><link rel="prefetch" href="/assets/go-data-convert.html.9992d4ab.js"><link rel="prefetch" href="/assets/go-error.html.060fa9ab.js"><link rel="prefetch" href="/assets/go-file.html.5bf19488.js"><link rel="prefetch" href="/assets/go-goroutine.html.60476778.js"><link rel="prefetch" href="/assets/go-interface.html.5da21111.js"><link rel="prefetch" href="/assets/go-interview.html.e15c2035.js"><link rel="prefetch" href="/assets/go-lock.html.9e9a45fa.js"><link rel="prefetch" href="/assets/go-map.html.84264615.js"><link rel="prefetch" href="/assets/go-method.html.013f8393.js"><link rel="prefetch" href="/assets/go-module-unit.html.5ced754c.js"><link rel="prefetch" href="/assets/go-oop.html.d8969985.js"><link rel="prefetch" href="/assets/go-package.html.c7f073e4.js"><link rel="prefetch" href="/assets/go-pointer.html.479a62ef.js"><link rel="prefetch" href="/assets/go-select.html.47a0a47b.js"><link rel="prefetch" href="/assets/go-slice.html.f08dccbd.js"><link rel="prefetch" href="/assets/go-string.html.373c6e66.js"><link rel="prefetch" href="/assets/go-struct-interface.html.d174c004.js"><link rel="prefetch" href="/assets/go-struct-memory-layout.html.4e266244.js"><link rel="prefetch" href="/assets/go-time.html.9fbe16d3.js"><link rel="prefetch" href="/assets/go并发安全与锁.html.69457b30.js"><link rel="prefetch" href="/assets/grpc-protobuf.html.dd0be9af.js"><link rel="prefetch" href="/assets/mac-go-env.html.8adafae2.js"><link rel="prefetch" href="/assets/index.html.0b0e49fb.js"><link rel="prefetch" href="/assets/go-dynamically.html.f3a12d79.js"><link rel="prefetch" href="/assets/go-elf.html.802003d6.js"><link rel="prefetch" href="/assets/go-map-theory.html.ace1aa21.js"><link rel="prefetch" href="/assets/go-statically.html.13482d61.js"><link rel="prefetch" href="/assets/interface-type.html.12079c90.js"><link rel="prefetch" href="/assets/map-grow.html.a3bc433f.js"><link rel="prefetch" href="/assets/sync-map.html.65b31a79.js"><link rel="prefetch" href="/assets/index.html.e3182d79.js"><link rel="prefetch" href="/assets/go-zero模型操作.html.a31244e9.js"><link rel="prefetch" href="/assets/go-zero环境搭建.html.8a12894f.js"><link rel="prefetch" href="/assets/index.html.8d1a5ba7.js"><link rel="prefetch" href="/assets/cargo-base-use.html.ac92ed62.js"><link rel="prefetch" href="/assets/first-rust-code.html.277ab439.js"><link rel="prefetch" href="/assets/windows-env-rust.html.98e6f497.js"><link rel="prefetch" href="/assets/index.html.5524a427.js"><link rel="prefetch" href="/assets/go-tcp.html.4f38273a.js"><link rel="prefetch" href="/assets/ipv4-learn.html.7d74994a.js"><link rel="prefetch" href="/assets/ipv4-tcp-client.html.12a3ccb2.js"><link rel="prefetch" href="/assets/ipv4-udp.html.f8f95d24.js"><link rel="prefetch" href="/assets/socket-base.html.9391173f.js"><link rel="prefetch" href="/assets/socket-desc.html.c9d49d63.js"><link rel="prefetch" href="/assets/stream-socket-api.html.5887ca5b.js"><link rel="prefetch" href="/assets/unix-socket.html.5cb689d5.js"><link rel="prefetch" href="/assets/workerman-websocket-demo.html.865ca75d.js"><link rel="prefetch" href="/assets/index.html.fb1bfe47.js"><link rel="prefetch" href="/assets/admin-dashboard.html.74789de5.js"><link rel="prefetch" href="/assets/cdn-page.html.31279dd4.js"><link rel="prefetch" href="/assets/404.html.be08df46.js"><link rel="prefetch" href="/assets/index.html.2443c840.js"><link rel="prefetch" href="/assets/index.html.12d7529e.js"><link rel="prefetch" href="/assets/index.html.7890faae.js"><link rel="prefetch" href="/assets/index.html.d9551abc.js"><link rel="prefetch" href="/assets/index.html.6617a853.js"><link rel="prefetch" href="/assets/index.html.0d87f1e0.js"><link rel="prefetch" href="/assets/index.html.e7433923.js"><link rel="prefetch" href="/assets/index.html.bf29661d.js"><link rel="prefetch" href="/assets/index.html.b9e80953.js"><link rel="prefetch" href="/assets/index.html.5b65d65b.js"><link rel="prefetch" href="/assets/index.html.aa37b03a.js"><link rel="prefetch" href="/assets/index.html.4e128c2e.js"><link rel="prefetch" href="/assets/index.html.9bd67e66.js"><link rel="prefetch" href="/assets/index.html.f6acba67.js"><link rel="prefetch" href="/assets/index.html.dc1368d2.js"><link rel="prefetch" href="/assets/index.html.ae75f53b.js"><link rel="prefetch" href="/assets/index.html.67a75c91.js"><link rel="prefetch" href="/assets/index.html.b003412c.js"><link rel="prefetch" href="/assets/index.html.3e763271.js"><link rel="prefetch" href="/assets/index.html.e514f810.js"><link rel="prefetch" href="/assets/index.html.209deba8.js"><link rel="prefetch" href="/assets/index.html.68d16f86.js"><link rel="prefetch" href="/assets/index.html.00cfcc6f.js"><link rel="prefetch" href="/assets/index.html.dd2f7411.js"><link rel="prefetch" href="/assets/index.html.a14c0019.js"><link rel="prefetch" href="/assets/index.html.c00ea1b1.js"><link rel="prefetch" href="/assets/index.html.0983e75c.js"><link rel="prefetch" href="/assets/index.html.cebf9ea0.js"><link rel="prefetch" href="/assets/index.html.8eba9c96.js"><link rel="prefetch" href="/assets/index.html.17119fcc.js"><link rel="prefetch" href="/assets/index.html.5755b115.js"><link rel="prefetch" href="/assets/index.html.f37aece0.js"><link rel="prefetch" href="/assets/index.html.5c78c678.js"><link rel="prefetch" href="/assets/index.html.611a9fa0.js"><link rel="prefetch" href="/assets/index.html.297f6931.js"><link rel="prefetch" href="/assets/index.html.bbd36314.js"><link rel="prefetch" href="/assets/index.html.916f748b.js"><link rel="prefetch" href="/assets/index.html.ae0ba710.js"><link rel="prefetch" href="/assets/index.html.c2032f31.js"><link rel="prefetch" href="/assets/index.html.d9a7449c.js"><link rel="prefetch" href="/assets/index.html.a4854810.js"><link rel="prefetch" href="/assets/index.html.ca539492.js"><link rel="prefetch" href="/assets/index.html.92020366.js"><link rel="prefetch" href="/assets/index.html.18b13484.js"><link rel="prefetch" href="/assets/index.html.d57de6a5.js"><link rel="prefetch" href="/assets/index.html.b32948aa.js"><link rel="prefetch" href="/assets/index.html.12219084.js"><link rel="prefetch" href="/assets/index.html.761e775b.js"><link rel="prefetch" href="/assets/index.html.39687bb9.js"><link rel="prefetch" href="/assets/index.html.1dd7d0a9.js"><link rel="prefetch" href="/assets/index.html.d81415b4.js"><link rel="prefetch" href="/assets/index.html.d003c474.js"><link rel="prefetch" href="/assets/index.html.d3d7107c.js"><link rel="prefetch" href="/assets/index.html.e38df3ba.js"><link rel="prefetch" href="/assets/index.html.2a8d6964.js"><link rel="prefetch" href="/assets/index.html.74771a67.js"><link rel="prefetch" href="/assets/index.html.4e89eee0.js"><link rel="prefetch" href="/assets/index.html.24dbed7c.js"><link rel="prefetch" href="/assets/index.html.80a522ab.js"><link rel="prefetch" href="/assets/index.html.beb21d30.js"><link rel="prefetch" href="/assets/index.html.3040609d.js"><link rel="prefetch" href="/assets/index.html.654168e1.js"><link rel="prefetch" href="/assets/index.html.38800f66.js"><link rel="prefetch" href="/assets/index.html.73153c9a.js"><link rel="prefetch" href="/assets/index.html.3e1b7fb8.js"><link rel="prefetch" href="/assets/index.html.73d3b86d.js"><link rel="prefetch" href="/assets/index.html.a2ed45e8.js"><link rel="prefetch" href="/assets/index.html.8fe4c074.js"><link rel="prefetch" href="/assets/index.html.7fa1160f.js"><link rel="prefetch" href="/assets/index.html.dbaaa34f.js"><link rel="prefetch" href="/assets/index.html.80542382.js"><link rel="prefetch" href="/assets/index.html.318b986a.js"><link rel="prefetch" href="/assets/index.html.ab7b3106.js"><link rel="prefetch" href="/assets/index.html.570415ea.js"><link rel="prefetch" href="/assets/index.html.a2506fc9.js"><link rel="prefetch" href="/assets/index.html.37d5a28d.js"><link rel="prefetch" href="/assets/index.html.9fa7a9bd.js"><link rel="prefetch" href="/assets/index.html.601c940b.js"><link rel="prefetch" href="/assets/index.html.73529bb0.js"><link rel="prefetch" href="/assets/index.html.b2e59cf7.js"><link rel="prefetch" href="/assets/index.html.e162bc09.js"><link rel="prefetch" href="/assets/index.html.3688e41c.js"><link rel="prefetch" href="/assets/index.html.90090565.js"><link rel="prefetch" href="/assets/index.html.de55608f.js"><link rel="prefetch" href="/assets/index.html.351f336b.js"><link rel="prefetch" href="/assets/index.html.1df165d0.js"><link rel="prefetch" href="/assets/index.html.d0daaf64.js"><link rel="prefetch" href="/assets/index.html.202baa92.js"><link rel="prefetch" href="/assets/index.html.353d3b1a.js"><link rel="prefetch" href="/assets/index.html.69ddc24c.js"><link rel="prefetch" href="/assets/index.html.75cb81a2.js"><link rel="prefetch" href="/assets/index.html.586cd875.js"><link rel="prefetch" href="/assets/index.html.0529ea7b.js"><link rel="prefetch" href="/assets/index.html.799e46fe.js"><link rel="prefetch" href="/assets/index.html.37269169.js"><link rel="prefetch" href="/assets/index.html.8238c9df.js"><link rel="prefetch" href="/assets/index.html.15b630d1.js"><link rel="prefetch" href="/assets/index.html.32b48f12.js"><link rel="prefetch" href="/assets/index.html.52730f5e.js"><link rel="prefetch" href="/assets/index.html.94d527ed.js"><link rel="prefetch" href="/assets/index.html.83aa062b.js"><link rel="prefetch" href="/assets/home.html.92edcdec.js"><link rel="prefetch" href="/assets/slide.html.89842a51.js"><link rel="prefetch" href="/assets/index.html.f086cfee.js"><link rel="prefetch" href="/assets/index.html.e69811a9.js"><link rel="prefetch" href="/assets/disable.html.a039df82.js"><link rel="prefetch" href="/assets/encrypt.html.ad75452d.js"><link rel="prefetch" href="/assets/markdown.html.417b47bd.js"><link rel="prefetch" href="/assets/page.html.b70a7d63.js"><link rel="prefetch" href="/assets/index.html.a0b3cfb1.js"><link rel="prefetch" href="/assets/go-questions.html.8338fc21.js"><link rel="prefetch" href="/assets/index.html.44936e34.js"><link rel="prefetch" href="/assets/index.html.c53d2777.js"><link rel="prefetch" href="/assets/curl-pdf.html.b36ebc6e.js"><link rel="prefetch" href="/assets/distributed-dtm.html.7b6ad01c.js"><link rel="prefetch" href="/assets/multi-goroutine-result.html.f05dd263.js"><link rel="prefetch" href="/assets/mysql-dtm.html.f063c719.js"><link rel="prefetch" href="/assets/mysql-index-b-tree.html.0a9aae1c.js"><link rel="prefetch" href="/assets/mysql-master-slave.html.2427105b.js"><link rel="prefetch" href="/assets/mysql-transiation.html.407bb310.js"><link rel="prefetch" href="/assets/php-slice-upload.html.6b8badf6.js"><link rel="prefetch" href="/assets/redis-cache-struct.html.4cfe3c6d.js"><link rel="prefetch" href="/assets/sql-auth.html.91c4a778.js"><link rel="prefetch" href="/assets/sql-lifecycle.html.f6c322ce.js"><link rel="prefetch" href="/assets/strategy.html.0c13bf1e.js"><link rel="prefetch" href="/assets/unique-hash-algom.html.941c674c.js"><link rel="prefetch" href="/assets/vscode-generate-code.html.d97ce879.js"><link rel="prefetch" href="/assets/index.html.1c621734.js"><link rel="prefetch" href="/assets/index.html.4cdbbfdf.js"><link rel="prefetch" href="/assets/c-helloworld.html.ee4ff7bf.js"><link rel="prefetch" href="/assets/c-ld.html.614c5eff.js"><link rel="prefetch" href="/assets/file-include.html.29666b7a.js"><link rel="prefetch" href="/assets/makefile.html.52331ff8.js"><link rel="prefetch" href="/assets/variable-memory.html.06fec2f1.js"><link rel="prefetch" href="/assets/index.html.c5af1bef.js"><link rel="prefetch" href="/assets/elf.html.80cf2457.js"><link rel="prefetch" href="/assets/swoole-process.html.05725cf0.js"><link rel="prefetch" href="/assets/index.html.e961e893.js"><link rel="prefetch" href="/assets/algo-base.html.03b00682.js"><link rel="prefetch" href="/assets/algo-insert-sort.html.ff12d494.js"><link rel="prefetch" href="/assets/algo-palindrome.html.9cce76dd.js"><link rel="prefetch" href="/assets/algo-recursive.html.569d66e1.js"><link rel="prefetch" href="/assets/algo-search.html.6c4494cc.js"><link rel="prefetch" href="/assets/algo-sort.html.beb6ab0b.js"><link rel="prefetch" href="/assets/leetcode-plusone.html.2755644f.js"><link rel="prefetch" href="/assets/line-table.html.b58e2da3.js"><link rel="prefetch" href="/assets/index.html.1cef17e0.js"><link rel="prefetch" href="/assets/docker-install-mysql.html.11861df1.js"><link rel="prefetch" href="/assets/docker-install-redis.html.7469724a.js"><link rel="prefetch" href="/assets/linux-install-docker.html.d5b12860.js"><link rel="prefetch" href="/assets/linux-install-nginx.html.9ca45223.js"><link rel="prefetch" href="/assets/linux-mysql8.html.b5fccbd7.js"><link rel="prefetch" href="/assets/mac-laradock.html.ac0ed3d4.js"><link rel="prefetch" href="/assets/vagrant-centos7.html.29a200d0.js"><link rel="prefetch" href="/assets/index.html.85e99411.js"><link rel="prefetch" href="/assets/base.html.1ac011a1.js"><link rel="prefetch" href="/assets/go-base-datatype.html.05408a3a.js"><link rel="prefetch" href="/assets/go-channel.html.eae84415.js"><link rel="prefetch" href="/assets/go-concurrent-base.html.55139ded.js"><link rel="prefetch" href="/assets/go-constant.html.bdbf5bd5.js"><link rel="prefetch" href="/assets/go-context.html.077b7de6.js"><link rel="prefetch" href="/assets/go-coroutine-dispath.html.6d0026bd.js"><link rel="prefetch" href="/assets/go-cross-compiler.html.9bcb4be5.js"><link rel="prefetch" href="/assets/go-data-convert.html.d5d9a8b7.js"><link rel="prefetch" href="/assets/go-error.html.cc1960c7.js"><link rel="prefetch" href="/assets/go-file.html.5cf19616.js"><link rel="prefetch" href="/assets/go-goroutine.html.974ca983.js"><link rel="prefetch" href="/assets/go-interface.html.a06b1a70.js"><link rel="prefetch" href="/assets/go-interview.html.bff9bf3f.js"><link rel="prefetch" href="/assets/go-lock.html.90ef8b8d.js"><link rel="prefetch" href="/assets/go-map.html.a8ab8ef8.js"><link rel="prefetch" href="/assets/go-method.html.c29f29aa.js"><link rel="prefetch" href="/assets/go-module-unit.html.7112fb72.js"><link rel="prefetch" href="/assets/go-oop.html.f114c58a.js"><link rel="prefetch" href="/assets/go-package.html.9e3359c2.js"><link rel="prefetch" href="/assets/go-pointer.html.ba8cbf21.js"><link rel="prefetch" href="/assets/go-select.html.75367bce.js"><link rel="prefetch" href="/assets/go-slice.html.fc3224a4.js"><link rel="prefetch" href="/assets/go-string.html.4d501c28.js"><link rel="prefetch" href="/assets/go-struct-interface.html.53717dc9.js"><link rel="prefetch" href="/assets/go-struct-memory-layout.html.ae38ab67.js"><link rel="prefetch" href="/assets/go-time.html.8e4125bc.js"><link rel="prefetch" href="/assets/go并发安全与锁.html.b6a259c0.js"><link rel="prefetch" href="/assets/grpc-protobuf.html.40c9d3bb.js"><link rel="prefetch" href="/assets/mac-go-env.html.9c886999.js"><link rel="prefetch" href="/assets/index.html.dd63cb59.js"><link rel="prefetch" href="/assets/go-dynamically.html.5be29790.js"><link rel="prefetch" href="/assets/go-elf.html.98f010e3.js"><link rel="prefetch" href="/assets/go-map-theory.html.a13c9b59.js"><link rel="prefetch" href="/assets/go-statically.html.821455c1.js"><link rel="prefetch" href="/assets/interface-type.html.3a48f1c1.js"><link rel="prefetch" href="/assets/map-grow.html.e8a4de53.js"><link rel="prefetch" href="/assets/sync-map.html.dabb5063.js"><link rel="prefetch" href="/assets/index.html.5ecb0014.js"><link rel="prefetch" href="/assets/go-zero模型操作.html.afa58069.js"><link rel="prefetch" href="/assets/go-zero环境搭建.html.8b35396b.js"><link rel="prefetch" href="/assets/index.html.be81eb9b.js"><link rel="prefetch" href="/assets/cargo-base-use.html.c7b1bb4f.js"><link rel="prefetch" href="/assets/first-rust-code.html.bf1d1d23.js"><link rel="prefetch" href="/assets/windows-env-rust.html.57a23535.js"><link rel="prefetch" href="/assets/index.html.be4e9b84.js"><link rel="prefetch" href="/assets/go-tcp.html.f9e112c0.js"><link rel="prefetch" href="/assets/ipv4-learn.html.4f992ea7.js"><link rel="prefetch" href="/assets/ipv4-tcp-client.html.ead4c4e5.js"><link rel="prefetch" href="/assets/ipv4-udp.html.07815e2e.js"><link rel="prefetch" href="/assets/socket-base.html.c4b28da3.js"><link rel="prefetch" href="/assets/socket-desc.html.aad20e5b.js"><link rel="prefetch" href="/assets/stream-socket-api.html.913755a0.js"><link rel="prefetch" href="/assets/unix-socket.html.b629540f.js"><link rel="prefetch" href="/assets/workerman-websocket-demo.html.3dfe6927.js"><link rel="prefetch" href="/assets/index.html.8819628e.js"><link rel="prefetch" href="/assets/admin-dashboard.html.5ed96b40.js"><link rel="prefetch" href="/assets/cdn-page.html.8d99d104.js"><link rel="prefetch" href="/assets/404.html.e1d24937.js"><link rel="prefetch" href="/assets/index.html.204818c8.js"><link rel="prefetch" href="/assets/index.html.80cece3c.js"><link rel="prefetch" href="/assets/index.html.4d2c1329.js"><link rel="prefetch" href="/assets/index.html.b27a0df0.js"><link rel="prefetch" href="/assets/index.html.c6839c9b.js"><link rel="prefetch" href="/assets/index.html.b133e9c9.js"><link rel="prefetch" href="/assets/index.html.1c2bbb4d.js"><link rel="prefetch" href="/assets/index.html.e352d170.js"><link rel="prefetch" href="/assets/index.html.42e179a1.js"><link rel="prefetch" href="/assets/index.html.6ee2c69b.js"><link rel="prefetch" href="/assets/index.html.77cff622.js"><link rel="prefetch" href="/assets/index.html.4e10d1bf.js"><link rel="prefetch" href="/assets/index.html.cec00219.js"><link rel="prefetch" href="/assets/index.html.242d249b.js"><link rel="prefetch" href="/assets/index.html.b70df4e4.js"><link rel="prefetch" href="/assets/index.html.2df3cffb.js"><link rel="prefetch" href="/assets/index.html.235ee45d.js"><link rel="prefetch" href="/assets/index.html.dfe54975.js"><link rel="prefetch" href="/assets/index.html.9fd66022.js"><link rel="prefetch" href="/assets/index.html.ea3e80a0.js"><link rel="prefetch" href="/assets/index.html.88276355.js"><link rel="prefetch" href="/assets/index.html.9817e971.js"><link rel="prefetch" href="/assets/index.html.800f495b.js"><link rel="prefetch" href="/assets/index.html.15fc3a8f.js"><link rel="prefetch" href="/assets/index.html.2ee5fccb.js"><link rel="prefetch" href="/assets/index.html.168d52f8.js"><link rel="prefetch" href="/assets/index.html.b2092b16.js"><link rel="prefetch" href="/assets/index.html.85b63ca7.js"><link rel="prefetch" href="/assets/index.html.2fba327f.js"><link rel="prefetch" href="/assets/index.html.6d2bf9d7.js"><link rel="prefetch" href="/assets/index.html.706ef2bb.js"><link rel="prefetch" href="/assets/index.html.08f577f5.js"><link rel="prefetch" href="/assets/index.html.10d353cb.js"><link rel="prefetch" href="/assets/index.html.6e5c0376.js"><link rel="prefetch" href="/assets/index.html.18cd94ad.js"><link rel="prefetch" href="/assets/index.html.2166ba73.js"><link rel="prefetch" href="/assets/index.html.2396d84c.js"><link rel="prefetch" href="/assets/index.html.5ce9e636.js"><link rel="prefetch" href="/assets/index.html.1bd1ad4c.js"><link rel="prefetch" href="/assets/index.html.affffe1c.js"><link rel="prefetch" href="/assets/index.html.c8e89eea.js"><link rel="prefetch" href="/assets/index.html.12f3bd70.js"><link rel="prefetch" href="/assets/index.html.0cbf2bcb.js"><link rel="prefetch" href="/assets/index.html.5b65fa92.js"><link rel="prefetch" href="/assets/index.html.45b35f7f.js"><link rel="prefetch" href="/assets/index.html.05988f34.js"><link rel="prefetch" href="/assets/index.html.fb9b79f8.js"><link rel="prefetch" href="/assets/index.html.4757b6b7.js"><link rel="prefetch" href="/assets/index.html.09952370.js"><link rel="prefetch" href="/assets/index.html.1f5cdd2d.js"><link rel="prefetch" href="/assets/index.html.c28c9614.js"><link rel="prefetch" href="/assets/index.html.3cfa4918.js"><link rel="prefetch" href="/assets/index.html.e690235e.js"><link rel="prefetch" href="/assets/index.html.e60da83d.js"><link rel="prefetch" href="/assets/index.html.f5550f76.js"><link rel="prefetch" href="/assets/index.html.b17b835d.js"><link rel="prefetch" href="/assets/index.html.cbdee6e0.js"><link rel="prefetch" href="/assets/index.html.e954479a.js"><link rel="prefetch" href="/assets/index.html.d86b2a56.js"><link rel="prefetch" href="/assets/index.html.5ae89b83.js"><link rel="prefetch" href="/assets/index.html.dde3c56b.js"><link rel="prefetch" href="/assets/index.html.57d54847.js"><link rel="prefetch" href="/assets/index.html.d62e7ace.js"><link rel="prefetch" href="/assets/index.html.ff5880fd.js"><link rel="prefetch" href="/assets/index.html.ecab6153.js"><link rel="prefetch" href="/assets/index.html.bfa049ca.js"><link rel="prefetch" href="/assets/index.html.648ca3ac.js"><link rel="prefetch" href="/assets/index.html.cb025b6c.js"><link rel="prefetch" href="/assets/index.html.56e12227.js"><link rel="prefetch" href="/assets/index.html.362476b1.js"><link rel="prefetch" href="/assets/index.html.af0cf4a3.js"><link rel="prefetch" href="/assets/index.html.c7428a5b.js"><link rel="prefetch" href="/assets/index.html.00d7b0f0.js"><link rel="prefetch" href="/assets/index.html.f659ec11.js"><link rel="prefetch" href="/assets/index.html.775b3de6.js"><link rel="prefetch" href="/assets/index.html.f011ba3d.js"><link rel="prefetch" href="/assets/index.html.f9bdea62.js"><link rel="prefetch" href="/assets/index.html.236f4f0b.js"><link rel="prefetch" href="/assets/index.html.c953302b.js"><link rel="prefetch" href="/assets/index.html.ea902dcd.js"><link rel="prefetch" href="/assets/index.html.430cd770.js"><link rel="prefetch" href="/assets/index.html.7e2f8f7b.js"><link rel="prefetch" href="/assets/index.html.26dd9d8d.js"><link rel="prefetch" href="/assets/index.html.41cc88bc.js"><link rel="prefetch" href="/assets/index.html.6de7ac47.js"><link rel="prefetch" href="/assets/index.html.a6336776.js"><link rel="prefetch" href="/assets/index.html.bee4ca09.js"><link rel="prefetch" href="/assets/index.html.732b22da.js"><link rel="prefetch" href="/assets/index.html.3ae8cf64.js"><link rel="prefetch" href="/assets/index.html.37d1c040.js"><link rel="prefetch" href="/assets/index.html.04363597.js"><link rel="prefetch" href="/assets/index.html.6c197d48.js"><link rel="prefetch" href="/assets/index.html.07355970.js"><link rel="prefetch" href="/assets/index.html.6a4055f2.js"><link rel="prefetch" href="/assets/index.html.fbe380c0.js"><link rel="prefetch" href="/assets/index.html.b92d1dd2.js"><link rel="prefetch" href="/assets/index.html.ce6e76bc.js"><link rel="prefetch" href="/assets/index.html.3cda27b3.js"><link rel="prefetch" href="/assets/index.html.1a31f9fd.js"><link rel="prefetch" href="/assets/index.html.2062bd81.js"><link rel="prefetch" href="/assets/404.1c5d2e85.js"><link rel="prefetch" href="/assets/Layout.cda839dc.js"><link rel="prefetch" href="/assets/Slide.ac8cabd6.js"><link rel="prefetch" href="/assets/Blog.808ca318.js"><link rel="prefetch" href="/assets/giscus.es.4b119d67.js"><link rel="prefetch" href="/assets/auto.esm.36809f22.js"><link rel="prefetch" href="/assets/index.daae04bf.js"><link rel="prefetch" href="/assets/index.1842ee54.js"><link rel="prefetch" href="/assets/mermaid.esm.min.d8b76e20.js"><link rel="prefetch" href="/assets/highlight.esm.d982e650.js"><link rel="prefetch" href="/assets/markdown.esm.832a189d.js"><link rel="prefetch" href="/assets/math.esm.a3f84b6f.js"><link rel="prefetch" href="/assets/notes.esm.3c361cb7.js"><link rel="prefetch" href="/assets/reveal.esm.b96f05d8.js"><link rel="prefetch" href="/assets/search.esm.80da4a02.js"><link rel="prefetch" href="/assets/zoom.esm.8514a202.js"><link rel="prefetch" href="/assets/photoswipe.esm.92018b73.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/" class="brand"><img class="logo" src="https://sword-demon.github.io/vue-blog/logo.jpg" alt="wxvirus"><!----><span class="site-name hide-in-pad">wxvirus</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="主页"><span class="icon iconfont icon-home" style=""></span>主页<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="后端笔记"><span class="title"><span class="icon iconfont icon-creative" style=""></span>后端笔记</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/views/" class="nav-link" aria-label="后端学习"><span class="icon iconfont icon-code" style=""></span>后端学习<!----></a></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Go</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/views/go/" class="nav-link" aria-label="go语言基础"><!---->go语言基础<!----></a></li><li class="dropdown-subitem"><a href="/views/go-core/" class="nav-link" aria-label="go核心"><!---->go核心<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Go-zero</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/views/go-zero/" class="nav-link" aria-label="go-zero微服务框架学习"><!---->go-zero微服务框架学习<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>运维技术</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/views/deploy/" class="nav-link active" aria-label="运维、K8S、Docker、Linux技术笔记"><!---->运维、K8S、Docker、Linux技术笔记<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Rust</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/views/rust/" class="nav-link" aria-label="Rust学习"><!---->Rust学习<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Linux"><span class="title"><!---->Linux</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/linux/" class="nav-link" aria-label="Linux"><span class="icon iconfont icon-code" style=""></span>Linux<!----></a></li><li class="dropdown-item"><a href="/linux/c-core/" class="nav-link" aria-label="Linux C Core"><!---->Linux C Core<!----></a></li><li class="dropdown-item"><a href="/linux/process/" class="nav-link" aria-label="Linux PHP 多进程"><!---->Linux PHP 多进程<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="/views/socket/" class="nav-link" aria-label="网络编程"><!---->网络编程<!----></a></div><div class="nav-item hide-in-mobile"><a href="/views/data-struct/" class="nav-link" aria-label="数据结构与算法"><!---->数据结构与算法<!----></a></div><div class="nav-item hide-in-mobile"><a href="/posts/" class="nav-link" aria-label="随笔"><!---->随笔<!----></a></div><div class="nav-item hide-in-mobile"><a href="/interview/" class="nav-link" aria-label="面试"><!---->面试<!----></a></div><div class="nav-item hide-in-mobile"><a href="/views/vue3/" class="nav-link" aria-label="Vue3"><!---->Vue3<!----></a></div></nav><!----></div><div class="navbar-right"><!----><!----><div class="nav-item"><a class="repo-link" href="https://github.com/sword-demon/sword-demon.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/views/deploy/" class="nav-link sidebar-link sidebar-page" aria-label="运维、K8S、Docker、Linux技术笔记"><!---->运维、K8S、Docker、Linux技术笔记<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/views/deploy/vagrant-centos7.html" class="nav-link sidebar-link sidebar-page" aria-label="vagrant创建centos7虚拟机"><!---->vagrant创建centos7虚拟机<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/views/deploy/mac-laradock.html" class="nav-link sidebar-link sidebar-page" aria-label="mac m1 安装laradock"><!---->mac m1 安装laradock<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/views/deploy/linux-install-docker.html" class="nav-link sidebar-link sidebar-page" aria-label="Linux安装docker"><!---->Linux安装docker<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/views/deploy/docker-install-mysql.html" class="nav-link sidebar-link sidebar-page" aria-label="Docker安装MySQL"><!---->Docker安装MySQL<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/views/deploy/docker-install-redis.html" class="nav-link sidebar-link sidebar-page" aria-label="Docker安装Redis"><!---->Docker安装Redis<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/views/deploy/linux-mysql8.html" class="nav-link sidebar-link sidebar-page" aria-label="Linux安装MySQL8"><!---->Linux安装MySQL8<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/views/deploy/linux-install-nginx.html" class="nav-link sidebar-link sidebar-page" aria-label="Linux安装Nginx和配置"><!---->Linux安装Nginx和配置<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/views/deploy/linux-install-php-swoole.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="Linux编译安装PHP7.4和Swoole扩展"><!---->Linux编译安装PHP7.4和Swoole扩展<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/deploy/linux-install-php-swoole.html#目录" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="目录"><!---->目录<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/deploy/linux-install-php-swoole.html#下载安装-yum-源-centos7" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="下载安装 yum 源(centos7)"><!---->下载安装 yum 源(centos7)<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/deploy/linux-install-php-swoole.html#安装-sl-命令-小火车" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="安装 sl 命令(小火车)"><!---->安装 sl 命令(小火车)<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/deploy/linux-install-php-swoole.html#安装-ipython-命令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="安装 ipython 命令"><!---->安装 ipython 命令<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/deploy/linux-install-php-swoole.html#安装-php7-4" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="安装 PHP7.4"><!---->安装 PHP7.4<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/deploy/linux-install-php-swoole.html#安装-cmake-3-17-0-rc1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="安装 cmake-3.17.0-rc1"><!---->安装 cmake-3.17.0-rc1<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/deploy/linux-install-php-swoole.html#安装-libzip-1-6-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="安装 libzip-1.6.1"><!---->安装 libzip-1.6.1<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/deploy/linux-install-php-swoole.html#安装-zip-1-17-1-扩展" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="安装 zip-1.17.1 扩展"><!---->安装 zip-1.17.1 扩展<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/deploy/linux-install-php-swoole.html#配置-php7-4" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="配置 PHP7.4"><!---->配置 PHP7.4<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/deploy/linux-install-php-swoole.html#测试" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="测试"><!---->测试<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/deploy/linux-install-php-swoole.html#php7-4-性能调优" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="PHP7.4 性能调优"><!---->PHP7.4 性能调优<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/deploy/linux-install-php-swoole.html#关于-opache-的一些配置" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="关于 opache 的一些配置"><!---->关于 opache 的一些配置<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/deploy/linux-install-php-swoole.html#thinkphp-开启二级域名" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ThinkPHP 开启二级域名"><!---->ThinkPHP 开启二级域名<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/deploy/linux-install-php-swoole.html#调整-php7-4-配置的一些内容" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="调整 PHP7.4 配置的一些内容"><!---->调整 PHP7.4 配置的一些内容<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/deploy/linux-install-php-swoole.html#pdo-mysql-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="pdo_mysql"><!---->pdo_mysql<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/deploy/linux-install-php-swoole.html#php7-4-安装-swoole-扩展" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="PHP7.4 安装 swoole 扩展"><!---->PHP7.4 安装 swoole 扩展<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/deploy/linux-install-php-swoole.html#安装-composer" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="安装 composer"><!---->安装 composer<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->Linux编译安装PHP7.4和Swoole扩展</h1><div class="page-info"><span class="author-info" aria-label="作者🖊" data-balloon-pos="down" localizeddate="2022年8月14日" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://sword-demon.github.io" target="_blank" rel="noopener noreferrer">wxvirus</a></span><span property="author" content="wxvirus"></span></span><!----><span class="date-info" aria-label="写作日期📅" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span>2022年8月14日</span><meta property="datePublished" content="2022-08-14T21:04:10.000Z"></span><span class="category-info" aria-label="分类🌈" data-balloon-pos="down" localizeddate="2022年8月14日" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><ul class="categories-wrapper"><li class="category category3 clickable" role="navigation">Deploy</li><meta property="articleSection" content="Deploy"></ul></span><span aria-label="标签🏷" data-balloon-pos="down" localizeddate="2022年8月14日" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><ul class="tags-wrapper"><li class="tag tag2 clickable" role="navigation">PHP</li><li class="tag tag7 clickable" role="navigation">Swoole</li></ul><meta property="keywords" content="PHP,Swoole"></span><span class="reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down" localizeddate="2022年8月14日" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 16 分钟</span><meta property="timeRequired" content="PT16M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">此页内容</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/deploy/linux-install-php-swoole.html#目录" class="router-link-active router-link-exact-active toc-link level2">目录</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/deploy/linux-install-php-swoole.html#下载安装-yum-源-centos7" class="router-link-active router-link-exact-active toc-link level2">下载安装 yum 源(centos7)</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/deploy/linux-install-php-swoole.html#安装-sl-命令-小火车" class="router-link-active router-link-exact-active toc-link level2">安装 sl 命令(小火车)</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/deploy/linux-install-php-swoole.html#安装-ipython-命令" class="router-link-active router-link-exact-active toc-link level2">安装 ipython 命令</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/deploy/linux-install-php-swoole.html#安装-php7-4" class="router-link-active router-link-exact-active toc-link level2">安装 PHP7.4</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/deploy/linux-install-php-swoole.html#安装-cmake-3-17-0-rc1" class="router-link-active router-link-exact-active toc-link level2">安装 cmake-3.17.0-rc1</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/deploy/linux-install-php-swoole.html#安装-libzip-1-6-1" class="router-link-active router-link-exact-active toc-link level2">安装 libzip-1.6.1</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/deploy/linux-install-php-swoole.html#安装-zip-1-17-1-扩展" class="router-link-active router-link-exact-active toc-link level2">安装 zip-1.17.1 扩展</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/deploy/linux-install-php-swoole.html#配置-php7-4" class="router-link-active router-link-exact-active toc-link level2">配置 PHP7.4</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/deploy/linux-install-php-swoole.html#测试" class="router-link-active router-link-exact-active toc-link level3">测试</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/deploy/linux-install-php-swoole.html#php7-4-性能调优" class="router-link-active router-link-exact-active toc-link level2">PHP7.4 性能调优</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/deploy/linux-install-php-swoole.html#关于-opache-的一些配置" class="router-link-active router-link-exact-active toc-link level2">关于 opache 的一些配置</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/deploy/linux-install-php-swoole.html#thinkphp-开启二级域名" class="router-link-active router-link-exact-active toc-link level2">ThinkPHP 开启二级域名</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/deploy/linux-install-php-swoole.html#调整-php7-4-配置的一些内容" class="router-link-active router-link-exact-active toc-link level2">调整 PHP7.4 配置的一些内容</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/deploy/linux-install-php-swoole.html#pdo-mysql-1" class="router-link-active router-link-exact-active toc-link level3">pdo_mysql</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/deploy/linux-install-php-swoole.html#php7-4-安装-swoole-扩展" class="router-link-active router-link-exact-active toc-link level2">PHP7.4 安装 swoole 扩展</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/deploy/linux-install-php-swoole.html#安装-composer" class="router-link-active router-link-exact-active toc-link level2">安装 composer</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="php7-4-编译安装" tabindex="-1"><a class="header-anchor" href="#php7-4-编译安装" aria-hidden="true">#</a> PHP7.4 编译安装</h1><h2 id="目录" tabindex="-1"><a class="header-anchor" href="#目录" aria-hidden="true">#</a> 目录</h2><ul><li><p><a href="#%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85yum%E6%BA%90centos7">下载安装 yum 源(centos7)</a></p></li><li><p><a href="#%E5%AE%89%E8%A3%85sl%E5%91%BD%E4%BB%A4%E5%B0%8F%E7%81%AB%E8%BD%A6">安装 sl 命令(小火车)</a></p></li><li><p><a href="#%E5%AE%89%E8%A3%85ipython%E5%91%BD%E4%BB%A4">安装 ipython 命令</a></p></li><li><p><a href="#%E5%AE%89%E8%A3%85php74">安装 PHP7.4</a></p></li><li><p><a href="#%E5%AE%89%E8%A3%85cmake-3170-rc1">安装 cmake-3.17.0-rc1</a></p></li><li><p><a href="#%E5%AE%89%E8%A3%85libzip-161">安装 libzip-1.6.1</a></p></li><li><p><a href="#%E5%AE%89%E8%A3%85zip-1171%E6%89%A9%E5%B1%95">安装 zip-1.17.1 扩展</a></p></li><li><p><a href="#%E9%85%8D%E7%BD%AEphp74">配置 PHP7.4</a></p><ul><li><p><a href="#%E6%B5%8B%E8%AF%95">测试</a></p><ul><li><p><a href="#zip">zip</a></p></li><li><p><a href="#mysqli">mysqli</a></p></li><li><p><a href="#pdo_mysql">pdo_mysql</a></p></li></ul></li></ul></li><li><p><a href="#php74%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98">PHP7.4 性能调优</a></p></li><li><p><a href="#%E5%85%B3%E4%BA%8Eopache%E7%9A%84%E4%B8%80%E4%BA%9B%E9%85%8D%E7%BD%AE">关于 opache 的一些配置</a></p></li><li><p><a href="#thinkphp%E5%BC%80%E5%90%AF%E4%BA%8C%E7%BA%A7%E5%9F%9F%E5%90%8D">ThinkPHP 开启二级域名</a></p></li><li><p><a href="#%E8%B0%83%E6%95%B4php74%E9%85%8D%E7%BD%AE%E7%9A%84%E4%B8%80%E4%BA%9B%E5%86%85%E5%AE%B9">调整 PHP7.4 配置的一些内容</a></p><ul><li><a href="#pdo_mysql-1">pdo_mysql</a></li></ul></li><li><p><a href="#php74%E5%AE%89%E8%A3%85swoole%E6%89%A9%E5%B1%95">PHP7.4 安装 swoole 扩展</a></p></li><li><p><a href="#%E5%AE%89%E8%A3%85composer">安装 composer</a></p></li></ul><h2 id="下载安装-yum-源-centos7" tabindex="-1"><a class="header-anchor" href="#下载安装-yum-源-centos7" aria-hidden="true">#</a> 下载安装 yum 源(centos7)</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">wget</span> http://mirror.centos.org/centos/7/extras/x86_64/Packages/epel-release-7-11.noarch.rpm

yum <span class="token function">install</span> -y epel-release-7-11.noarch.rpm
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="安装-sl-命令-小火车" tabindex="-1"><a class="header-anchor" href="#安装-sl-命令-小火车" aria-hidden="true">#</a> 安装 sl 命令(小火车)</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum <span class="token function">install</span> -y sl
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="安装-ipython-命令" tabindex="-1"><a class="header-anchor" href="#安装-ipython-命令" aria-hidden="true">#</a> 安装 ipython 命令</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum <span class="token function">install</span> -y ipython
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="安装-php7-4" tabindex="-1"><a class="header-anchor" href="#安装-php7-4" aria-hidden="true">#</a> 安装 PHP7.4</h2><p>首先准备一个 7.4 的源码包上传到<code>/usr/local/src</code>目录下，进行解压</p><p>然后查看 PHP7.4 需要安装的一些依赖</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>./configure --prefix<span class="token operator">=</span>/usr/local/php7 --with-config-file-path<span class="token operator">=</span>/usr/local/php7/etc  --with-mysqli   --with-pdo-mysql --with-xmlrpc --with-openssl --with-openssl-dir --with-zlib --with-zlib-dir  --with-freetype --enable-gd --with-jpeg  --enable-short-tags --enable-sockets --enable-soap --enable-mbstring --enable-static --with-curl  --with-xsl --enable-ftp --with-libxml  --enable-fpm --with-pdo-sqlite  --with-gettext --with-iconv-dir --with-kerberos --with-libdir<span class="token operator">=</span>lib64  --with-pear --with-mhash  --enable-gd-jis-conv --enable-bcmath --with-expat --enable-inline-optimization --enable-mbregex --enable-opcache  --enable-sysvsem --enable-xml --enable-maintainer-zts  --enable-simplexml --disable-rpath --disable-fileinfo

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>​ 如果出现以下错误</p><blockquote><p>No package &#39;sqlite3&#39; found</p></blockquote><p>安装一下这个库即可</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum <span class="token function">install</span> libsqlite3x-devel -y
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>如果出现以下错误：</p><blockquote><p>error: Package requirements (oniguruma) were not met</p></blockquote><p>安装如下依赖</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum <span class="token function">install</span> oniguruma-devel -y
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>然后再重更新运行上面配置代码</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>+--------------------------------------------------------------------+
<span class="token operator">|</span> License:                                                           <span class="token operator">|</span>
<span class="token operator">|</span> This software is subject to the PHP License, available <span class="token keyword">in</span> this     <span class="token operator">|</span>
<span class="token operator">|</span> distribution <span class="token keyword">in</span> the <span class="token function">file</span> LICENSE. By continuing this installation  <span class="token operator">|</span>
<span class="token operator">|</span> process, you are bound by the terms of this license agreement.     <span class="token operator">|</span>
<span class="token operator">|</span> If you <span class="token keyword">do</span> not agree with the terms of this license, you must abort <span class="token operator">|</span>
<span class="token operator">|</span> the installation process at this point.                            <span class="token operator">|</span>
+--------------------------------------------------------------------+

Thank you <span class="token keyword">for</span> using PHP.

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>最终出现这个，就代表成功了。</p><p>下面就可以<code>make &amp;&amp; make intall</code>进行编译安装了</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>Installing shared extensions:     /usr/local/php7/lib/php/extensions/no-debug-zts-20190902/
Installing PHP CLI binary:        /usr/local/php7/bin/
Installing PHP CLI <span class="token function">man</span> page:      /usr/local/php7/php/man/man1/
Installing PHP FPM binary:        /usr/local/php7/sbin/
Installing PHP FPM defconfig:     /usr/local/php7/etc/
Installing PHP FPM <span class="token function">man</span> page:      /usr/local/php7/php/man/man8/
Installing PHP FPM status page:   /usr/local/php7/php/php/fpm/
Installing phpdbg binary:         /usr/local/php7/bin/
Installing phpdbg <span class="token function">man</span> page:       /usr/local/php7/php/man/man1/
Installing PHP CGI binary:        /usr/local/php7/bin/
Installing PHP CGI <span class="token function">man</span> page:      /usr/local/php7/php/man/man1/
Installing build environment:     /usr/local/php7/lib/php/build/
Installing header files:          /usr/local/php7/include/php/
Installing helper programs:       /usr/local/php7/bin/
  program: phpize
  program: php-config
Installing <span class="token function">man</span> pages:             /usr/local/php7/php/man/man1/
  page: phpize.1
  page: php-config.1
Installing PEAR environment:      /usr/local/php7/lib/php/
<span class="token punctuation">[</span>PEAR<span class="token punctuation">]</span> Archive_Tar    - installed: <span class="token number">1.4</span>.8
<span class="token punctuation">[</span>PEAR<span class="token punctuation">]</span> Console_Getopt - installed: <span class="token number">1.4</span>.3
<span class="token punctuation">[</span>PEAR<span class="token punctuation">]</span> Structures_Graph- installed: <span class="token number">1.1</span>.1
<span class="token punctuation">[</span>PEAR<span class="token punctuation">]</span> XML_Util       - installed: <span class="token number">1.4</span>.3
<span class="token punctuation">[</span>PEAR<span class="token punctuation">]</span> PEAR           - installed: <span class="token number">1.10</span>.10
Wrote PEAR system config <span class="token function">file</span> at: /usr/local/php7/etc/pear.conf
You may want to add: /usr/local/php7/lib/php to your php.ini include_path
/usr/local/src/php-7.4.2/build/shtool <span class="token function">install</span> -c ext/phar/phar.phar /usr/local/php7/bin
<span class="token function">ln</span> -s -f phar.phar /usr/local/php7/bin/phar
Installing PDO headers:           /usr/local/php7/include/php/ext/pdo/

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>出现上述内容，表示编译安装完成了。</p><h2 id="安装-cmake-3-17-0-rc1" tabindex="-1"><a class="header-anchor" href="#安装-cmake-3-17-0-rc1" aria-hidden="true">#</a> 安装 cmake-3.17.0-rc1</h2><p>将下载好的包传到服务器<code>/usr/local/src</code>目录下进行解压</p><p>解压完进入目录中使用如下命令</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 cmake-3.17.0-rc1<span class="token punctuation">]</span><span class="token comment"># ./bootstrap</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>-- Build files have been written to: /usr/local/src/cmake-3.17.0-rc1
---------------------------------------------
CMake has bootstrapped.  Now run gmake.

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>出现上述内容，根据它的提示运行<code>gmake</code>，等到<code>gmake</code>运行完了，再继续运行<code>make install</code>命令，这个速度会比较快。</p><p>然后我们就可以安装<code>libzip</code>组件</p><h2 id="安装-libzip-1-6-1" tabindex="-1"><a class="header-anchor" href="#安装-libzip-1-6-1" aria-hidden="true">#</a> 安装 libzip-1.6.1</h2><p>我们先去找资源下载一个这个包，然后上传到<code>/usr/local/src</code>目录中并解压</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 src<span class="token punctuation">]</span><span class="token comment"># cd libzip-1.6.1/</span>
<span class="token punctuation">[</span>root@10 libzip-1.6.1<span class="token punctuation">]</span><span class="token comment"># mkdir build</span>
<span class="token punctuation">[</span>root@10 libzip-1.6.1<span class="token punctuation">]</span><span class="token comment"># cd build/</span>
<span class="token punctuation">[</span>root@10 build<span class="token punctuation">]</span><span class="token comment"># cmake ..</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>最后出现以下内容即可</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>-- Configuring <span class="token keyword">done</span>
-- Generating <span class="token keyword">done</span>
-- Build files have been written to: /usr/local/src/libzip-1.6.1/build
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后就在<code>build</code>目录中进行<code>make &amp;&amp; make install</code>，这个速度也会挺快的。</p><p>安装成功出现下面的部分内容</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>-- Installing: /usr/local/bin/zipcmp
-- Set runtime path of <span class="token string">&quot;/usr/local/bin/zipcmp&quot;</span> to <span class="token string">&quot;&quot;</span>
-- Installing: /usr/local/bin/zipmerge
-- Set runtime path of <span class="token string">&quot;/usr/local/bin/zipmerge&quot;</span> to <span class="token string">&quot;&quot;</span>
-- Installing: /usr/local/bin/ziptool
-- Set runtime path of <span class="token string">&quot;/usr/local/bin/ziptool&quot;</span> to <span class="token string">&quot;&quot;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">vim</span> /etc/ld.so.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>添加内容</p><div class="language-纯文本 ext-纯文本 line-numbers-mode"><pre class="language-纯文本"><code>include ld.so.conf.d/*.conf

/usr/local/lib64
/usr/local/lib
/usr/lib
/usr/lib64
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后使用<code>lbconfig -v</code>查看一下即可</p><h2 id="安装-zip-1-17-1-扩展" tabindex="-1"><a class="header-anchor" href="#安装-zip-1-17-1-扩展" aria-hidden="true">#</a> 安装 zip-1.17.1 扩展</h2><p>我们先去找资源下载一个这个包，然后上传到<code>/usr/local/src</code>目录中并解压</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 zip-1.17.1<span class="token punctuation">]</span><span class="token comment"># /usr/local/php7/bin/phpize</span>
Configuring for:
PHP Api Version:         <span class="token number">20190902</span>
Zend Module Api No:      <span class="token number">20190902</span>
Zend Extension Api No:   <span class="token number">320190902</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 zip-1.17.1<span class="token punctuation">]</span><span class="token comment"># ./configure --with-php-config=/usr/local/php7/bin/php-config</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>出现以下内容即可</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>creating libtool
appending configuration tag <span class="token string">&quot;CXX&quot;</span> to libtool
configure: patching config.h.in
configure: creating ./config.status
config.status: creating config.h

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后编译安装</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 zip-1.17.1<span class="token punctuation">]</span><span class="token comment"># make &amp;&amp; make install</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>就会出现以下结果</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>Build complete.
Don<span class="token string">&#39;t forget to run &#39;</span><span class="token function">make</span> test&#39;.

Installing shared extensions:     /usr/local/php7/lib/php/extensions/no-debug-zts-20190902/

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="配置-php7-4" tabindex="-1"><a class="header-anchor" href="#配置-php7-4" aria-hidden="true">#</a> 配置 PHP7.4</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 php-7.4.2<span class="token punctuation">]</span><span class="token comment"># cd /usr/local/php7/</span>
<span class="token punctuation">[</span>root@10 php7<span class="token punctuation">]</span><span class="token comment"># cp etc/php-fpm.conf.default etc/php-fpm.conf</span>
<span class="token punctuation">[</span>root@10 php7<span class="token punctuation">]</span><span class="token comment"># cp /usr/local/src/php-7.4.2/php.ini-development /usr/local/php7/etc/php.ini</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 php7<span class="token punctuation">]</span><span class="token comment"># cd /usr/local/php7/etc/php-fpm.d/</span>
<span class="token punctuation">[</span>root@10 php-fpm.d<span class="token punctuation">]</span><span class="token comment"># cp www.conf.default www.conf</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>编辑<code>php.ini</code>加入<code>zip.so</code>扩展生效</p><div class="language-ini ext-ini line-numbers-mode"><pre class="language-ini"><code><span class="token comment">;extension=soap</span>
<span class="token comment">;extension=sockets</span>
<span class="token comment">;extension=sodium</span>
<span class="token comment">;extension=sqlite3</span>
<span class="token comment">;extension=tidy</span>
<span class="token comment">;extension=xmlrpc</span>
<span class="token comment">;extension=xsl</span>
<span class="token key attr-name">extension</span><span class="token punctuation">=</span><span class="token value attr-value">zip.so</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用<code>php-fpm</code>来启动</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 php-fpm.d<span class="token punctuation">]</span><span class="token comment"># /usr/local/php7/sbin/php-fpm</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 php-fpm.d<span class="token punctuation">]</span><span class="token comment"># netstat -tpln</span>
Active Internet connections <span class="token punctuation">(</span>only servers<span class="token punctuation">)</span>
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name
tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">0.0</span>.0.0:22              <span class="token number">0.0</span>.0.0:*               LISTEN      <span class="token number">706</span>/sshd
tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">127.0</span>.0.1:9000          <span class="token number">0.0</span>.0.0:*               LISTEN      <span class="token number">14896</span>/php-fpm: mast
tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">0.0</span>.0.0:111             <span class="token number">0.0</span>.0.0:*               LISTEN      <span class="token number">357</span>/rpcbind
tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">0.0</span>.0.0:80              <span class="token number">0.0</span>.0.0:*               LISTEN      <span class="token number">3295</span>/nginx: master
tcp6       <span class="token number">0</span>      <span class="token number">0</span> :::22                   :::*                    LISTEN      <span class="token number">706</span>/sshd
tcp6       <span class="token number">0</span>      <span class="token number">0</span> :::33060                :::*                    LISTEN      <span class="token number">1634</span>/mysqld
tcp6       <span class="token number">0</span>      <span class="token number">0</span> :::3306                 :::*                    LISTEN      <span class="token number">1634</span>/mysqld
tcp6       <span class="token number">0</span>      <span class="token number">0</span> :::111                  :::*                    LISTEN      <span class="token number">357</span>/rpcbind
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后我们将<code>php-fpm</code>加入到开机自启</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 php-fpm.d<span class="token punctuation">]</span><span class="token comment"># cd /usr/local/src/php-7.4.2/sapi/fpm/</span>
<span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># cp init.d.php-fpm /etc/init.d/php-fpm7</span>
<span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># chmod a+x /etc/init.d/php-fpm7</span>
<span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># chkconfig php-fpm</span>
php-fpm             php-fpm.8.in        php-fpm.conf.in     php-fpm.service.in
php-fpm.8           php-fpm.conf        php-fpm.service
<span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># chkconfig php-fpm</span>
php-fpm             php-fpm.8.in        php-fpm.conf.in     php-fpm.service.in
php-fpm.8           php-fpm.conf        php-fpm.service
<span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># chkconfig php-fpm7 on</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># ps -ef | grep php-fpm</span>
root     <span class="token number">14896</span>     <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">15</span>:59 ?        00:00:00 php-fpm: master process <span class="token punctuation">(</span>/usr/local/php7/etc/php-fpm.conf<span class="token punctuation">)</span>
nobody   <span class="token number">14897</span> <span class="token number">14896</span>  <span class="token number">0</span> <span class="token number">15</span>:59 ?        00:00:00 php-fpm: pool www
nobody   <span class="token number">14898</span> <span class="token number">14896</span>  <span class="token number">0</span> <span class="token number">15</span>:59 ?        00:00:00 php-fpm: pool www
root     <span class="token number">15035</span>  <span class="token number">3378</span>  <span class="token number">0</span> <span class="token number">16</span>:06 pts/1    00:00:00 <span class="token function">grep</span> --color<span class="token operator">=</span>auto php-fpm
<span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># kill -9 14896</span>
<span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># kill -9 14897</span>
<span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># kill -9 14898</span>
<span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># ps -ef | grep php-fpm</span>
root     <span class="token number">15037</span>  <span class="token number">3378</span>  <span class="token number">0</span> <span class="token number">16</span>:06 pts/1    00:00:00 <span class="token function">grep</span> --color<span class="token operator">=</span>auto php-fpm
<span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># service php-fpm7 restart</span>
Gracefully shutting down php-fpm warning, no pid <span class="token function">file</span> found - php-fpm is not running ?
Starting php-fpm  <span class="token keyword">done</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>查看是否进入开机启动项</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># chkconfig php-fpm7 --list</span>

Note: This output shows SysV services only and does not include native
      systemd services. SysV configuration data might be overridden by native
      systemd configuration.

      If you want to list systemd services use <span class="token string">&#39;systemctl list-unit-files&#39;</span><span class="token builtin class-name">.</span>
      To see services enabled on particular target use
      <span class="token string">&#39;systemctl list-dependencies [target]&#39;</span><span class="token builtin class-name">.</span>

php-fpm7         <span class="token number">0</span>:off  <span class="token number">1</span>:off  <span class="token number">2</span>:on  <span class="token number">3</span>:on  <span class="token number">4</span>:on  <span class="token number">5</span>:on  <span class="token number">6</span>:off

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>只要 3，4，5 是<code>on</code>即可。</p><p>然后我们还需要配置<code>nginx.conf</code>可以使用<code>php</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># vim /usr/local/nginx/conf/nginx.conf</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> ~ \.php$</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">fastcgi_pass</span>   127.0.0.1:9000</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">fastcgi_index</span>  index.php</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">fastcgi_param</span>  SCRIPT_FILENAME  <span class="token variable">$document_root</span><span class="token variable">$fastcgi_script_name</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">include</span>        fastcgi_params</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">root</span>   /home/web/</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">index</span>  index.php index.html index.htm</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>修改上述内保存之后，重启以下<code>nginx</code></p><h3 id="测试" tabindex="-1"><a class="header-anchor" href="#测试" aria-hidden="true">#</a> 测试</h3><p>简单编写一个<code>index.php</code>，加入<code>phpinfo()</code>函数</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># vim /home/web/index.php</span>
<span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># chown -R nginx.nginx /home/web/</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后再次更新它的权限，再次访问我们的虚拟机的<code>ip</code>地址就会显示对应的<code>phpinfo</code>的内容</p><p>就可以看到下面几个依赖库的内容</p><h4 id="zip" tabindex="-1"><a class="header-anchor" href="#zip" aria-hidden="true">#</a> zip</h4><table><thead><tr><th>Zip</th><th>enabled</th></tr></thead><tbody><tr><td>Zip version</td><td>1.17.1</td></tr><tr><td>Libzip headers version</td><td>1.6.1</td></tr><tr><td>Libzip library version</td><td>1.6.1</td></tr></tbody></table><h4 id="mysqli" tabindex="-1"><a class="header-anchor" href="#mysqli" aria-hidden="true">#</a> mysqli</h4><table><thead><tr><th>MysqlI Support</th><th>enabled</th></tr></thead><tbody><tr><td>Client API library version</td><td>mysqlnd 7.4.2</td></tr><tr><td>Active Persistent Links</td><td>0</td></tr><tr><td>Inactive Persistent Links</td><td>0</td></tr><tr><td>Active Links</td><td>0</td></tr></tbody></table><h4 id="pdo-mysql" tabindex="-1"><a class="header-anchor" href="#pdo-mysql" aria-hidden="true">#</a> pdo_mysql</h4><table><thead><tr><th>PDO Driver for MySQL</th><th>enabled</th></tr></thead><tbody><tr><td>Client API version</td><td>mysqlnd 7.4.2</td></tr></tbody></table><p>我们还要设置以下安装<code>nginx</code>的时候设置的<code>home/web/php7</code>目录下的一个<code>php7.conf</code></p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> ~ \.php$</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">fastcgi_pass</span>   127.0.0.1:9000</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">fastcgi_index</span>  index.php</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">fastcgi_param</span>  SCRIPT_FILENAME  <span class="token variable">$document_root</span><span class="token variable">$fastcgi_script_name</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">include</span>        fastcgi_params</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>也加上上述内容即可。</p><p>完整内容</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
        <span class="token comment"># 监听端口号</span>
        <span class="token directive"><span class="token keyword">listen</span> <span class="token number">80</span></span><span class="token punctuation">;</span>
        <span class="token comment"># 域名</span>
        <span class="token directive"><span class="token keyword">server_name</span> www.php7.tt</span><span class="token punctuation">;</span>
        <span class="token comment"># 网站目录</span>
        <span class="token directive"><span class="token keyword">root</span> /home/web/php7/</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">location</span> /</span><span class="token punctuation">{</span>
                <span class="token directive"><span class="token keyword">ssi</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
                <span class="token directive"><span class="token keyword">ssi_silent_errors</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
                <span class="token directive"><span class="token keyword">index</span> index.php index.html index.htm</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token directive"><span class="token keyword">location</span> ~ \.php$</span> <span class="token punctuation">{</span>
                <span class="token directive"><span class="token keyword">fastcgi_pass</span>   127.0.0.1:9000</span><span class="token punctuation">;</span>
                <span class="token directive"><span class="token keyword">fastcgi_index</span>  index.php</span><span class="token punctuation">;</span>
                <span class="token directive"><span class="token keyword">fastcgi_param</span>  SCRIPT_FILENAME  <span class="token variable">$document_root</span><span class="token variable">$fastcgi_script_name</span></span><span class="token punctuation">;</span>
                 <span class="token directive"><span class="token keyword">include</span>        fastcgi_params</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token directive"><span class="token keyword">access_log</span> /usr/local/nginx/logs/php7_access.log</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">error_log</span> /usr/local/nginx/logs/php7_error.log</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后接着还是要重启以下<code>nginx</code></p><p>对应也对<code>php7</code>目录下新增一个<code>index.php</code>加入<code>phpinfo()</code>函数来测试以下是否成功。</p><h2 id="php7-4-性能调优" tabindex="-1"><a class="header-anchor" href="#php7-4-性能调优" aria-hidden="true">#</a> PHP7.4 性能调优</h2><p>给<code>php-fpm</code>添加日志文件目录</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 nginx<span class="token punctuation">]</span><span class="token comment"># mkdir -p /usr/local/php7/log</span>
<span class="token punctuation">[</span>root@10 nginx<span class="token punctuation">]</span><span class="token comment"># chown -R nginx.nginx /usr/local/php7/</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后编辑</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#性能调优</span>
<span class="token function">vim</span> /usr/local/php7/etc/php-fpm.conf

<span class="token comment"># 将以下内容注释去掉</span>
pid <span class="token operator">=</span> run/php-fpm.pid
error_log <span class="token operator">=</span> log/php-fpm.log
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">vim</span> /usr/local/php7/etc/php-fpm.d/www.conf

<span class="token comment"># 将下面内容进行替换为nginx用户</span>
user <span class="token operator">=</span> nginx
group <span class="token operator">=</span> nginx

<span class="token comment"># 如果 listen 监听的是9000那就不用管  暂时保存，下面还要设置内容</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 nginx<span class="token punctuation">]</span><span class="token comment"># ps -ef | grep php-fpm</span>
root     <span class="token number">15049</span>     <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">16</span>:06 ?        00:00:00 php-fpm: master process <span class="token punctuation">(</span>/usr/local/php7/etc/php-fpm.conf<span class="token punctuation">)</span>
nobody   <span class="token number">15050</span> <span class="token number">15049</span>  <span class="token number">0</span> <span class="token number">16</span>:06 ?        00:00:00 php-fpm: pool www
nobody   <span class="token number">15051</span> <span class="token number">15049</span>  <span class="token number">0</span> <span class="token number">16</span>:06 ?        00:00:00 php-fpm: pool www

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以看到这边还是<code>nobody</code>，我们需要重启以下<code>php-fpm7</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 nginx<span class="token punctuation">]</span><span class="token comment"># service php-fpm7 restart</span>
Gracefully shutting down php-fpm <span class="token builtin class-name">.</span> <span class="token keyword">done</span>
Starting php-fpm  <span class="token keyword">done</span>
<span class="token punctuation">[</span>root@10 nginx<span class="token punctuation">]</span><span class="token comment"># ps -ef | grep php-fpm</span>
root     <span class="token number">15428</span>  <span class="token number">3378</span>  <span class="token number">0</span> <span class="token number">16</span>:26 pts/1    00:00:00 <span class="token function">vim</span> /usr/local/php7/etc/php-fpm.d/www.conf
root     <span class="token number">15455</span>     <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">16</span>:28 ?        00:00:00 php-fpm: master process <span class="token punctuation">(</span>/usr/local/php7/etc/php-fpm.conf<span class="token punctuation">)</span>
nginx    <span class="token number">15456</span> <span class="token number">15455</span>  <span class="token number">0</span> <span class="token number">16</span>:28 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15457</span> <span class="token number">15455</span>  <span class="token number">0</span> <span class="token number">16</span>:28 ?        00:00:00 php-fpm: pool www

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><p>继续配置<code>vim /usr/local/php7/etc/php-fpm.d/www.conf</code></p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">pm</span> = dynamic</span><span class="token punctuation">;</span> <span class="token comment"># 表示使用哪种进程数量管理方式</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><p><code>dynamic</code>表示<code>php-fpm</code>进程数是动态的，最开始是<code>pms.start_servers</code>指定的数量，如果请求较多 ，则会自动增加，保证空闲的进程数不小于<code>pm.min_spare_servers</code>，如果进程数较多，也会进行相应清理，保证多余的进程数不多于<code>pm.max_spare_servers</code></p></li><li><p><code>static</code>表示<code>php-fpm</code>进程数是静态的, 进程数自始至终都是<code>pm.max_children</code>指定的数量，不再增加或减少</p></li></ul><p>此时<code>pm.max_children = 5</code>，我们可以先修改<code>pm</code>为<code>static</code>，重启<code>php-fpm7</code>来查看启动了多少个进程</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 nginx<span class="token punctuation">]</span><span class="token comment"># service php-fpm7 restart</span>
Gracefully shutting down php-fpm <span class="token builtin class-name">.</span> <span class="token keyword">done</span>
Starting php-fpm  <span class="token keyword">done</span>
<span class="token punctuation">[</span>root@10 nginx<span class="token punctuation">]</span><span class="token comment"># ps -ef | grep php-fpm</span>
root     <span class="token number">15428</span>  <span class="token number">3378</span>  <span class="token number">0</span> <span class="token number">16</span>:26 pts/1    00:00:00 <span class="token function">vim</span> /usr/local/php7/etc/php-fpm.d/www.conf
root     <span class="token number">15475</span>     <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">16</span>:31 ?        00:00:00 php-fpm: master process <span class="token punctuation">(</span>/usr/local/php7/etc/php-fpm.conf<span class="token punctuation">)</span>
nginx    <span class="token number">15476</span> <span class="token number">15475</span>  <span class="token number">0</span> <span class="token number">16</span>:31 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15477</span> <span class="token number">15475</span>  <span class="token number">0</span> <span class="token number">16</span>:31 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15478</span> <span class="token number">15475</span>  <span class="token number">0</span> <span class="token number">16</span>:31 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15479</span> <span class="token number">15475</span>  <span class="token number">0</span> <span class="token number">16</span>:31 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15480</span> <span class="token number">15475</span>  <span class="token number">0</span> <span class="token number">16</span>:31 ?        00:00:00 php-fpm: pool www
root     <span class="token number">15482</span> <span class="token number">29045</span>  <span class="token number">0</span> <span class="token number">16</span>:31 pts/0    00:00:00 <span class="token function">grep</span> --color<span class="token operator">=</span>auto php-fpm

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>所以<code>pm.max_children</code>这个参数只对静态模式下起作用。 静态模式下，我们最好设置为 100 个。</p></blockquote><p>我们最后还是改回动态模式，动态模式可以动态节省资源</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token punctuation">;</span> <span class="token directive"><span class="token keyword">The</span> number of child processes created <span class="token boolean">on</span> startup.</span>
<span class="token punctuation">;</span> <span class="token directive"><span class="token keyword">Note:</span> Used only when pm is set to <span class="token string">&#39;dynamic&#39;</span></span>
<span class="token punctuation">;</span> <span class="token directive"><span class="token keyword">Default</span> Value: (min_spare_servers + max_spare_servers) / <span class="token number">2</span>
pm.start_servers = <span class="token number">10</span></span>

<span class="token punctuation">;</span> <span class="token directive"><span class="token keyword">The</span> desired minimum number of idle server processes.</span>
<span class="token punctuation">;</span> <span class="token directive"><span class="token keyword">Note:</span> Used only when pm is set to <span class="token string">&#39;dynamic&#39;</span></span>
<span class="token punctuation">;</span> <span class="token directive"><span class="token keyword">Note:</span> Mandatory when pm is set to <span class="token string">&#39;dynamic&#39;</span>
pm.min_spare_servers = <span class="token number">5</span></span>

<span class="token punctuation">;</span> <span class="token directive"><span class="token keyword">The</span> desired maximum number of idle server processes.</span>
<span class="token punctuation">;</span> <span class="token directive"><span class="token keyword">Note:</span> Used only when pm is set to <span class="token string">&#39;dynamic&#39;</span></span>
<span class="token punctuation">;</span> Note: Mandatory when pm is set to &#39;dynamic&#39;
pm.max_spare_servers = 35

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>重启后观察效果</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 nginx<span class="token punctuation">]</span><span class="token comment"># ps -ef | grep php-fpm</span>
root     <span class="token number">15428</span>  <span class="token number">3378</span>  <span class="token number">0</span> <span class="token number">16</span>:26 pts/1    00:00:00 <span class="token function">vim</span> /usr/local/php7/etc/php-fpm.d/www.conf
root     <span class="token number">15652</span>     <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">16</span>:40 ?        00:00:00 php-fpm: master process <span class="token punctuation">(</span>/usr/local/php7/etc/php-fpm.conf<span class="token punctuation">)</span>
nginx    <span class="token number">15653</span> <span class="token number">15652</span>  <span class="token number">0</span> <span class="token number">16</span>:40 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15654</span> <span class="token number">15652</span>  <span class="token number">0</span> <span class="token number">16</span>:40 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15655</span> <span class="token number">15652</span>  <span class="token number">0</span> <span class="token number">16</span>:40 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15656</span> <span class="token number">15652</span>  <span class="token number">0</span> <span class="token number">16</span>:40 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15657</span> <span class="token number">15652</span>  <span class="token number">0</span> <span class="token number">16</span>:40 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15658</span> <span class="token number">15652</span>  <span class="token number">0</span> <span class="token number">16</span>:40 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15659</span> <span class="token number">15652</span>  <span class="token number">0</span> <span class="token number">16</span>:40 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15660</span> <span class="token number">15652</span>  <span class="token number">0</span> <span class="token number">16</span>:40 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15661</span> <span class="token number">15652</span>  <span class="token number">0</span> <span class="token number">16</span>:40 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15662</span> <span class="token number">15652</span>  <span class="token number">0</span> <span class="token number">16</span>:40 ?        00:00:00 php-fpm: pool www
root     <span class="token number">15664</span> <span class="token number">29045</span>  <span class="token number">0</span> <span class="token number">16</span>:40 pts/0    00:00:00 <span class="token function">grep</span> --color<span class="token operator">=</span>auto php-fpm

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们最后给<code>pm.start_servers = 20</code>设置为 20 个</p><hr><blockquote><p><code>pm.max_requests</code>是发送多少个请求后会重启该线程，我们需要适当降低这个值，用以让<code>php-fpm</code>自动的释放内存</p></blockquote><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token punctuation">;</span> <span class="token directive"><span class="token keyword">The</span> number of requests each child process should execute before respawning.</span>
<span class="token punctuation">;</span> <span class="token directive"><span class="token keyword">This</span> can be useful to work around memory leaks in <span class="token number">3rd</span> party libraries. For</span>
<span class="token punctuation">;</span> <span class="token directive"><span class="token keyword">endless</span> request processing specify <span class="token string">&#39;0&#39;</span>. Equivalent to PHP_FCGI_MAX_REQUESTS.</span>
<span class="token punctuation">;</span> Default Value: 0
pm.max_requests = 10240
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><p>开启慢查询</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code>slowlog = log/$pool.log.slow
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>设置超时时间 2 秒钟</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code>request_slowlog_timeout = 2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>设置最大执行时间</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code>request_terminate_timeout = 30
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>在<code>php.ini</code>中也可以进行配置(<code>max_execution_time</code>)</p><p>增加<code>php-fpm</code>打开文件描述符的限制</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code>rlimit_files = 65535
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="关于-opache-的一些配置" tabindex="-1"><a class="header-anchor" href="#关于-opache-的一些配置" aria-hidden="true">#</a> 关于 opache 的一些配置</h2><blockquote><p>测试环境或者开发环境不建议开，线上环境可以开</p></blockquote><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">zend_extension=opcache.so</span></span>
<span class="token punctuation">;</span>开启opcache
<span class="token directive"><span class="token keyword">opcache.enable=1</span></span>

<span class="token punctuation">;</span>CLI环境下，PHP启用OPcache
<span class="token directive"><span class="token keyword">opcache.enable_cli=1</span></span>

<span class="token punctuation">;</span>OPcache共享内存存储大小,单位MB
<span class="token directive"><span class="token keyword">opcache.memory_consumption=128</span></span>

<span class="token punctuation">;</span>PHP使用了一种叫做字符串驻留（string <span class="token directive"><span class="token keyword">interning）的技术来改善性能。例如，如果你在代码中使用了1000次字符串“foobar”，在PHP内部只会在第一使用这个字符串的时候分配一个不可变的内存区域来存储这个字符串，其他的999次使用都会直接指向这个内存区域。这个选项则会把这个特性提升一个层次——默认情况下这个不可变的内存区域只会存在于单个php-fpm的进程中，如果设置了这个选项，那么它将会在所有的php-fpm进程中共享。在比较大的应用中，这可以非常有效地节约内存，提高应用的性能。</span>
这个选项的值是以兆字节（megabytes）作为单位，如果把它设置为16，则表示16MB，默认是4MB
opcache.interned_strings_buffer=8</span>

<span class="token punctuation">;</span>这个选项用于控制内存中最多可以缓存多少个PHP文件。这个选项必须得设置得足够大，大于你的项目中的所有PHP文件的总和。
设置值取值范围最小值是 <span class="token directive"><span class="token keyword">200，最大值在</span> PHP 5.5.6 之前是 100000，PHP 5.5.6 及之后是 1000000。也就是说在200到1000000之间。
opcache.max_accelerated_files=10000</span>

<span class="token punctuation">;</span>设置缓存的过期时间（单位是秒）,为0的话每次都要检查
<span class="token directive"><span class="token keyword">opcache.revalidate_freq=60</span></span>

<span class="token punctuation">;</span>从字面上理解就是“允许更快速关闭”。它的作用是在单个请求结束时提供一种更快速的机制来调用代码中的析构器，从而加快PHP的响应速度和PHP进程资源的回收速度，这样应用程序可以更快速地响应下一个请求。把它设置为1就可以使用这个机制了。
<span class="token directive"><span class="token keyword">opcache.fast_shutdown=1</span></span>

<span class="token punctuation">;</span>如果启用（设置为1），OPcache会在opcache.revalidate_freq设置的秒数去检测文件的时间戳（timestamp）检查脚本是否更新。
如果这个选项被禁用（设置为0），opcache.revalidate_freq会被忽略，PHP文件永远不会被检查。这意味着如果你修改了你的代码，然后你把它更新到服务器上，再在浏览器上请求更新的代码对应的功能，你会看不到更新的效果
强烈建议你在生产环境中设置为0，更新代码后，再平滑重启PHP和web服务器。
<span class="token directive"><span class="token keyword">opcache.validate_timestamps=0</span></span>

<span class="token punctuation">;</span>开启Opcache File Cache(实验性), 通过开启这个, 我们可以让Opcache把opcode缓存缓存到外部文件中, 对于一些脚本, 会有很明显的性能提升.
这样PHP就会在/tmp目录下Cache一些Opcode的二进制导出文件, 可以跨PHP生命周期存在.
opcache.file_cache=/tmp
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="thinkphp-开启二级域名" tabindex="-1"><a class="header-anchor" href="#thinkphp-开启二级域名" aria-hidden="true">#</a> ThinkPHP 开启二级域名</h2><p>在<code>nginx</code>对应的设置的<code>php的项目的conf</code>文件加上</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">if</span> (!-e <span class="token variable">$request_filename</span>)</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">rewrite</span>  ^(.*)$  /index.php?s=<span class="token variable">$1</span>  last</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">break</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>开启二级域名</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> /youdomain/</span> <span class="token punctuation">{</span>
  <span class="token directive"><span class="token keyword">if</span> (!-e <span class="token variable">$request_filename</span>)</span><span class="token punctuation">{</span>
       <span class="token directive"><span class="token keyword">rewrite</span>  ^/youdomain/(.*)$  /youdomain/index.php?s=<span class="token variable">$1</span>  last</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>完整内容</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
  <span class="token comment"># 监听端口号</span>
  <span class="token directive"><span class="token keyword">listen</span> <span class="token number">80</span></span><span class="token punctuation">;</span>
  <span class="token comment"># 域名</span>
  <span class="token directive"><span class="token keyword">server_name</span> www.php7.tt</span><span class="token punctuation">;</span>
  <span class="token comment"># 网站目录</span>
  <span class="token directive"><span class="token keyword">root</span> /home/web/php7/</span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">location</span> /</span><span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">ssi</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">ssi_silent_errors</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">index</span> index.php index.html index.htm</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token directive"><span class="token keyword">location</span> ~ \.php$</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">fastcgi_pass</span>   127.0.0.1:9000</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">fastcgi_index</span>  index.php</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">fastcgi_param</span>  SCRIPT_FILENAME  <span class="token variable">$document_root</span><span class="token variable">$fastcgi_script_name</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">include</span>        fastcgi_params</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment"># nginx 开启rewrite</span>
  <span class="token directive"><span class="token keyword">if</span> (!-e <span class="token variable">$request_filename</span>)</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">rewrite</span>  ^(.*)$  /index.php?s=<span class="token variable">$1</span>  last</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">break</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment"># nginx开启二级域名</span>
  <span class="token directive"><span class="token keyword">location</span> /youdomain/</span> <span class="token punctuation">{</span>
      <span class="token directive"><span class="token keyword">if</span> (!-e <span class="token variable">$request_filename</span>)</span><span class="token punctuation">{</span>
             <span class="token directive"><span class="token keyword">rewrite</span>  ^/youdomain/(.*)$  /youdomain/index.php?s=<span class="token variable">$1</span>  last</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token directive"><span class="token keyword">access_log</span> /usr/local/nginx/logs/php7_access.log</span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">error_log</span> /usr/local/nginx/logs/php7_error.log</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>或者在<code>ThinkPHP</code>的<code>public</code>目录下的<code>htaccess.conf</code>文件里设置</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token comment">#开启压缩</span>
<span class="token directive"><span class="token keyword">gzip</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">gzip_buffers</span> <span class="token number">32</span> <span class="token number">4K</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">gzip_comp_level</span> <span class="token number">6</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">gzip_min_length</span> <span class="token number">200</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">gzip_types</span> text/css  application/x-javascript</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">gzip_vary</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">if</span> (!-e <span class="token variable">$request_filename</span>)</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">rewrite</span>  ^(.*)$  /index.php?s=<span class="token variable">$1</span>  last</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">break</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token directive"><span class="token keyword">location</span> /youdomain/</span> <span class="token punctuation">{</span>
  <span class="token directive"><span class="token keyword">if</span> (!-e <span class="token variable">$request_filename</span>)</span><span class="token punctuation">{</span>
       <span class="token directive"><span class="token keyword">rewrite</span>  ^/youdomain/(.*)$  /youdomain/index.php?s=<span class="token variable">$1</span>  last</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
    <span class="token comment">#设置缓存</span>
    <span class="token directive"><span class="token keyword">location</span> ~ .*\.(gif|jpg|jpeg|png|bmp|swf)$</span>
    <span class="token punctuation">{</span>
      <span class="token directive"><span class="token keyword">expires</span>      <span class="token number">30d</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token directive"><span class="token keyword">location</span> ~ .*\.(js|css)?$</span>
    <span class="token punctuation">{</span>
      <span class="token directive"><span class="token keyword">expires</span>      <span class="token number">1h</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="调整-php7-4-配置的一些内容" tabindex="-1"><a class="header-anchor" href="#调整-php7-4-配置的一些内容" aria-hidden="true">#</a> 调整 PHP7.4 配置的一些内容</h2><h3 id="pdo-mysql-1" tabindex="-1"><a class="header-anchor" href="#pdo-mysql-1" aria-hidden="true">#</a> pdo_mysql</h3><table><thead><tr><th>PDO Driver for MySQL</th><th>enabled</th></tr></thead><tbody><tr><td>Client API version</td><td>mysqlnd 7.4.2</td></tr></tbody></table><table><thead><tr><th>Directive</th><th>Local Value</th><th>Master Value</th></tr></thead><tbody><tr><td>pdo_mysql.default_socket</td><td>/tmp/mysql.sock</td><td>/tmp/mysql.sock</td></tr></tbody></table><p>可以看到它的<code>socket</code>文件是在<code>/tmp/mysql.sock</code>下，我们需要配置以下<code>php.ini</code>里的存储位置</p><p>修改<code>php.ini</code></p><div class="language-ini ext-ini line-numbers-mode"><pre class="language-ini"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Pdo_mysql</span><span class="token punctuation">]</span></span>
<span class="token comment">; Default socket name for local MySQL connects.  If empty, uses the built-in</span>
<span class="token comment">; MySQL defaults.</span>
<span class="token key attr-name">pdo_mysql.default_socket</span><span class="token punctuation">=</span><span class="token value attr-value">/usr/local/mysql/tmp/mysql.sock</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后重启<code>php-fpm7</code></p><h2 id="php7-4-安装-swoole-扩展" tabindex="-1"><a class="header-anchor" href="#php7-4-安装-swoole-扩展" aria-hidden="true">#</a> PHP7.4 安装 swoole 扩展</h2><p>这里 swoole 的版本我选的是<code>4.4.15</code>，反正只要是<code>x86</code>架构的 LInux 环境下安装，一般都没啥毛病了。</p><p>还是老样子，下载源码包上传到<code>/usr/local/src</code>目录下并解压</p><p>然后使用<code>phpize</code>打包</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 swoole-4.4.15<span class="token punctuation">]</span><span class="token comment"># /usr/local/php7/bin/phpize</span>
Configuring for:
PHP Api Version:         <span class="token number">20190902</span>
Zend Module Api No:      <span class="token number">20190902</span>
Zend Extension Api No:   <span class="token number">320190902</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 swoole-4.4.15<span class="token punctuation">]</span><span class="token comment"># ./configure --enable-openssl --enable-http2 --enable-sockets --enable-mysqlnd --with-php-config=/usr/local/php7/bin/php-config</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>然后就是编译安装</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>安装完了，我们可以选择<code>make test</code>一下看看。</p><p>然后就是将<code>swoole.so</code>扩展加入到<code>php.ini</code>文件中</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code> <span class="token punctuation">[</span>root@10 swoole-4.4.15<span class="token punctuation">]</span><span class="token comment"># vim /usr/local/php7/etc/php.ini</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-ini ext-ini line-numbers-mode"><pre class="language-ini"><code><span class="token comment"># 我们可与i找到 zip.so 在下面添加一下即可</span>

<span class="token key attr-name">extension</span><span class="token punctuation">=</span><span class="token value attr-value">swoole.so</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>检测</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 swoole-4.4.15<span class="token punctuation">]</span><span class="token comment"># /usr/local/php7/bin/php --ri swoole</span>


swoole

Swoole <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
Author <span class="token operator">=</span><span class="token operator">&gt;</span> Swoole Team <span class="token operator">&lt;</span>team@swoole.com<span class="token operator">&gt;</span>
Version <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">4.4</span>.15
Built <span class="token operator">=</span><span class="token operator">&gt;</span> Aug <span class="token number">14</span> <span class="token number">2022</span> <span class="token number">18</span>:15:59
coroutine <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
epoll <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
eventfd <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
signalfd <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
cpu_affinity <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
spinlock <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
rwlock <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
sockets <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
openssl <span class="token operator">=</span><span class="token operator">&gt;</span> OpenSSL <span class="token number">1.0</span>.2k-fips  <span class="token number">26</span> Jan <span class="token number">2017</span>
http2 <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
pcre <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
zlib <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">1.2</span>.7
mutex_timedlock <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
pthread_barrier <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
futex <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
mysqlnd <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
async_redis <span class="token operator">=</span><span class="token operator">&gt;</span> enabled

Directive <span class="token operator">=</span><span class="token operator">&gt;</span> Local Value <span class="token operator">=</span><span class="token operator">&gt;</span> Master Value
swoole.enable_coroutine <span class="token operator">=</span><span class="token operator">&gt;</span> On <span class="token operator">=</span><span class="token operator">&gt;</span> On
swoole.enable_library <span class="token operator">=</span><span class="token operator">&gt;</span> On <span class="token operator">=</span><span class="token operator">&gt;</span> On
swoole.enable_preemptive_scheduler <span class="token operator">=</span><span class="token operator">&gt;</span> Off <span class="token operator">=</span><span class="token operator">&gt;</span> Off
swoole.display_errors <span class="token operator">=</span><span class="token operator">&gt;</span> On <span class="token operator">=</span><span class="token operator">&gt;</span> On
swoole.use_shortname <span class="token operator">=</span><span class="token operator">&gt;</span> On <span class="token operator">=</span><span class="token operator">&gt;</span> On
swoole.unixsock_buffer_size <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">8388608</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">8388608</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="安装-composer" tabindex="-1"><a class="header-anchor" href="#安装-composer" aria-hidden="true">#</a> 安装 composer</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 src<span class="token punctuation">]</span><span class="token comment"># curl -sS https://getcomposer.org/installer | /usr/local/php7/bin/php</span>
All settings correct <span class="token keyword">for</span> using Composer
Downloading<span class="token punctuation">..</span>.

Composer <span class="token punctuation">(</span>version <span class="token number">2.3</span>.10<span class="token punctuation">)</span> successfully installed to: /usr/local/src/composer.phar
Use it: php composer.phar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>移动到<code>/usr/local/bin</code>下，并为<code>php7</code>添加软链接</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 src<span class="token punctuation">]</span><span class="token comment"># mv composer.phar /usr/local/bin/composer</span>
<span class="token punctuation">[</span>root@10 src<span class="token punctuation">]</span><span class="token comment"># ln -s /usr/local/php7/bin/php /usr/local/bin/php</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>配置阿里云镜像</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">composer</span> config -g repo.packagist <span class="token function">composer</span> https://mirrors.aliyun.com/composer/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>如果有安装一些<code>swoole</code>框架，可能会需要开放<code>9501</code>端口或别的端口</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>firewall-cmd --zone<span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">9501</span>/tcp --permanent
systemctl restart firewalld.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/sword-demon/sword-demon.github.io/edit/main/docs/views/deploy/linux-install-php-swoole.md" rel="noopener noreferrer" target="_blank" aria-label="编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">上次编辑于: </span><span class="info">2022/8/14 13:07:44</span></div><div class="meta-item contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: 1418667580@qq.com">wxvirus</span><!--]--><!--]--></div></footer><nav class="page-nav"><a href="/views/deploy/linux-install-nginx.html" class="nav-link prev" aria-label="Linux安装Nginx和配置"><div class="hint"><span class="arrow left"></span>上一页</div><div class="link"><!---->Linux安装Nginx和配置</div></a><!----></nav><div class="giscus-wrapper input-top" style="display:block;"><div style="text-align:center">Loading...</div></div><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">无解的游戏</div><div class="copyright">Copyright © 2022 wxvirus</div></footer><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app.03a58151.js" defer></script>
  </body>
</html>
