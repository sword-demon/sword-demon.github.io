import{_ as n}from"./plugin-vue_export-helper.21dcd24c.js";import{o as s,c as a,e}from"./app.6934a89b.js";const t={},p=e(`<h1 id="docker-\u90E8\u7F72-mysql-\u96C6\u7FA4" tabindex="-1"><a class="header-anchor" href="#docker-\u90E8\u7F72-mysql-\u96C6\u7FA4" aria-hidden="true">#</a> Docker \u90E8\u7F72 MySQL \u96C6\u7FA4</h1><h2 id="\u62C9\u53D6\u955C\u50CF" tabindex="-1"><a class="header-anchor" href="#\u62C9\u53D6\u955C\u50CF" aria-hidden="true">#</a> \u62C9\u53D6\u955C\u50CF</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> pull mysql:8.0.23
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="\u8BBE\u7F6E\u5F00\u653E\u7AEF\u53E3" tabindex="-1"><a class="header-anchor" href="#\u8BBE\u7F6E\u5F00\u653E\u7AEF\u53E3" aria-hidden="true">#</a> \u8BBE\u7F6E\u5F00\u653E\u7AEF\u53E3</h2><p>\u901A\u5E38\u90FD\u662F 3306 \u7684\uFF0C\u6211\u4EEC\u5982\u679C\u8BBE\u7F6E\u96C6\u7FA4\uFF0C\u5C31\u53EF\u4EE5\u968F\u610F\u4E00\u70B9\uFF0C\u6BD4\u5982\u4E94\u4E2A\u8282\u70B9\uFF0C\u5206\u522B\u4E3A</p><ul><li>12001</li><li>12002</li><li>12003</li><li>12004</li><li>12005</li></ul><h2 id="\u521B\u5EFA-5-\u4E2A-mysql-\u8282\u70B9" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA-5-\u4E2A-mysql-\u8282\u70B9" aria-hidden="true">#</a> \u521B\u5EFA 5 \u4E2A MySQL \u8282\u70B9</h2><p>\u4E3A\u4E86\u7ED9 Docker \u4E2D\u5BB9\u5668\u5206\u914D\u56FA\u5B9A\u7684 Docker \u5185\u7F51 IP \u5730\u5740\uFF0C\u800C\u4E14\u8FD8\u8DDF\u5176\u4ED6\u7684\u73B0\u5728\u6709\u7684\u5BB9\u5668 IP \u4E0D\u51B2\u7A81\uFF0C\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684 Docker \u5185\u7F51\u7684\u7F51\u6BB5\uFF0C\u7F51\u7EDC\u540D\u79F0\u968F\u610F\uFF0C\u7F51\u6BB5\u662F<code>172.17.0.X</code>\uFF0C<strong>\u6CE8\u610F\uFF1A172.17.0.1 \u662F\u7F51\u5173\u7684 IP\uFF0C\u4E0D\u80FD\u4F7F\u7528\u3002</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> network create --subnet<span class="token operator">=</span><span class="token number">172.18</span>.0.0/18 mynet
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u521B\u5EFA\u5BB9\u5668</p><p><code>lower_case_table_names</code>\uFF1A\u4E0D\u533A\u5206\u8868\u540D\u5927\u5C0F\u5199</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run -it -d --name mysql_1 -p <span class="token number">12001</span>:3306 <span class="token punctuation">\\</span>
--net mynet --ip <span class="token number">172.18</span>.0.2 <span class="token punctuation">\\</span>
-m 400m -v /root/mysql_1/data:/var/lib/mysql <span class="token punctuation">\\</span>
-v /root/mysql_1/config:/etc/mysql/conf.d <span class="token punctuation">\\</span>
-e <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span>abc123456 <span class="token punctuation">\\</span>
-e <span class="token assign-left variable">TZ</span><span class="token operator">=</span>Asia/Shanghai --privileged<span class="token operator">=</span>true <span class="token punctuation">\\</span>
mysql:8.0.23 <span class="token punctuation">\\</span>
--lower_case_table_names<span class="token operator">=</span><span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7B49\u4E2A\u95F4\u9694 10s \u518D\u6267\u884C\u4E0B\u4E00\u6B21\u7684</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run -it -d --name mysql_2 -p <span class="token number">12002</span>:3306 <span class="token punctuation">\\</span>
--net mynet --ip <span class="token number">172.18</span>.0.3 <span class="token punctuation">\\</span>
-m 400m -v /root/mysql_2/data:/var/lib/mysql <span class="token punctuation">\\</span>
-v /root/mysql_2/config:/etc/mysql/conf.d <span class="token punctuation">\\</span>
-e <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span>abc123456 <span class="token punctuation">\\</span>
-e <span class="token assign-left variable">TZ</span><span class="token operator">=</span>Asia/Shanghai --privileged<span class="token operator">=</span>true <span class="token punctuation">\\</span>
mysql:8.0.23 <span class="token punctuation">\\</span>
--lower_case_table_names<span class="token operator">=</span><span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run -it -d --name mysql_3 -p <span class="token number">12003</span>:3306 <span class="token punctuation">\\</span>
--net mynet --ip <span class="token number">172.18</span>.0.4 <span class="token punctuation">\\</span>
-m 400m -v /root/mysql_3/data:/var/lib/mysql <span class="token punctuation">\\</span>
-v /root/mysql_3/config:/etc/mysql/conf.d <span class="token punctuation">\\</span>
-e <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span>abc123456 <span class="token punctuation">\\</span>
-e <span class="token assign-left variable">TZ</span><span class="token operator">=</span>Asia/Shanghai --privileged<span class="token operator">=</span>true <span class="token punctuation">\\</span>
mysql:8.0.23 <span class="token punctuation">\\</span>
--lower_case_table_names<span class="token operator">=</span><span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run -it -d --name mysql_4 -p <span class="token number">12004</span>:3306 <span class="token punctuation">\\</span>
--net mynet --ip <span class="token number">172.18</span>.0.5 <span class="token punctuation">\\</span>
-m 400m -v /root/mysql_4/data:/var/lib/mysql <span class="token punctuation">\\</span>
-v /root/mysql_4/config:/etc/mysql/conf.d <span class="token punctuation">\\</span>
-e <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span>abc123456 <span class="token punctuation">\\</span>
-e <span class="token assign-left variable">TZ</span><span class="token operator">=</span>Asia/Shanghai --privileged<span class="token operator">=</span>true <span class="token punctuation">\\</span>
mysql:8.0.23 <span class="token punctuation">\\</span>
--lower_case_table_names<span class="token operator">=</span><span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6700\u597D\u95F4\u9694\u4E2A 10s \u518D\u6267\u884C\u4E0B\u4E00\u6B21\uFF0C\u5426\u5219\u5BB9\u6613\u51FA\u73B0\u5D29\u6E83\u95EE\u9898\u3002</p><p>\u7B2C\u4E94\u4E2A\u5BB9\u5668\u7ED9\u4E8B\u52A1\u4E2D\u95F4\u4EF6\u4F7F\u7528\uFF0C\u5E76\u4E0D\u5B58\u50A8\u4E1A\u52A1\u6570\u636E</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run -it -d --name mysql_5 -p <span class="token number">12005</span>:3306 <span class="token punctuation">\\</span>
--net mynet --ip <span class="token number">172.18</span>.0.6 <span class="token punctuation">\\</span>
-m 400m -v /root/mysql_5/data:/var/lib/mysql <span class="token punctuation">\\</span>
-v /root/mysql_5/config:/etc/mysql/conf.d <span class="token punctuation">\\</span>
-e <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span>abc123456 <span class="token punctuation">\\</span>
-e <span class="token assign-left variable">TZ</span><span class="token operator">=</span>Asia/Shanghai --privileged<span class="token operator">=</span>true <span class="token punctuation">\\</span>
mysql:8.0.23 <span class="token punctuation">\\</span>
--lower_case_table_names<span class="token operator">=</span><span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container danger"><p class="custom-container-title">\u8E29\u5751</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">2020</span>-08-10T08:24:49.653807Z <span class="token number">0</span> <span class="token punctuation">[</span>System<span class="token punctuation">]</span> <span class="token punctuation">[</span>MY-013169<span class="token punctuation">]</span> <span class="token punctuation">[</span>Server<span class="token punctuation">]</span> /usr/sbin/mysqld <span class="token punctuation">(</span>mysqld <span class="token number">8.0</span>.21<span class="token punctuation">)</span> initializing of server <span class="token keyword">in</span> progress as process <span class="token number">44</span>
<span class="token number">2020</span>-08-10T08:24:49.664010Z <span class="token number">1</span> <span class="token punctuation">[</span>System<span class="token punctuation">]</span> <span class="token punctuation">[</span>MY-013576<span class="token punctuation">]</span> <span class="token punctuation">[</span>InnoDB<span class="token punctuation">]</span> InnoDB initialization has started.
<span class="token number">2020</span>-08-10T08:24:52.877117Z <span class="token number">1</span> <span class="token punctuation">[</span>System<span class="token punctuation">]</span> <span class="token punctuation">[</span>MY-013577<span class="token punctuation">]</span> <span class="token punctuation">[</span>InnoDB<span class="token punctuation">]</span> InnoDB initialization has ended.
<span class="token number">2020</span>-08-10T08:24:57.629900Z <span class="token number">6</span> <span class="token punctuation">[</span>Warning<span class="token punctuation">]</span> <span class="token punctuation">[</span>MY-010453<span class="token punctuation">]</span> <span class="token punctuation">[</span>Server<span class="token punctuation">]</span> root@localhost is created with an empty password <span class="token operator">!</span> Please consider switching off the --initialize-insecure option.
<span class="token number">2020</span>-08-10T08:25:03.057763Z <span class="token number">0</span> <span class="token punctuation">[</span>System<span class="token punctuation">]</span> <span class="token punctuation">[</span>MY-010116<span class="token punctuation">]</span> <span class="token punctuation">[</span>Server<span class="token punctuation">]</span> /usr/sbin/mysqld <span class="token punctuation">(</span>mysqld <span class="token number">8.0</span>.21<span class="token punctuation">)</span> starting as process <span class="token number">91</span>
<span class="token number">2020</span>-08-10T08:25:03.106631Z <span class="token number">1</span> <span class="token punctuation">[</span>System<span class="token punctuation">]</span> <span class="token punctuation">[</span>MY-013576<span class="token punctuation">]</span> <span class="token punctuation">[</span>InnoDB<span class="token punctuation">]</span> InnoDB initialization has started.
<span class="token number">2020</span>-08-10T08:25:04.594295Z <span class="token number">0</span> <span class="token punctuation">[</span>ERROR<span class="token punctuation">]</span> <span class="token punctuation">[</span>MY-011065<span class="token punctuation">]</span> <span class="token punctuation">[</span>Server<span class="token punctuation">]</span> Unable to determine <span class="token keyword">if</span> daemon is running: Inappropriate ioctl <span class="token keyword">for</span> device <span class="token punctuation">(</span>rc<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>.
<span class="token number">2020</span>-08-10T08:25:04.594313Z <span class="token number">0</span> <span class="token punctuation">[</span>ERROR<span class="token punctuation">]</span> <span class="token punctuation">[</span>MY-010946<span class="token punctuation">]</span> <span class="token punctuation">[</span>Server<span class="token punctuation">]</span> Failed to start mysqld daemon. Check mysqld error log.
<span class="token number">2020</span>-08-10 08:25:04+00:00 <span class="token punctuation">[</span>ERROR<span class="token punctuation">]</span> <span class="token punctuation">[</span>Entrypoint<span class="token punctuation">]</span>: Unable to start server.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u539F\u56E0\u662F 300m \u4E0D\u591F\u5927\uFF0C\u53C8\u628A<code>mysql_5</code>\u7684\u5BB9\u91CF\u52A0\u4E0A\u53BB\u4E86\u3002</p></div><p>\u6700\u540E\u6D4B\u8BD5</p><p><img src="https://virusoss.oss-cn-shanghai.aliyuncs.com/images/image-20221217205245292.png" alt="image-20221217205245292" loading="lazy"></p>`,22),i=[p];function o(l,c){return s(),a("div",null,i)}var d=n(t,[["render",o],["__file","docker-mysql-cluster.html.vue"]]);export{d as default};
