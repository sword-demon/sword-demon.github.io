import{_ as n}from"./plugin-vue_export-helper.21dcd24c.js";import{o as s,c as a,e}from"./app.282044d1.js";const p={},i=e(`<h1 id="php7-4-\u7F16\u8BD1\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#php7-4-\u7F16\u8BD1\u5B89\u88C5" aria-hidden="true">#</a> PHP7.4 \u7F16\u8BD1\u5B89\u88C5</h1><h2 id="\u76EE\u5F55" tabindex="-1"><a class="header-anchor" href="#\u76EE\u5F55" aria-hidden="true">#</a> \u76EE\u5F55</h2><ul><li><p><a href="#%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85yum%E6%BA%90centos7">\u4E0B\u8F7D\u5B89\u88C5 yum \u6E90(centos7)</a></p></li><li><p><a href="#%E5%AE%89%E8%A3%85sl%E5%91%BD%E4%BB%A4%E5%B0%8F%E7%81%AB%E8%BD%A6">\u5B89\u88C5 sl \u547D\u4EE4(\u5C0F\u706B\u8F66)</a></p></li><li><p><a href="#%E5%AE%89%E8%A3%85ipython%E5%91%BD%E4%BB%A4">\u5B89\u88C5 ipython \u547D\u4EE4</a></p></li><li><p><a href="#%E5%AE%89%E8%A3%85php74">\u5B89\u88C5 PHP7.4</a></p></li><li><p><a href="#%E5%AE%89%E8%A3%85cmake-3170-rc1">\u5B89\u88C5 cmake-3.17.0-rc1</a></p></li><li><p><a href="#%E5%AE%89%E8%A3%85libzip-161">\u5B89\u88C5 libzip-1.6.1</a></p></li><li><p><a href="#%E5%AE%89%E8%A3%85zip-1171%E6%89%A9%E5%B1%95">\u5B89\u88C5 zip-1.17.1 \u6269\u5C55</a></p></li><li><p><a href="#%E9%85%8D%E7%BD%AEphp74">\u914D\u7F6E PHP7.4</a></p><ul><li><p><a href="#%E6%B5%8B%E8%AF%95">\u6D4B\u8BD5</a></p><ul><li><p><a href="#zip">zip</a></p></li><li><p><a href="#mysqli">mysqli</a></p></li><li><p><a href="#pdo_mysql">pdo_mysql</a></p></li></ul></li></ul></li><li><p><a href="#php74%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98">PHP7.4 \u6027\u80FD\u8C03\u4F18</a></p></li><li><p><a href="#%E5%85%B3%E4%BA%8Eopache%E7%9A%84%E4%B8%80%E4%BA%9B%E9%85%8D%E7%BD%AE">\u5173\u4E8E opache \u7684\u4E00\u4E9B\u914D\u7F6E</a></p></li><li><p><a href="#thinkphp%E5%BC%80%E5%90%AF%E4%BA%8C%E7%BA%A7%E5%9F%9F%E5%90%8D">ThinkPHP \u5F00\u542F\u4E8C\u7EA7\u57DF\u540D</a></p></li><li><p><a href="#%E8%B0%83%E6%95%B4php74%E9%85%8D%E7%BD%AE%E7%9A%84%E4%B8%80%E4%BA%9B%E5%86%85%E5%AE%B9">\u8C03\u6574 PHP7.4 \u914D\u7F6E\u7684\u4E00\u4E9B\u5185\u5BB9</a></p><ul><li><a href="#pdo_mysql-1">pdo_mysql</a></li></ul></li><li><p><a href="#php74%E5%AE%89%E8%A3%85swoole%E6%89%A9%E5%B1%95">PHP7.4 \u5B89\u88C5 swoole \u6269\u5C55</a></p></li><li><p><a href="#%E5%AE%89%E8%A3%85composer">\u5B89\u88C5 composer</a></p></li></ul><h2 id="\u4E0B\u8F7D\u5B89\u88C5-yum-\u6E90-centos7" tabindex="-1"><a class="header-anchor" href="#\u4E0B\u8F7D\u5B89\u88C5-yum-\u6E90-centos7" aria-hidden="true">#</a> \u4E0B\u8F7D\u5B89\u88C5 yum \u6E90(centos7)</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">wget</span> http://mirror.centos.org/centos/7/extras/x86_64/Packages/epel-release-7-11.noarch.rpm

yum <span class="token function">install</span> -y epel-release-7-11.noarch.rpm
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u5B89\u88C5-sl-\u547D\u4EE4-\u5C0F\u706B\u8F66" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5-sl-\u547D\u4EE4-\u5C0F\u706B\u8F66" aria-hidden="true">#</a> \u5B89\u88C5 sl \u547D\u4EE4(\u5C0F\u706B\u8F66)</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum <span class="token function">install</span> -y sl
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="\u5B89\u88C5-ipython-\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5-ipython-\u547D\u4EE4" aria-hidden="true">#</a> \u5B89\u88C5 ipython \u547D\u4EE4</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum <span class="token function">install</span> -y ipython
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="\u5B89\u88C5-php7-4" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5-php7-4" aria-hidden="true">#</a> \u5B89\u88C5 PHP7.4</h2><p>\u9996\u5148\u51C6\u5907\u4E00\u4E2A 7.4 \u7684\u6E90\u7801\u5305\u4E0A\u4F20\u5230<code>/usr/local/src</code>\u76EE\u5F55\u4E0B\uFF0C\u8FDB\u884C\u89E3\u538B</p><p>\u7136\u540E\u67E5\u770B PHP7.4 \u9700\u8981\u5B89\u88C5\u7684\u4E00\u4E9B\u4F9D\u8D56</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>./configure --prefix<span class="token operator">=</span>/usr/local/php7 --with-config-file-path<span class="token operator">=</span>/usr/local/php7/etc  --with-mysqli   --with-pdo-mysql --with-xmlrpc --with-openssl --with-openssl-dir --with-zlib --with-zlib-dir  --with-freetype --enable-gd --with-jpeg  --enable-short-tags --enable-sockets --enable-soap --enable-mbstring --enable-static --with-curl  --with-xsl --enable-ftp --with-libxml  --enable-fpm --with-pdo-sqlite  --with-gettext --with-iconv-dir --with-kerberos --with-libdir<span class="token operator">=</span>lib64  --with-pear --with-mhash  --enable-gd-jis-conv --enable-bcmath --with-expat --enable-inline-optimization --enable-mbregex --enable-opcache  --enable-sysvsem --enable-xml --enable-maintainer-zts  --enable-simplexml --disable-rpath --disable-fileinfo

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u200B \u5982\u679C\u51FA\u73B0\u4EE5\u4E0B\u9519\u8BEF</p><blockquote><p>No package &#39;sqlite3&#39; found</p></blockquote><p>\u5B89\u88C5\u4E00\u4E0B\u8FD9\u4E2A\u5E93\u5373\u53EF</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum <span class="token function">install</span> libsqlite3x-devel -y
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5982\u679C\u51FA\u73B0\u4EE5\u4E0B\u9519\u8BEF\uFF1A</p><blockquote><p>error: Package requirements (oniguruma) were not met</p></blockquote><p>\u5B89\u88C5\u5982\u4E0B\u4F9D\u8D56</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum <span class="token function">install</span> oniguruma-devel -y
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u7136\u540E\u518D\u91CD\u66F4\u65B0\u8FD0\u884C\u4E0A\u9762\u914D\u7F6E\u4EE3\u7801</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>+--------------------------------------------------------------------+
<span class="token operator">|</span> License:                                                           <span class="token operator">|</span>
<span class="token operator">|</span> This software is subject to the PHP License, available <span class="token keyword">in</span> this     <span class="token operator">|</span>
<span class="token operator">|</span> distribution <span class="token keyword">in</span> the <span class="token function">file</span> LICENSE. By continuing this installation  <span class="token operator">|</span>
<span class="token operator">|</span> process, you are bound by the terms of this license agreement.     <span class="token operator">|</span>
<span class="token operator">|</span> If you <span class="token keyword">do</span> not agree with the terms of this license, you must abort <span class="token operator">|</span>
<span class="token operator">|</span> the installation process at this point.                            <span class="token operator">|</span>
+--------------------------------------------------------------------+

Thank you <span class="token keyword">for</span> using PHP.

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6700\u7EC8\u51FA\u73B0\u8FD9\u4E2A\uFF0C\u5C31\u4EE3\u8868\u6210\u529F\u4E86\u3002</p><p>\u4E0B\u9762\u5C31\u53EF\u4EE5<code>make &amp;&amp; make intall</code>\u8FDB\u884C\u7F16\u8BD1\u5B89\u88C5\u4E86</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>Installing shared extensions:     /usr/local/php7/lib/php/extensions/no-debug-zts-20190902/
Installing PHP CLI binary:        /usr/local/php7/bin/
Installing PHP CLI <span class="token function">man</span> page:      /usr/local/php7/php/man/man1/
Installing PHP FPM binary:        /usr/local/php7/sbin/
Installing PHP FPM defconfig:     /usr/local/php7/etc/
Installing PHP FPM <span class="token function">man</span> page:      /usr/local/php7/php/man/man8/
Installing PHP FPM status page:   /usr/local/php7/php/php/fpm/
Installing phpdbg binary:         /usr/local/php7/bin/
Installing phpdbg <span class="token function">man</span> page:       /usr/local/php7/php/man/man1/
Installing PHP CGI binary:        /usr/local/php7/bin/
Installing PHP CGI <span class="token function">man</span> page:      /usr/local/php7/php/man/man1/
Installing build environment:     /usr/local/php7/lib/php/build/
Installing header files:          /usr/local/php7/include/php/
Installing helper programs:       /usr/local/php7/bin/
  program: phpize
  program: php-config
Installing <span class="token function">man</span> pages:             /usr/local/php7/php/man/man1/
  page: phpize.1
  page: php-config.1
Installing PEAR environment:      /usr/local/php7/lib/php/
<span class="token punctuation">[</span>PEAR<span class="token punctuation">]</span> Archive_Tar    - installed: <span class="token number">1.4</span>.8
<span class="token punctuation">[</span>PEAR<span class="token punctuation">]</span> Console_Getopt - installed: <span class="token number">1.4</span>.3
<span class="token punctuation">[</span>PEAR<span class="token punctuation">]</span> Structures_Graph- installed: <span class="token number">1.1</span>.1
<span class="token punctuation">[</span>PEAR<span class="token punctuation">]</span> XML_Util       - installed: <span class="token number">1.4</span>.3
<span class="token punctuation">[</span>PEAR<span class="token punctuation">]</span> PEAR           - installed: <span class="token number">1.10</span>.10
Wrote PEAR system config <span class="token function">file</span> at: /usr/local/php7/etc/pear.conf
You may want to add: /usr/local/php7/lib/php to your php.ini include_path
/usr/local/src/php-7.4.2/build/shtool <span class="token function">install</span> -c ext/phar/phar.phar /usr/local/php7/bin
<span class="token function">ln</span> -s -f phar.phar /usr/local/php7/bin/phar
Installing PDO headers:           /usr/local/php7/include/php/ext/pdo/

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u51FA\u73B0\u4E0A\u8FF0\u5185\u5BB9\uFF0C\u8868\u793A\u7F16\u8BD1\u5B89\u88C5\u5B8C\u6210\u4E86\u3002</p><h2 id="\u5B89\u88C5-cmake-3-17-0-rc1" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5-cmake-3-17-0-rc1" aria-hidden="true">#</a> \u5B89\u88C5 cmake-3.17.0-rc1</h2><p>\u5C06\u4E0B\u8F7D\u597D\u7684\u5305\u4F20\u5230\u670D\u52A1\u5668<code>/usr/local/src</code>\u76EE\u5F55\u4E0B\u8FDB\u884C\u89E3\u538B</p><p>\u89E3\u538B\u5B8C\u8FDB\u5165\u76EE\u5F55\u4E2D\u4F7F\u7528\u5982\u4E0B\u547D\u4EE4</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 cmake-3.17.0-rc1<span class="token punctuation">]</span><span class="token comment"># ./bootstrap</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>-- Build files have been written to: /usr/local/src/cmake-3.17.0-rc1
---------------------------------------------
CMake has bootstrapped.  Now run gmake.

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u51FA\u73B0\u4E0A\u8FF0\u5185\u5BB9\uFF0C\u6839\u636E\u5B83\u7684\u63D0\u793A\u8FD0\u884C<code>gmake</code>\uFF0C\u7B49\u5230<code>gmake</code>\u8FD0\u884C\u5B8C\u4E86\uFF0C\u518D\u7EE7\u7EED\u8FD0\u884C<code>make install</code>\u547D\u4EE4\uFF0C\u8FD9\u4E2A\u901F\u5EA6\u4F1A\u6BD4\u8F83\u5FEB\u3002</p><p>\u7136\u540E\u6211\u4EEC\u5C31\u53EF\u4EE5\u5B89\u88C5<code>libzip</code>\u7EC4\u4EF6</p><h2 id="\u5B89\u88C5-libzip-1-6-1" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5-libzip-1-6-1" aria-hidden="true">#</a> \u5B89\u88C5 libzip-1.6.1</h2><p>\u6211\u4EEC\u5148\u53BB\u627E\u8D44\u6E90\u4E0B\u8F7D\u4E00\u4E2A\u8FD9\u4E2A\u5305\uFF0C\u7136\u540E\u4E0A\u4F20\u5230<code>/usr/local/src</code>\u76EE\u5F55\u4E2D\u5E76\u89E3\u538B</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 src<span class="token punctuation">]</span><span class="token comment"># cd libzip-1.6.1/</span>
<span class="token punctuation">[</span>root@10 libzip-1.6.1<span class="token punctuation">]</span><span class="token comment"># mkdir build</span>
<span class="token punctuation">[</span>root@10 libzip-1.6.1<span class="token punctuation">]</span><span class="token comment"># cd build/</span>
<span class="token punctuation">[</span>root@10 build<span class="token punctuation">]</span><span class="token comment"># cmake ..</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6700\u540E\u51FA\u73B0\u4EE5\u4E0B\u5185\u5BB9\u5373\u53EF</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>-- Configuring <span class="token keyword">done</span>
-- Generating <span class="token keyword">done</span>
-- Build files have been written to: /usr/local/src/libzip-1.6.1/build
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7136\u540E\u5C31\u5728<code>build</code>\u76EE\u5F55\u4E2D\u8FDB\u884C<code>make &amp;&amp; make install</code>\uFF0C\u8FD9\u4E2A\u901F\u5EA6\u4E5F\u4F1A\u633A\u5FEB\u7684\u3002</p><p>\u5B89\u88C5\u6210\u529F\u51FA\u73B0\u4E0B\u9762\u7684\u90E8\u5206\u5185\u5BB9</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>-- Installing: /usr/local/bin/zipcmp
-- Set runtime path of <span class="token string">&quot;/usr/local/bin/zipcmp&quot;</span> to <span class="token string">&quot;&quot;</span>
-- Installing: /usr/local/bin/zipmerge
-- Set runtime path of <span class="token string">&quot;/usr/local/bin/zipmerge&quot;</span> to <span class="token string">&quot;&quot;</span>
-- Installing: /usr/local/bin/ziptool
-- Set runtime path of <span class="token string">&quot;/usr/local/bin/ziptool&quot;</span> to <span class="token string">&quot;&quot;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">vim</span> /etc/ld.so.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6DFB\u52A0\u5185\u5BB9</p><div class="language-\u7EAF\u6587\u672C ext-\u7EAF\u6587\u672C line-numbers-mode"><pre class="language-\u7EAF\u6587\u672C"><code>include ld.so.conf.d/*.conf

/usr/local/lib64
/usr/local/lib
/usr/lib
/usr/lib64
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7136\u540E\u4F7F\u7528<code>lbconfig -v</code>\u67E5\u770B\u4E00\u4E0B\u5373\u53EF</p><h2 id="\u5B89\u88C5-zip-1-17-1-\u6269\u5C55" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5-zip-1-17-1-\u6269\u5C55" aria-hidden="true">#</a> \u5B89\u88C5 zip-1.17.1 \u6269\u5C55</h2><p>\u6211\u4EEC\u5148\u53BB\u627E\u8D44\u6E90\u4E0B\u8F7D\u4E00\u4E2A\u8FD9\u4E2A\u5305\uFF0C\u7136\u540E\u4E0A\u4F20\u5230<code>/usr/local/src</code>\u76EE\u5F55\u4E2D\u5E76\u89E3\u538B</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 zip-1.17.1<span class="token punctuation">]</span><span class="token comment"># /usr/local/php7/bin/phpize</span>
Configuring for:
PHP Api Version:         <span class="token number">20190902</span>
Zend Module Api No:      <span class="token number">20190902</span>
Zend Extension Api No:   <span class="token number">320190902</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 zip-1.17.1<span class="token punctuation">]</span><span class="token comment"># ./configure --with-php-config=/usr/local/php7/bin/php-config</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u51FA\u73B0\u4EE5\u4E0B\u5185\u5BB9\u5373\u53EF</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>creating libtool
appending configuration tag <span class="token string">&quot;CXX&quot;</span> to libtool
configure: patching config.h.in
configure: creating ./config.status
config.status: creating config.h

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7136\u540E\u7F16\u8BD1\u5B89\u88C5</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 zip-1.17.1<span class="token punctuation">]</span><span class="token comment"># make &amp;&amp; make install</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5C31\u4F1A\u51FA\u73B0\u4EE5\u4E0B\u7ED3\u679C</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>Build complete.
Don<span class="token string">&#39;t forget to run &#39;</span><span class="token function">make</span> test&#39;.

Installing shared extensions:     /usr/local/php7/lib/php/extensions/no-debug-zts-20190902/

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u914D\u7F6E-php7-4" tabindex="-1"><a class="header-anchor" href="#\u914D\u7F6E-php7-4" aria-hidden="true">#</a> \u914D\u7F6E PHP7.4</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 php-7.4.2<span class="token punctuation">]</span><span class="token comment"># cd /usr/local/php7/</span>
<span class="token punctuation">[</span>root@10 php7<span class="token punctuation">]</span><span class="token comment"># cp etc/php-fpm.conf.default etc/php-fpm.conf</span>
<span class="token punctuation">[</span>root@10 php7<span class="token punctuation">]</span><span class="token comment"># cp /usr/local/src/php-7.4.2/php.ini-development /usr/local/php7/etc/php.ini</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 php7<span class="token punctuation">]</span><span class="token comment"># cd /usr/local/php7/etc/php-fpm.d/</span>
<span class="token punctuation">[</span>root@10 php-fpm.d<span class="token punctuation">]</span><span class="token comment"># cp www.conf.default www.conf</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7F16\u8F91<code>php.ini</code>\u52A0\u5165<code>zip.so</code>\u6269\u5C55\u751F\u6548</p><div class="language-ini ext-ini line-numbers-mode"><pre class="language-ini"><code><span class="token comment">;extension=soap</span>
<span class="token comment">;extension=sockets</span>
<span class="token comment">;extension=sodium</span>
<span class="token comment">;extension=sqlite3</span>
<span class="token comment">;extension=tidy</span>
<span class="token comment">;extension=xmlrpc</span>
<span class="token comment">;extension=xsl</span>
<span class="token key attr-name">extension</span><span class="token punctuation">=</span><span class="token value attr-value">zip.so</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F7F\u7528<code>php-fpm</code>\u6765\u542F\u52A8</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 php-fpm.d<span class="token punctuation">]</span><span class="token comment"># /usr/local/php7/sbin/php-fpm</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 php-fpm.d<span class="token punctuation">]</span><span class="token comment"># netstat -tpln</span>
Active Internet connections <span class="token punctuation">(</span>only servers<span class="token punctuation">)</span>
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name
tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">0.0</span>.0.0:22              <span class="token number">0.0</span>.0.0:*               LISTEN      <span class="token number">706</span>/sshd
tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">127.0</span>.0.1:9000          <span class="token number">0.0</span>.0.0:*               LISTEN      <span class="token number">14896</span>/php-fpm: mast
tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">0.0</span>.0.0:111             <span class="token number">0.0</span>.0.0:*               LISTEN      <span class="token number">357</span>/rpcbind
tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">0.0</span>.0.0:80              <span class="token number">0.0</span>.0.0:*               LISTEN      <span class="token number">3295</span>/nginx: master
tcp6       <span class="token number">0</span>      <span class="token number">0</span> :::22                   :::*                    LISTEN      <span class="token number">706</span>/sshd
tcp6       <span class="token number">0</span>      <span class="token number">0</span> :::33060                :::*                    LISTEN      <span class="token number">1634</span>/mysqld
tcp6       <span class="token number">0</span>      <span class="token number">0</span> :::3306                 :::*                    LISTEN      <span class="token number">1634</span>/mysqld
tcp6       <span class="token number">0</span>      <span class="token number">0</span> :::111                  :::*                    LISTEN      <span class="token number">357</span>/rpcbind
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7136\u540E\u6211\u4EEC\u5C06<code>php-fpm</code>\u52A0\u5165\u5230\u5F00\u673A\u81EA\u542F</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 php-fpm.d<span class="token punctuation">]</span><span class="token comment"># cd /usr/local/src/php-7.4.2/sapi/fpm/</span>
<span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># cp init.d.php-fpm /etc/init.d/php-fpm7</span>
<span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># chmod a+x /etc/init.d/php-fpm7</span>
<span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># chkconfig php-fpm</span>
php-fpm             php-fpm.8.in        php-fpm.conf.in     php-fpm.service.in
php-fpm.8           php-fpm.conf        php-fpm.service
<span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># chkconfig php-fpm</span>
php-fpm             php-fpm.8.in        php-fpm.conf.in     php-fpm.service.in
php-fpm.8           php-fpm.conf        php-fpm.service
<span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># chkconfig php-fpm7 on</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># ps -ef | grep php-fpm</span>
root     <span class="token number">14896</span>     <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">15</span>:59 ?        00:00:00 php-fpm: master process <span class="token punctuation">(</span>/usr/local/php7/etc/php-fpm.conf<span class="token punctuation">)</span>
nobody   <span class="token number">14897</span> <span class="token number">14896</span>  <span class="token number">0</span> <span class="token number">15</span>:59 ?        00:00:00 php-fpm: pool www
nobody   <span class="token number">14898</span> <span class="token number">14896</span>  <span class="token number">0</span> <span class="token number">15</span>:59 ?        00:00:00 php-fpm: pool www
root     <span class="token number">15035</span>  <span class="token number">3378</span>  <span class="token number">0</span> <span class="token number">16</span>:06 pts/1    00:00:00 <span class="token function">grep</span> --color<span class="token operator">=</span>auto php-fpm
<span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># kill -9 14896</span>
<span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># kill -9 14897</span>
<span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># kill -9 14898</span>
<span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># ps -ef | grep php-fpm</span>
root     <span class="token number">15037</span>  <span class="token number">3378</span>  <span class="token number">0</span> <span class="token number">16</span>:06 pts/1    00:00:00 <span class="token function">grep</span> --color<span class="token operator">=</span>auto php-fpm
<span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># service php-fpm7 restart</span>
Gracefully shutting down php-fpm warning, no pid <span class="token function">file</span> found - php-fpm is not running ?
Starting php-fpm  <span class="token keyword">done</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u67E5\u770B\u662F\u5426\u8FDB\u5165\u5F00\u673A\u542F\u52A8\u9879</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># chkconfig php-fpm7 --list</span>

Note: This output shows SysV services only and does not include native
      systemd services. SysV configuration data might be overridden by native
      systemd configuration.

      If you want to list systemd services use <span class="token string">&#39;systemctl list-unit-files&#39;</span><span class="token builtin class-name">.</span>
      To see services enabled on particular target use
      <span class="token string">&#39;systemctl list-dependencies [target]&#39;</span><span class="token builtin class-name">.</span>

php-fpm7         <span class="token number">0</span>:off  <span class="token number">1</span>:off  <span class="token number">2</span>:on  <span class="token number">3</span>:on  <span class="token number">4</span>:on  <span class="token number">5</span>:on  <span class="token number">6</span>:off

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53EA\u8981 3\uFF0C4\uFF0C5 \u662F<code>on</code>\u5373\u53EF\u3002</p><p>\u7136\u540E\u6211\u4EEC\u8FD8\u9700\u8981\u914D\u7F6E<code>nginx.conf</code>\u53EF\u4EE5\u4F7F\u7528<code>php</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># vim /usr/local/nginx/conf/nginx.conf</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> ~ \\.php$</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">fastcgi_pass</span>   127.0.0.1:9000</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">fastcgi_index</span>  index.php</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">fastcgi_param</span>  SCRIPT_FILENAME  <span class="token variable">$document_root</span><span class="token variable">$fastcgi_script_name</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">include</span>        fastcgi_params</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">root</span>   /home/web/</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">index</span>  index.php index.html index.htm</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4FEE\u6539\u4E0A\u8FF0\u5185\u4FDD\u5B58\u4E4B\u540E\uFF0C\u91CD\u542F\u4EE5\u4E0B<code>nginx</code></p><h3 id="\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#\u6D4B\u8BD5" aria-hidden="true">#</a> \u6D4B\u8BD5</h3><p>\u7B80\u5355\u7F16\u5199\u4E00\u4E2A<code>index.php</code>\uFF0C\u52A0\u5165<code>phpinfo()</code>\u51FD\u6570</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># vim /home/web/index.php</span>
<span class="token punctuation">[</span>root@10 fpm<span class="token punctuation">]</span><span class="token comment"># chown -R nginx.nginx /home/web/</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7136\u540E\u518D\u6B21\u66F4\u65B0\u5B83\u7684\u6743\u9650\uFF0C\u518D\u6B21\u8BBF\u95EE\u6211\u4EEC\u7684\u865A\u62DF\u673A\u7684<code>ip</code>\u5730\u5740\u5C31\u4F1A\u663E\u793A\u5BF9\u5E94\u7684<code>phpinfo</code>\u7684\u5185\u5BB9</p><p>\u5C31\u53EF\u4EE5\u770B\u5230\u4E0B\u9762\u51E0\u4E2A\u4F9D\u8D56\u5E93\u7684\u5185\u5BB9</p><h4 id="zip" tabindex="-1"><a class="header-anchor" href="#zip" aria-hidden="true">#</a> zip</h4><table><thead><tr><th>Zip</th><th>enabled</th></tr></thead><tbody><tr><td>Zip version</td><td>1.17.1</td></tr><tr><td>Libzip headers version</td><td>1.6.1</td></tr><tr><td>Libzip library version</td><td>1.6.1</td></tr></tbody></table><h4 id="mysqli" tabindex="-1"><a class="header-anchor" href="#mysqli" aria-hidden="true">#</a> mysqli</h4><table><thead><tr><th>MysqlI Support</th><th>enabled</th></tr></thead><tbody><tr><td>Client API library version</td><td>mysqlnd 7.4.2</td></tr><tr><td>Active Persistent Links</td><td>0</td></tr><tr><td>Inactive Persistent Links</td><td>0</td></tr><tr><td>Active Links</td><td>0</td></tr></tbody></table><h4 id="pdo-mysql" tabindex="-1"><a class="header-anchor" href="#pdo-mysql" aria-hidden="true">#</a> pdo_mysql</h4><table><thead><tr><th>PDO Driver for MySQL</th><th>enabled</th></tr></thead><tbody><tr><td>Client API version</td><td>mysqlnd 7.4.2</td></tr></tbody></table><p>\u6211\u4EEC\u8FD8\u8981\u8BBE\u7F6E\u4EE5\u4E0B\u5B89\u88C5<code>nginx</code>\u7684\u65F6\u5019\u8BBE\u7F6E\u7684<code>home/web/php7</code>\u76EE\u5F55\u4E0B\u7684\u4E00\u4E2A<code>php7.conf</code></p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> ~ \\.php$</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">fastcgi_pass</span>   127.0.0.1:9000</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">fastcgi_index</span>  index.php</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">fastcgi_param</span>  SCRIPT_FILENAME  <span class="token variable">$document_root</span><span class="token variable">$fastcgi_script_name</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">include</span>        fastcgi_params</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E5F\u52A0\u4E0A\u4E0A\u8FF0\u5185\u5BB9\u5373\u53EF\u3002</p><p>\u5B8C\u6574\u5185\u5BB9</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
        <span class="token comment"># \u76D1\u542C\u7AEF\u53E3\u53F7</span>
        <span class="token directive"><span class="token keyword">listen</span> <span class="token number">80</span></span><span class="token punctuation">;</span>
        <span class="token comment"># \u57DF\u540D</span>
        <span class="token directive"><span class="token keyword">server_name</span> www.php7.tt</span><span class="token punctuation">;</span>
        <span class="token comment"># \u7F51\u7AD9\u76EE\u5F55</span>
        <span class="token directive"><span class="token keyword">root</span> /home/web/php7/</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">location</span> /</span><span class="token punctuation">{</span>
                <span class="token directive"><span class="token keyword">ssi</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
                <span class="token directive"><span class="token keyword">ssi_silent_errors</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
                <span class="token directive"><span class="token keyword">index</span> index.php index.html index.htm</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token directive"><span class="token keyword">location</span> ~ \\.php$</span> <span class="token punctuation">{</span>
                <span class="token directive"><span class="token keyword">fastcgi_pass</span>   127.0.0.1:9000</span><span class="token punctuation">;</span>
                <span class="token directive"><span class="token keyword">fastcgi_index</span>  index.php</span><span class="token punctuation">;</span>
                <span class="token directive"><span class="token keyword">fastcgi_param</span>  SCRIPT_FILENAME  <span class="token variable">$document_root</span><span class="token variable">$fastcgi_script_name</span></span><span class="token punctuation">;</span>
                 <span class="token directive"><span class="token keyword">include</span>        fastcgi_params</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token directive"><span class="token keyword">access_log</span> /usr/local/nginx/logs/php7_access.log</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">error_log</span> /usr/local/nginx/logs/php7_error.log</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7136\u540E\u63A5\u7740\u8FD8\u662F\u8981\u91CD\u542F\u4EE5\u4E0B<code>nginx</code></p><p>\u5BF9\u5E94\u4E5F\u5BF9<code>php7</code>\u76EE\u5F55\u4E0B\u65B0\u589E\u4E00\u4E2A<code>index.php</code>\u52A0\u5165<code>phpinfo()</code>\u51FD\u6570\u6765\u6D4B\u8BD5\u4EE5\u4E0B\u662F\u5426\u6210\u529F\u3002</p><h2 id="php7-4-\u6027\u80FD\u8C03\u4F18" tabindex="-1"><a class="header-anchor" href="#php7-4-\u6027\u80FD\u8C03\u4F18" aria-hidden="true">#</a> PHP7.4 \u6027\u80FD\u8C03\u4F18</h2><p>\u7ED9<code>php-fpm</code>\u6DFB\u52A0\u65E5\u5FD7\u6587\u4EF6\u76EE\u5F55</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 nginx<span class="token punctuation">]</span><span class="token comment"># mkdir -p /usr/local/php7/log</span>
<span class="token punctuation">[</span>root@10 nginx<span class="token punctuation">]</span><span class="token comment"># chown -R nginx.nginx /usr/local/php7/</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7136\u540E\u7F16\u8F91</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#\u6027\u80FD\u8C03\u4F18</span>
<span class="token function">vim</span> /usr/local/php7/etc/php-fpm.conf

<span class="token comment"># \u5C06\u4EE5\u4E0B\u5185\u5BB9\u6CE8\u91CA\u53BB\u6389</span>
pid <span class="token operator">=</span> run/php-fpm.pid
error_log <span class="token operator">=</span> log/php-fpm.log
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">vim</span> /usr/local/php7/etc/php-fpm.d/www.conf

<span class="token comment"># \u5C06\u4E0B\u9762\u5185\u5BB9\u8FDB\u884C\u66FF\u6362\u4E3Anginx\u7528\u6237</span>
user <span class="token operator">=</span> nginx
group <span class="token operator">=</span> nginx

<span class="token comment"># \u5982\u679C listen \u76D1\u542C\u7684\u662F9000\u90A3\u5C31\u4E0D\u7528\u7BA1  \u6682\u65F6\u4FDD\u5B58\uFF0C\u4E0B\u9762\u8FD8\u8981\u8BBE\u7F6E\u5185\u5BB9</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 nginx<span class="token punctuation">]</span><span class="token comment"># ps -ef | grep php-fpm</span>
root     <span class="token number">15049</span>     <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">16</span>:06 ?        00:00:00 php-fpm: master process <span class="token punctuation">(</span>/usr/local/php7/etc/php-fpm.conf<span class="token punctuation">)</span>
nobody   <span class="token number">15050</span> <span class="token number">15049</span>  <span class="token number">0</span> <span class="token number">16</span>:06 ?        00:00:00 php-fpm: pool www
nobody   <span class="token number">15051</span> <span class="token number">15049</span>  <span class="token number">0</span> <span class="token number">16</span>:06 ?        00:00:00 php-fpm: pool www

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53EF\u4EE5\u770B\u5230\u8FD9\u8FB9\u8FD8\u662F<code>nobody</code>\uFF0C\u6211\u4EEC\u9700\u8981\u91CD\u542F\u4EE5\u4E0B<code>php-fpm7</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 nginx<span class="token punctuation">]</span><span class="token comment"># service php-fpm7 restart</span>
Gracefully shutting down php-fpm <span class="token builtin class-name">.</span> <span class="token keyword">done</span>
Starting php-fpm  <span class="token keyword">done</span>
<span class="token punctuation">[</span>root@10 nginx<span class="token punctuation">]</span><span class="token comment"># ps -ef | grep php-fpm</span>
root     <span class="token number">15428</span>  <span class="token number">3378</span>  <span class="token number">0</span> <span class="token number">16</span>:26 pts/1    00:00:00 <span class="token function">vim</span> /usr/local/php7/etc/php-fpm.d/www.conf
root     <span class="token number">15455</span>     <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">16</span>:28 ?        00:00:00 php-fpm: master process <span class="token punctuation">(</span>/usr/local/php7/etc/php-fpm.conf<span class="token punctuation">)</span>
nginx    <span class="token number">15456</span> <span class="token number">15455</span>  <span class="token number">0</span> <span class="token number">16</span>:28 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15457</span> <span class="token number">15455</span>  <span class="token number">0</span> <span class="token number">16</span>:28 ?        00:00:00 php-fpm: pool www

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><p>\u7EE7\u7EED\u914D\u7F6E<code>vim /usr/local/php7/etc/php-fpm.d/www.conf</code></p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">pm</span> = dynamic</span><span class="token punctuation">;</span> <span class="token comment"># \u8868\u793A\u4F7F\u7528\u54EA\u79CD\u8FDB\u7A0B\u6570\u91CF\u7BA1\u7406\u65B9\u5F0F</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><p><code>dynamic</code>\u8868\u793A<code>php-fpm</code>\u8FDB\u7A0B\u6570\u662F\u52A8\u6001\u7684\uFF0C\u6700\u5F00\u59CB\u662F<code>pms.start_servers</code>\u6307\u5B9A\u7684\u6570\u91CF\uFF0C\u5982\u679C\u8BF7\u6C42\u8F83\u591A \uFF0C\u5219\u4F1A\u81EA\u52A8\u589E\u52A0\uFF0C\u4FDD\u8BC1\u7A7A\u95F2\u7684\u8FDB\u7A0B\u6570\u4E0D\u5C0F\u4E8E<code>pm.min_spare_servers</code>\uFF0C\u5982\u679C\u8FDB\u7A0B\u6570\u8F83\u591A\uFF0C\u4E5F\u4F1A\u8FDB\u884C\u76F8\u5E94\u6E05\u7406\uFF0C\u4FDD\u8BC1\u591A\u4F59\u7684\u8FDB\u7A0B\u6570\u4E0D\u591A\u4E8E<code>pm.max_spare_servers</code></p></li><li><p><code>static</code>\u8868\u793A<code>php-fpm</code>\u8FDB\u7A0B\u6570\u662F\u9759\u6001\u7684, \u8FDB\u7A0B\u6570\u81EA\u59CB\u81F3\u7EC8\u90FD\u662F<code>pm.max_children</code>\u6307\u5B9A\u7684\u6570\u91CF\uFF0C\u4E0D\u518D\u589E\u52A0\u6216\u51CF\u5C11</p></li></ul><p>\u6B64\u65F6<code>pm.max_children = 5</code>\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5148\u4FEE\u6539<code>pm</code>\u4E3A<code>static</code>\uFF0C\u91CD\u542F<code>php-fpm7</code>\u6765\u67E5\u770B\u542F\u52A8\u4E86\u591A\u5C11\u4E2A\u8FDB\u7A0B</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 nginx<span class="token punctuation">]</span><span class="token comment"># service php-fpm7 restart</span>
Gracefully shutting down php-fpm <span class="token builtin class-name">.</span> <span class="token keyword">done</span>
Starting php-fpm  <span class="token keyword">done</span>
<span class="token punctuation">[</span>root@10 nginx<span class="token punctuation">]</span><span class="token comment"># ps -ef | grep php-fpm</span>
root     <span class="token number">15428</span>  <span class="token number">3378</span>  <span class="token number">0</span> <span class="token number">16</span>:26 pts/1    00:00:00 <span class="token function">vim</span> /usr/local/php7/etc/php-fpm.d/www.conf
root     <span class="token number">15475</span>     <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">16</span>:31 ?        00:00:00 php-fpm: master process <span class="token punctuation">(</span>/usr/local/php7/etc/php-fpm.conf<span class="token punctuation">)</span>
nginx    <span class="token number">15476</span> <span class="token number">15475</span>  <span class="token number">0</span> <span class="token number">16</span>:31 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15477</span> <span class="token number">15475</span>  <span class="token number">0</span> <span class="token number">16</span>:31 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15478</span> <span class="token number">15475</span>  <span class="token number">0</span> <span class="token number">16</span>:31 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15479</span> <span class="token number">15475</span>  <span class="token number">0</span> <span class="token number">16</span>:31 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15480</span> <span class="token number">15475</span>  <span class="token number">0</span> <span class="token number">16</span>:31 ?        00:00:00 php-fpm: pool www
root     <span class="token number">15482</span> <span class="token number">29045</span>  <span class="token number">0</span> <span class="token number">16</span>:31 pts/0    00:00:00 <span class="token function">grep</span> --color<span class="token operator">=</span>auto php-fpm

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>\u6240\u4EE5<code>pm.max_children</code>\u8FD9\u4E2A\u53C2\u6570\u53EA\u5BF9\u9759\u6001\u6A21\u5F0F\u4E0B\u8D77\u4F5C\u7528\u3002 \u9759\u6001\u6A21\u5F0F\u4E0B\uFF0C\u6211\u4EEC\u6700\u597D\u8BBE\u7F6E\u4E3A 100 \u4E2A\u3002</p></blockquote><p>\u6211\u4EEC\u6700\u540E\u8FD8\u662F\u6539\u56DE\u52A8\u6001\u6A21\u5F0F\uFF0C\u52A8\u6001\u6A21\u5F0F\u53EF\u4EE5\u52A8\u6001\u8282\u7701\u8D44\u6E90</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token punctuation">;</span> <span class="token directive"><span class="token keyword">The</span> number of child processes created <span class="token boolean">on</span> startup.</span>
<span class="token punctuation">;</span> <span class="token directive"><span class="token keyword">Note:</span> Used only when pm is set to <span class="token string">&#39;dynamic&#39;</span></span>
<span class="token punctuation">;</span> <span class="token directive"><span class="token keyword">Default</span> Value: (min_spare_servers + max_spare_servers) / <span class="token number">2</span>
pm.start_servers = <span class="token number">10</span></span>

<span class="token punctuation">;</span> <span class="token directive"><span class="token keyword">The</span> desired minimum number of idle server processes.</span>
<span class="token punctuation">;</span> <span class="token directive"><span class="token keyword">Note:</span> Used only when pm is set to <span class="token string">&#39;dynamic&#39;</span></span>
<span class="token punctuation">;</span> <span class="token directive"><span class="token keyword">Note:</span> Mandatory when pm is set to <span class="token string">&#39;dynamic&#39;</span>
pm.min_spare_servers = <span class="token number">5</span></span>

<span class="token punctuation">;</span> <span class="token directive"><span class="token keyword">The</span> desired maximum number of idle server processes.</span>
<span class="token punctuation">;</span> <span class="token directive"><span class="token keyword">Note:</span> Used only when pm is set to <span class="token string">&#39;dynamic&#39;</span></span>
<span class="token punctuation">;</span> Note: Mandatory when pm is set to &#39;dynamic&#39;
pm.max_spare_servers = 35

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u91CD\u542F\u540E\u89C2\u5BDF\u6548\u679C</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 nginx<span class="token punctuation">]</span><span class="token comment"># ps -ef | grep php-fpm</span>
root     <span class="token number">15428</span>  <span class="token number">3378</span>  <span class="token number">0</span> <span class="token number">16</span>:26 pts/1    00:00:00 <span class="token function">vim</span> /usr/local/php7/etc/php-fpm.d/www.conf
root     <span class="token number">15652</span>     <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">16</span>:40 ?        00:00:00 php-fpm: master process <span class="token punctuation">(</span>/usr/local/php7/etc/php-fpm.conf<span class="token punctuation">)</span>
nginx    <span class="token number">15653</span> <span class="token number">15652</span>  <span class="token number">0</span> <span class="token number">16</span>:40 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15654</span> <span class="token number">15652</span>  <span class="token number">0</span> <span class="token number">16</span>:40 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15655</span> <span class="token number">15652</span>  <span class="token number">0</span> <span class="token number">16</span>:40 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15656</span> <span class="token number">15652</span>  <span class="token number">0</span> <span class="token number">16</span>:40 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15657</span> <span class="token number">15652</span>  <span class="token number">0</span> <span class="token number">16</span>:40 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15658</span> <span class="token number">15652</span>  <span class="token number">0</span> <span class="token number">16</span>:40 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15659</span> <span class="token number">15652</span>  <span class="token number">0</span> <span class="token number">16</span>:40 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15660</span> <span class="token number">15652</span>  <span class="token number">0</span> <span class="token number">16</span>:40 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15661</span> <span class="token number">15652</span>  <span class="token number">0</span> <span class="token number">16</span>:40 ?        00:00:00 php-fpm: pool www
nginx    <span class="token number">15662</span> <span class="token number">15652</span>  <span class="token number">0</span> <span class="token number">16</span>:40 ?        00:00:00 php-fpm: pool www
root     <span class="token number">15664</span> <span class="token number">29045</span>  <span class="token number">0</span> <span class="token number">16</span>:40 pts/0    00:00:00 <span class="token function">grep</span> --color<span class="token operator">=</span>auto php-fpm

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6211\u4EEC\u6700\u540E\u7ED9<code>pm.start_servers = 20</code>\u8BBE\u7F6E\u4E3A 20 \u4E2A</p><hr><blockquote><p><code>pm.max_requests</code>\u662F\u53D1\u9001\u591A\u5C11\u4E2A\u8BF7\u6C42\u540E\u4F1A\u91CD\u542F\u8BE5\u7EBF\u7A0B\uFF0C\u6211\u4EEC\u9700\u8981\u9002\u5F53\u964D\u4F4E\u8FD9\u4E2A\u503C\uFF0C\u7528\u4EE5\u8BA9<code>php-fpm</code>\u81EA\u52A8\u7684\u91CA\u653E\u5185\u5B58</p></blockquote><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token punctuation">;</span> <span class="token directive"><span class="token keyword">The</span> number of requests each child process should execute before respawning.</span>
<span class="token punctuation">;</span> <span class="token directive"><span class="token keyword">This</span> can be useful to work around memory leaks in <span class="token number">3rd</span> party libraries. For</span>
<span class="token punctuation">;</span> <span class="token directive"><span class="token keyword">endless</span> request processing specify <span class="token string">&#39;0&#39;</span>. Equivalent to PHP_FCGI_MAX_REQUESTS.</span>
<span class="token punctuation">;</span> Default Value: 0
pm.max_requests = 10240
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><p>\u5F00\u542F\u6162\u67E5\u8BE2</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code>slowlog = log/$pool.log.slow
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8BBE\u7F6E\u8D85\u65F6\u65F6\u95F4 2 \u79D2\u949F</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code>request_slowlog_timeout = 2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8BBE\u7F6E\u6700\u5927\u6267\u884C\u65F6\u95F4</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code>request_terminate_timeout = 30
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5728<code>php.ini</code>\u4E2D\u4E5F\u53EF\u4EE5\u8FDB\u884C\u914D\u7F6E(<code>max_execution_time</code>)</p><p>\u589E\u52A0<code>php-fpm</code>\u6253\u5F00\u6587\u4EF6\u63CF\u8FF0\u7B26\u7684\u9650\u5236</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code>rlimit_files = 65535
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="\u5173\u4E8E-opache-\u7684\u4E00\u4E9B\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u5173\u4E8E-opache-\u7684\u4E00\u4E9B\u914D\u7F6E" aria-hidden="true">#</a> \u5173\u4E8E opache \u7684\u4E00\u4E9B\u914D\u7F6E</h2><blockquote><p>\u6D4B\u8BD5\u73AF\u5883\u6216\u8005\u5F00\u53D1\u73AF\u5883\u4E0D\u5EFA\u8BAE\u5F00\uFF0C\u7EBF\u4E0A\u73AF\u5883\u53EF\u4EE5\u5F00</p></blockquote><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">zend_extension=opcache.so</span></span>
<span class="token punctuation">;</span>\u5F00\u542Fopcache
<span class="token directive"><span class="token keyword">opcache.enable=1</span></span>

<span class="token punctuation">;</span>CLI\u73AF\u5883\u4E0B\uFF0CPHP\u542F\u7528OPcache
<span class="token directive"><span class="token keyword">opcache.enable_cli=1</span></span>

<span class="token punctuation">;</span>OPcache\u5171\u4EAB\u5185\u5B58\u5B58\u50A8\u5927\u5C0F,\u5355\u4F4DMB
<span class="token directive"><span class="token keyword">opcache.memory_consumption=128</span></span>

<span class="token punctuation">;</span>PHP\u4F7F\u7528\u4E86\u4E00\u79CD\u53EB\u505A\u5B57\u7B26\u4E32\u9A7B\u7559\uFF08string <span class="token directive"><span class="token keyword">interning\uFF09\u7684\u6280\u672F\u6765\u6539\u5584\u6027\u80FD\u3002\u4F8B\u5982\uFF0C\u5982\u679C\u4F60\u5728\u4EE3\u7801\u4E2D\u4F7F\u7528\u4E861000\u6B21\u5B57\u7B26\u4E32\u201Cfoobar\u201D\uFF0C\u5728PHP\u5185\u90E8\u53EA\u4F1A\u5728\u7B2C\u4E00\u4F7F\u7528\u8FD9\u4E2A\u5B57\u7B26\u4E32\u7684\u65F6\u5019\u5206\u914D\u4E00\u4E2A\u4E0D\u53EF\u53D8\u7684\u5185\u5B58\u533A\u57DF\u6765\u5B58\u50A8\u8FD9\u4E2A\u5B57\u7B26\u4E32\uFF0C\u5176\u4ED6\u7684999\u6B21\u4F7F\u7528\u90FD\u4F1A\u76F4\u63A5\u6307\u5411\u8FD9\u4E2A\u5185\u5B58\u533A\u57DF\u3002\u8FD9\u4E2A\u9009\u9879\u5219\u4F1A\u628A\u8FD9\u4E2A\u7279\u6027\u63D0\u5347\u4E00\u4E2A\u5C42\u6B21\u2014\u2014\u9ED8\u8BA4\u60C5\u51B5\u4E0B\u8FD9\u4E2A\u4E0D\u53EF\u53D8\u7684\u5185\u5B58\u533A\u57DF\u53EA\u4F1A\u5B58\u5728\u4E8E\u5355\u4E2Aphp-fpm\u7684\u8FDB\u7A0B\u4E2D\uFF0C\u5982\u679C\u8BBE\u7F6E\u4E86\u8FD9\u4E2A\u9009\u9879\uFF0C\u90A3\u4E48\u5B83\u5C06\u4F1A\u5728\u6240\u6709\u7684php-fpm\u8FDB\u7A0B\u4E2D\u5171\u4EAB\u3002\u5728\u6BD4\u8F83\u5927\u7684\u5E94\u7528\u4E2D\uFF0C\u8FD9\u53EF\u4EE5\u975E\u5E38\u6709\u6548\u5730\u8282\u7EA6\u5185\u5B58\uFF0C\u63D0\u9AD8\u5E94\u7528\u7684\u6027\u80FD\u3002</span>
\u8FD9\u4E2A\u9009\u9879\u7684\u503C\u662F\u4EE5\u5146\u5B57\u8282\uFF08megabytes\uFF09\u4F5C\u4E3A\u5355\u4F4D\uFF0C\u5982\u679C\u628A\u5B83\u8BBE\u7F6E\u4E3A16\uFF0C\u5219\u8868\u793A16MB\uFF0C\u9ED8\u8BA4\u662F4MB
opcache.interned_strings_buffer=8</span>

<span class="token punctuation">;</span>\u8FD9\u4E2A\u9009\u9879\u7528\u4E8E\u63A7\u5236\u5185\u5B58\u4E2D\u6700\u591A\u53EF\u4EE5\u7F13\u5B58\u591A\u5C11\u4E2APHP\u6587\u4EF6\u3002\u8FD9\u4E2A\u9009\u9879\u5FC5\u987B\u5F97\u8BBE\u7F6E\u5F97\u8DB3\u591F\u5927\uFF0C\u5927\u4E8E\u4F60\u7684\u9879\u76EE\u4E2D\u7684\u6240\u6709PHP\u6587\u4EF6\u7684\u603B\u548C\u3002
\u8BBE\u7F6E\u503C\u53D6\u503C\u8303\u56F4\u6700\u5C0F\u503C\u662F <span class="token directive"><span class="token keyword">200\uFF0C\u6700\u5927\u503C\u5728</span> PHP 5.5.6 \u4E4B\u524D\u662F 100000\uFF0CPHP 5.5.6 \u53CA\u4E4B\u540E\u662F 1000000\u3002\u4E5F\u5C31\u662F\u8BF4\u5728200\u52301000000\u4E4B\u95F4\u3002
opcache.max_accelerated_files=10000</span>

<span class="token punctuation">;</span>\u8BBE\u7F6E\u7F13\u5B58\u7684\u8FC7\u671F\u65F6\u95F4\uFF08\u5355\u4F4D\u662F\u79D2\uFF09,\u4E3A0\u7684\u8BDD\u6BCF\u6B21\u90FD\u8981\u68C0\u67E5
<span class="token directive"><span class="token keyword">opcache.revalidate_freq=60</span></span>

<span class="token punctuation">;</span>\u4ECE\u5B57\u9762\u4E0A\u7406\u89E3\u5C31\u662F\u201C\u5141\u8BB8\u66F4\u5FEB\u901F\u5173\u95ED\u201D\u3002\u5B83\u7684\u4F5C\u7528\u662F\u5728\u5355\u4E2A\u8BF7\u6C42\u7ED3\u675F\u65F6\u63D0\u4F9B\u4E00\u79CD\u66F4\u5FEB\u901F\u7684\u673A\u5236\u6765\u8C03\u7528\u4EE3\u7801\u4E2D\u7684\u6790\u6784\u5668\uFF0C\u4ECE\u800C\u52A0\u5FEBPHP\u7684\u54CD\u5E94\u901F\u5EA6\u548CPHP\u8FDB\u7A0B\u8D44\u6E90\u7684\u56DE\u6536\u901F\u5EA6\uFF0C\u8FD9\u6837\u5E94\u7528\u7A0B\u5E8F\u53EF\u4EE5\u66F4\u5FEB\u901F\u5730\u54CD\u5E94\u4E0B\u4E00\u4E2A\u8BF7\u6C42\u3002\u628A\u5B83\u8BBE\u7F6E\u4E3A1\u5C31\u53EF\u4EE5\u4F7F\u7528\u8FD9\u4E2A\u673A\u5236\u4E86\u3002
<span class="token directive"><span class="token keyword">opcache.fast_shutdown=1</span></span>

<span class="token punctuation">;</span>\u5982\u679C\u542F\u7528\uFF08\u8BBE\u7F6E\u4E3A1\uFF09\uFF0COPcache\u4F1A\u5728opcache.revalidate_freq\u8BBE\u7F6E\u7684\u79D2\u6570\u53BB\u68C0\u6D4B\u6587\u4EF6\u7684\u65F6\u95F4\u6233\uFF08timestamp\uFF09\u68C0\u67E5\u811A\u672C\u662F\u5426\u66F4\u65B0\u3002
\u5982\u679C\u8FD9\u4E2A\u9009\u9879\u88AB\u7981\u7528\uFF08\u8BBE\u7F6E\u4E3A0\uFF09\uFF0Copcache.revalidate_freq\u4F1A\u88AB\u5FFD\u7565\uFF0CPHP\u6587\u4EF6\u6C38\u8FDC\u4E0D\u4F1A\u88AB\u68C0\u67E5\u3002\u8FD9\u610F\u5473\u7740\u5982\u679C\u4F60\u4FEE\u6539\u4E86\u4F60\u7684\u4EE3\u7801\uFF0C\u7136\u540E\u4F60\u628A\u5B83\u66F4\u65B0\u5230\u670D\u52A1\u5668\u4E0A\uFF0C\u518D\u5728\u6D4F\u89C8\u5668\u4E0A\u8BF7\u6C42\u66F4\u65B0\u7684\u4EE3\u7801\u5BF9\u5E94\u7684\u529F\u80FD\uFF0C\u4F60\u4F1A\u770B\u4E0D\u5230\u66F4\u65B0\u7684\u6548\u679C
\u5F3A\u70C8\u5EFA\u8BAE\u4F60\u5728\u751F\u4EA7\u73AF\u5883\u4E2D\u8BBE\u7F6E\u4E3A0\uFF0C\u66F4\u65B0\u4EE3\u7801\u540E\uFF0C\u518D\u5E73\u6ED1\u91CD\u542FPHP\u548Cweb\u670D\u52A1\u5668\u3002
<span class="token directive"><span class="token keyword">opcache.validate_timestamps=0</span></span>

<span class="token punctuation">;</span>\u5F00\u542FOpcache File Cache(\u5B9E\u9A8C\u6027), \u901A\u8FC7\u5F00\u542F\u8FD9\u4E2A, \u6211\u4EEC\u53EF\u4EE5\u8BA9Opcache\u628Aopcode\u7F13\u5B58\u7F13\u5B58\u5230\u5916\u90E8\u6587\u4EF6\u4E2D, \u5BF9\u4E8E\u4E00\u4E9B\u811A\u672C, \u4F1A\u6709\u5F88\u660E\u663E\u7684\u6027\u80FD\u63D0\u5347.
\u8FD9\u6837PHP\u5C31\u4F1A\u5728/tmp\u76EE\u5F55\u4E0BCache\u4E00\u4E9BOpcode\u7684\u4E8C\u8FDB\u5236\u5BFC\u51FA\u6587\u4EF6, \u53EF\u4EE5\u8DE8PHP\u751F\u547D\u5468\u671F\u5B58\u5728.
opcache.file_cache=/tmp
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="thinkphp-\u5F00\u542F\u4E8C\u7EA7\u57DF\u540D" tabindex="-1"><a class="header-anchor" href="#thinkphp-\u5F00\u542F\u4E8C\u7EA7\u57DF\u540D" aria-hidden="true">#</a> ThinkPHP \u5F00\u542F\u4E8C\u7EA7\u57DF\u540D</h2><p>\u5728<code>nginx</code>\u5BF9\u5E94\u7684\u8BBE\u7F6E\u7684<code>php\u7684\u9879\u76EE\u7684conf</code>\u6587\u4EF6\u52A0\u4E0A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">if</span> (!-e <span class="token variable">$request_filename</span>)</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">rewrite</span>  ^(.*)$  /index.php?s=<span class="token variable">$1</span>  last</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">break</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F00\u542F\u4E8C\u7EA7\u57DF\u540D</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> /youdomain/</span> <span class="token punctuation">{</span>
  <span class="token directive"><span class="token keyword">if</span> (!-e <span class="token variable">$request_filename</span>)</span><span class="token punctuation">{</span>
       <span class="token directive"><span class="token keyword">rewrite</span>  ^/youdomain/(.*)$  /youdomain/index.php?s=<span class="token variable">$1</span>  last</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B8C\u6574\u5185\u5BB9</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
  <span class="token comment"># \u76D1\u542C\u7AEF\u53E3\u53F7</span>
  <span class="token directive"><span class="token keyword">listen</span> <span class="token number">80</span></span><span class="token punctuation">;</span>
  <span class="token comment"># \u57DF\u540D</span>
  <span class="token directive"><span class="token keyword">server_name</span> www.php7.tt</span><span class="token punctuation">;</span>
  <span class="token comment"># \u7F51\u7AD9\u76EE\u5F55</span>
  <span class="token directive"><span class="token keyword">root</span> /home/web/php7/</span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">location</span> /</span><span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">ssi</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">ssi_silent_errors</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">index</span> index.php index.html index.htm</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token directive"><span class="token keyword">location</span> ~ \\.php$</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">fastcgi_pass</span>   127.0.0.1:9000</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">fastcgi_index</span>  index.php</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">fastcgi_param</span>  SCRIPT_FILENAME  <span class="token variable">$document_root</span><span class="token variable">$fastcgi_script_name</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">include</span>        fastcgi_params</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment"># nginx \u5F00\u542Frewrite</span>
  <span class="token directive"><span class="token keyword">if</span> (!-e <span class="token variable">$request_filename</span>)</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">rewrite</span>  ^(.*)$  /index.php?s=<span class="token variable">$1</span>  last</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">break</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment"># nginx\u5F00\u542F\u4E8C\u7EA7\u57DF\u540D</span>
  <span class="token directive"><span class="token keyword">location</span> /youdomain/</span> <span class="token punctuation">{</span>
      <span class="token directive"><span class="token keyword">if</span> (!-e <span class="token variable">$request_filename</span>)</span><span class="token punctuation">{</span>
             <span class="token directive"><span class="token keyword">rewrite</span>  ^/youdomain/(.*)$  /youdomain/index.php?s=<span class="token variable">$1</span>  last</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token directive"><span class="token keyword">access_log</span> /usr/local/nginx/logs/php7_access.log</span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">error_log</span> /usr/local/nginx/logs/php7_error.log</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6216\u8005\u5728<code>ThinkPHP</code>\u7684<code>public</code>\u76EE\u5F55\u4E0B\u7684<code>htaccess.conf</code>\u6587\u4EF6\u91CC\u8BBE\u7F6E</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token comment">#\u5F00\u542F\u538B\u7F29</span>
<span class="token directive"><span class="token keyword">gzip</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">gzip_buffers</span> <span class="token number">32</span> <span class="token number">4K</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">gzip_comp_level</span> <span class="token number">6</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">gzip_min_length</span> <span class="token number">200</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">gzip_types</span> text/css  application/x-javascript</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">gzip_vary</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">if</span> (!-e <span class="token variable">$request_filename</span>)</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">rewrite</span>  ^(.*)$  /index.php?s=<span class="token variable">$1</span>  last</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">break</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token directive"><span class="token keyword">location</span> /youdomain/</span> <span class="token punctuation">{</span>
  <span class="token directive"><span class="token keyword">if</span> (!-e <span class="token variable">$request_filename</span>)</span><span class="token punctuation">{</span>
       <span class="token directive"><span class="token keyword">rewrite</span>  ^/youdomain/(.*)$  /youdomain/index.php?s=<span class="token variable">$1</span>  last</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
    <span class="token comment">#\u8BBE\u7F6E\u7F13\u5B58</span>
    <span class="token directive"><span class="token keyword">location</span> ~ .*\\.(gif|jpg|jpeg|png|bmp|swf)$</span>
    <span class="token punctuation">{</span>
      <span class="token directive"><span class="token keyword">expires</span>      <span class="token number">30d</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token directive"><span class="token keyword">location</span> ~ .*\\.(js|css)?$</span>
    <span class="token punctuation">{</span>
      <span class="token directive"><span class="token keyword">expires</span>      <span class="token number">1h</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u8C03\u6574-php7-4-\u914D\u7F6E\u7684\u4E00\u4E9B\u5185\u5BB9" tabindex="-1"><a class="header-anchor" href="#\u8C03\u6574-php7-4-\u914D\u7F6E\u7684\u4E00\u4E9B\u5185\u5BB9" aria-hidden="true">#</a> \u8C03\u6574 PHP7.4 \u914D\u7F6E\u7684\u4E00\u4E9B\u5185\u5BB9</h2><h3 id="pdo-mysql-1" tabindex="-1"><a class="header-anchor" href="#pdo-mysql-1" aria-hidden="true">#</a> pdo_mysql</h3><table><thead><tr><th>PDO Driver for MySQL</th><th>enabled</th></tr></thead><tbody><tr><td>Client API version</td><td>mysqlnd 7.4.2</td></tr></tbody></table><table><thead><tr><th>Directive</th><th>Local Value</th><th>Master Value</th></tr></thead><tbody><tr><td>pdo_mysql.default_socket</td><td>/tmp/mysql.sock</td><td>/tmp/mysql.sock</td></tr></tbody></table><p>\u53EF\u4EE5\u770B\u5230\u5B83\u7684<code>socket</code>\u6587\u4EF6\u662F\u5728<code>/tmp/mysql.sock</code>\u4E0B\uFF0C\u6211\u4EEC\u9700\u8981\u914D\u7F6E\u4EE5\u4E0B<code>php.ini</code>\u91CC\u7684\u5B58\u50A8\u4F4D\u7F6E</p><p>\u4FEE\u6539<code>php.ini</code></p><div class="language-ini ext-ini line-numbers-mode"><pre class="language-ini"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Pdo_mysql</span><span class="token punctuation">]</span></span>
<span class="token comment">; Default socket name for local MySQL connects.  If empty, uses the built-in</span>
<span class="token comment">; MySQL defaults.</span>
<span class="token key attr-name">pdo_mysql.default_socket</span><span class="token punctuation">=</span><span class="token value attr-value">/usr/local/mysql/tmp/mysql.sock</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7136\u540E\u91CD\u542F<code>php-fpm7</code></p><h2 id="php7-4-\u5B89\u88C5-swoole-\u6269\u5C55" tabindex="-1"><a class="header-anchor" href="#php7-4-\u5B89\u88C5-swoole-\u6269\u5C55" aria-hidden="true">#</a> PHP7.4 \u5B89\u88C5 swoole \u6269\u5C55</h2><p>\u8FD9\u91CC swoole \u7684\u7248\u672C\u6211\u9009\u7684\u662F<code>4.4.15</code>\uFF0C\u53CD\u6B63\u53EA\u8981\u662F<code>x86</code>\u67B6\u6784\u7684 LInux \u73AF\u5883\u4E0B\u5B89\u88C5\uFF0C\u4E00\u822C\u90FD\u6CA1\u5565\u6BDB\u75C5\u4E86\u3002</p><p>\u8FD8\u662F\u8001\u6837\u5B50\uFF0C\u4E0B\u8F7D\u6E90\u7801\u5305\u4E0A\u4F20\u5230<code>/usr/local/src</code>\u76EE\u5F55\u4E0B\u5E76\u89E3\u538B</p><p>\u7136\u540E\u4F7F\u7528<code>phpize</code>\u6253\u5305</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 swoole-4.4.15<span class="token punctuation">]</span><span class="token comment"># /usr/local/php7/bin/phpize</span>
Configuring for:
PHP Api Version:         <span class="token number">20190902</span>
Zend Module Api No:      <span class="token number">20190902</span>
Zend Extension Api No:   <span class="token number">320190902</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 swoole-4.4.15<span class="token punctuation">]</span><span class="token comment"># ./configure --enable-openssl --enable-http2 --enable-sockets --enable-mysqlnd --with-php-config=/usr/local/php7/bin/php-config</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u7136\u540E\u5C31\u662F\u7F16\u8BD1\u5B89\u88C5</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5B89\u88C5\u5B8C\u4E86\uFF0C\u6211\u4EEC\u53EF\u4EE5\u9009\u62E9<code>make test</code>\u4E00\u4E0B\u770B\u770B\u3002</p><p>\u7136\u540E\u5C31\u662F\u5C06<code>swoole.so</code>\u6269\u5C55\u52A0\u5165\u5230<code>php.ini</code>\u6587\u4EF6\u4E2D</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code> <span class="token punctuation">[</span>root@10 swoole-4.4.15<span class="token punctuation">]</span><span class="token comment"># vim /usr/local/php7/etc/php.ini</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-ini ext-ini line-numbers-mode"><pre class="language-ini"><code><span class="token comment"># \u6211\u4EEC\u53EF\u4E0Ei\u627E\u5230 zip.so \u5728\u4E0B\u9762\u6DFB\u52A0\u4E00\u4E0B\u5373\u53EF</span>

<span class="token key attr-name">extension</span><span class="token punctuation">=</span><span class="token value attr-value">swoole.so</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u68C0\u6D4B</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 swoole-4.4.15<span class="token punctuation">]</span><span class="token comment"># /usr/local/php7/bin/php --ri swoole</span>


swoole

Swoole <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
Author <span class="token operator">=</span><span class="token operator">&gt;</span> Swoole Team <span class="token operator">&lt;</span>team@swoole.com<span class="token operator">&gt;</span>
Version <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">4.4</span>.15
Built <span class="token operator">=</span><span class="token operator">&gt;</span> Aug <span class="token number">14</span> <span class="token number">2022</span> <span class="token number">18</span>:15:59
coroutine <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
epoll <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
eventfd <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
signalfd <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
cpu_affinity <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
spinlock <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
rwlock <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
sockets <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
openssl <span class="token operator">=</span><span class="token operator">&gt;</span> OpenSSL <span class="token number">1.0</span>.2k-fips  <span class="token number">26</span> Jan <span class="token number">2017</span>
http2 <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
pcre <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
zlib <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">1.2</span>.7
mutex_timedlock <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
pthread_barrier <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
futex <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
mysqlnd <span class="token operator">=</span><span class="token operator">&gt;</span> enabled
async_redis <span class="token operator">=</span><span class="token operator">&gt;</span> enabled

Directive <span class="token operator">=</span><span class="token operator">&gt;</span> Local Value <span class="token operator">=</span><span class="token operator">&gt;</span> Master Value
swoole.enable_coroutine <span class="token operator">=</span><span class="token operator">&gt;</span> On <span class="token operator">=</span><span class="token operator">&gt;</span> On
swoole.enable_library <span class="token operator">=</span><span class="token operator">&gt;</span> On <span class="token operator">=</span><span class="token operator">&gt;</span> On
swoole.enable_preemptive_scheduler <span class="token operator">=</span><span class="token operator">&gt;</span> Off <span class="token operator">=</span><span class="token operator">&gt;</span> Off
swoole.display_errors <span class="token operator">=</span><span class="token operator">&gt;</span> On <span class="token operator">=</span><span class="token operator">&gt;</span> On
swoole.use_shortname <span class="token operator">=</span><span class="token operator">&gt;</span> On <span class="token operator">=</span><span class="token operator">&gt;</span> On
swoole.unixsock_buffer_size <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">8388608</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">8388608</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u5B89\u88C5-composer" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5-composer" aria-hidden="true">#</a> \u5B89\u88C5 composer</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 src<span class="token punctuation">]</span><span class="token comment"># curl -sS https://getcomposer.org/installer | /usr/local/php7/bin/php</span>
All settings correct <span class="token keyword">for</span> using Composer
Downloading<span class="token punctuation">..</span>.

Composer <span class="token punctuation">(</span>version <span class="token number">2.3</span>.10<span class="token punctuation">)</span> successfully installed to: /usr/local/src/composer.phar
Use it: php composer.phar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u79FB\u52A8\u5230<code>/usr/local/bin</code>\u4E0B\uFF0C\u5E76\u4E3A<code>php7</code>\u6DFB\u52A0\u8F6F\u94FE\u63A5</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@10 src<span class="token punctuation">]</span><span class="token comment"># mv composer.phar /usr/local/bin/composer</span>
<span class="token punctuation">[</span>root@10 src<span class="token punctuation">]</span><span class="token comment"># ln -s /usr/local/php7/bin/php /usr/local/bin/php</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u914D\u7F6E\u963F\u91CC\u4E91\u955C\u50CF</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">composer</span> config -g repo.packagist <span class="token function">composer</span> https://mirrors.aliyun.com/composer/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5982\u679C\u6709\u5B89\u88C5\u4E00\u4E9B<code>swoole</code>\u6846\u67B6\uFF0C\u53EF\u80FD\u4F1A\u9700\u8981\u5F00\u653E<code>9501</code>\u7AEF\u53E3\u6216\u522B\u7684\u7AEF\u53E3</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>firewall-cmd --zone<span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">9501</span>/tcp --permanent
systemctl restart firewalld.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,169),l=[i];function c(o,t){return s(),a("div",null,l)}var u=n(p,[["render",c],["__file","linux-install-php-swoole.html.vue"]]);export{u as default};
