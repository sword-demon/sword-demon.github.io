import{_ as c}from"./plugin-vue_export-helper.21dcd24c.js";import{r as o,o as i,c as t,a as n,b as l,e,d as s}from"./app.0e0aab5a.js";const d={},p=e(`<h1 id="c-\u7F16\u8BD1\u3001\u94FE\u63A5\u8FC7\u7A0B" tabindex="-1"><a class="header-anchor" href="#c-\u7F16\u8BD1\u3001\u94FE\u63A5\u8FC7\u7A0B" aria-hidden="true">#</a> C \u7F16\u8BD1\u3001\u94FE\u63A5\u8FC7\u7A0B</h1><h2 id="extern\u548Cstatic\u7684\u4F5C\u7528" tabindex="-1"><a class="header-anchor" href="#extern\u548Cstatic\u7684\u4F5C\u7528" aria-hidden="true">#</a> <code>extern</code>\u548C<code>static</code>\u7684\u4F5C\u7528</h2><h3 id="static" tabindex="-1"><a class="header-anchor" href="#static" aria-hidden="true">#</a> <code>static</code></h3><h4 id="_1-\u4FEE\u9970\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#_1-\u4FEE\u9970\u51FD\u6570" aria-hidden="true">#</a> 1. \u4FEE\u9970\u51FD\u6570</h4><blockquote><p><code>static</code>\u4FEE\u9970\u51FD\u6570\u65F6\u8868\u793A\uFF0C\u8BE5\u51FD\u6570\u53EA\u5728\u672C\u6587\u4EF6\u6709\u6548\uFF0C\u4E5F\u5C31\u662F\u53EA\u80FD\u88AB\u672C\u6587\u4EF6\u7684\u5176\u4ED6\u51FD\u6570\u8C03\uFF0C\u5176\u4ED6\u6587\u4EF6\u4E0D\u80FD\u8C03\u7528(\u5F15\u7528)\u3002</p></blockquote><p><code>a.c</code></p><div class="language-c ext-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">func1</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">func</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u4E0D\u80FD\u5F15\u7528</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>b.c</code></p><div class="language-c ext-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span> stu_num<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// .....</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>static</code>\u5C31\u50CF\u662F\u4E00\u628A\u9501\uFF0C\u628A\u51FD\u6570<code>func</code>\u7684\u6709\u6548\u8303\u56F4\u9501\u5728\u4E86<code>b.c</code>\u5176\u4ED6<code>.c</code>\u770B\u4E0D\u89C1\u8FD9\u4E2A\u51FD\u6570 \uFF0C\u81EA\u7136\u65E0\u6CD5\u8C03\u7528\u3002</p><div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p><p>\u56E0\u4E3A<code>static</code>\u5C06\u51FD\u6570\u540D\u8FD9\u4E2A\u7B26\u53F7\u53D8\u6210\u4E86\u201C\u672C\u5730\u7B26\u53F7\u201D\uFF0C\u201C\u672C\u5730\u7B26\u53F7\u201D\u53EA\u5728\u672C\u6587\u4EF6\u53EF\u89C1\uFF0C\u5176\u4ED6\u6587\u4EF6\u662F\u770B\u4E0D\u89C1\u7684\u3002</p></div><h4 id="_2-\u4FEE\u9970\u53D8\u91CF" tabindex="-1"><a class="header-anchor" href="#_2-\u4FEE\u9970\u53D8\u91CF" aria-hidden="true">#</a> 2. \u4FEE\u9970\u53D8\u91CF</h4><ol><li><p><code>static</code>\u4FEE\u9970\u5C40\u90E8\u53D8\u91CF</p><blockquote><p>\u6539\u53D8\u7684\u662F\u5C40\u90E8\u53D8\u91CF\u7684\u5B58\u50A8\u4F4D\u7F6E\uFF0C\u4ECE\u6808\u53D8\u4E3A\u9759\u6001\u5B58\u50A8\u533A\uFF0C\u4E0E\u201C\u672C\u5730\u7B26\u53F7\u201D\u4EC0\u4E48\u7684\u6CA1\u6709\u5173\u7CFB</p></blockquote><div class="language-c ext-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span> va<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> a<span class="token punctuation">;</span>
    <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>

    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>a\u3001b</code>\u4E3A\u201C\u81EA\u52A8\u5C40\u90E8\u53D8\u91CF\u201D\uFF0C\u7A7A\u95F4\u5F00\u8F9F\u4E8E\u6808\u4E2D\u3002</p><p>\u52A0\u4E86<code>static</code>\u4FEE\u9970</p><div class="language-c ext-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span> va<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">int</span> a<span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>

    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>a\u3001b</code>\u53D8\u4E3A\u4E86\u201C\u9759\u6001\u5C40\u90E8\u53D8\u91CF\u201D\uFF0C<code>a\u3001b</code>\u7684\u7A7A\u95F4\u5F00\u8F9F\u4E8E\u9759\u6001\u5B58\u50A8\u533A\uFF0C\u800C\u4E0D\u518D\u662F\u6808\u3002</p><ul><li>\u5982\u679C\u6CA1\u6709\u521D\u59CB\u5316\u7684\u8BDD\uFF0C\u6BD4\u5982<code>a</code>\u5C31\u6CA1\u6709\u521D\u59CB\u5316\uFF0C<code>a</code>\u7684\u7A7A\u95F4\u5728\u9759\u6001\u533A\u4E2D\u7684<code>.bss</code>\u533A</li><li>\u5982\u679C\u6709\u521D\u59CB\u5316\u7684\u8BDD\uFF0C\u6BD4\u5982<code>b</code>\u5C31\u6709\u521D\u59CB\u5316\uFF0C<code>b</code>\u7684\u7A7A\u95F4\u5728\u9759\u6001\u533A\u4E2D\u7684<code>.data</code>\u533A</li></ul></li><li><p><code>static</code>\u4FEE\u9970\u5168\u5C40\u53D8\u91CF</p><blockquote><p>\u4E0E\u4FEE\u9970\u51FD\u6570\u4E00\u6837\uFF0C\u8BA9\u5168\u5C40\u53D8\u91CF\u53EA\u5728\u672C\u6587\u4EF6\u6709\u6548\uFF0C\u5176\u5B83\u6587\u4EF6\u65E0\u6CD5\u5F15\u7528\u3002</p><p><code>static</code>\u4FEE\u9970\u5168\u5C40\u53D8\u91CF\u7684\u65F6\u5019\uFF0C\u4E0E\u5168\u5C40\u53D8\u91CF\u7684\u5B58\u50A8\u4F4D\u7F6E\u65E0\u5173\uFF0C\u5168\u5C40\u53D8\u91CF\u7684\u7A7A\u95F4\u672C\u6765\u5C31\u662F\u5728\u9759\u6001\u5B58\u50A8\u533A\uFF0C\u52A0\u4E0D\u52A0<code>static</code>\u5E76\u4E0D\u80FD\u6539\u53D8\u5B58\u50A8\u4F4D\u7F6E\uFF0C<code>static</code>\u53EA\u662F\u6539\u53D8\u4E86\u7B26\u53F7\u7684\u5C5E\u6027\uFF0C\u53D8\u6210\u4E86\u672C\u5730\u7B26\u53F7\u3002</p></blockquote></li></ol><h3 id="extern" tabindex="-1"><a class="header-anchor" href="#extern" aria-hidden="true">#</a> <code>extern</code></h3><h4 id="_1-\u4FEE\u9970\u51FD\u6570-1" tabindex="-1"><a class="header-anchor" href="#_1-\u4FEE\u9970\u51FD\u6570-1" aria-hidden="true">#</a> 1. \u4FEE\u9970\u51FD\u6570</h4><blockquote><p><code>extern</code>\u4FEE\u9970\u7684\u51FD\u6570\uFF0C\u8868\u793A\u9664\u4E86\u80FD\u88AB\u672C\u6587\u4EF6\u5F15\u7528\u5916\uFF0C\u8FD8\u53EF\u4EE5\u88AB\u5176\u4ED6\u7684\u6587\u4EF6\u5F15\u7528\uFF0C\u5728\u5176\u4ED6\u6587\u4EF6\u4E2D\u662F\u53EF\u89C1\u7684\uFF0C\u53EA\u4E0D\u8FC7\u5728\u5176\u4ED6\u6587\u4EF6\u4E2D\u5F15\u7528\u65F6\uFF0C\u9700\u8981\u505A\u58F0\u660E\u3002\u521A\u597D\u4E0E<code>static</code>\u76F8\u53CD\u3002</p></blockquote><p><code>a.c</code></p><div class="language-c ext-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">extern</span> <span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span> stu_num<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">extern</span> <span class="token keyword">int</span> <span class="token function">a_fun</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>b.c</code></p><div class="language-c ext-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">extern</span> <span class="token keyword">void</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token keyword">int</span> stu_num<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E8B\u5B9E\u4E0A\uFF0C<code>extern</code>\u4E0D\u9700\u8981\u660E\u786E\u5199\u51FA\uFF0C\u56E0\u4E3A\u9ED8\u8BA4\u662F<code>extern</code>\u7684\uFF0C\u4E5F\u5C31\u662F\u8BF4\u5B9A\u4E49\u548C\u58F0\u660E\u53EF\u4EE5\u5199\u51FA\u5982\u4E0B\u683C\u5F0F\uFF1A</p><div class="language-c ext-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span> stu_num<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">a_fun</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-c ext-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">void</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token keyword">int</span> stu_num<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u7F16\u8BD1\u8FC7\u7A0B" tabindex="-1"><a class="header-anchor" href="#\u7F16\u8BD1\u8FC7\u7A0B" aria-hidden="true">#</a> \u7F16\u8BD1\u8FC7\u7A0B</h2><p>\u7F16\u8BD1\u539F\u7406\u53EF\u4EE5\u53BB\u770B\u4E00\u672C\u4E66\uFF1A\u300A\u73B0\u4EE3\u7F16\u8BD1\u539F\u7406\u300B\uFF0C\u6709\u8BCD\u6CD5\u5206\u6790\u3001\u8BED\u6CD5\u5206\u6790\u3001\u4F18\u5316\u3001\u751F\u6210\u4E2D\u95F4\u4EE3\u7801</p><div class="language-c ext-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;stdio.h&quot;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;hello world\\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6E90\u7801\u6587\u4EF6 --&gt; gcc \u5904\u7406 --&gt; <code>elf</code>\u53EF\u6267\u884C\u6587\u4EF6</p><p>\u6709\u8FD9\u6837\u7684\u4E00\u4E2A\u8FC7\u7A0B\uFF1A\u9884\u5904\u7406\u3001\u7F16\u8BD1\u3001\u6C47\u7F16\u3001\u94FE\u63A5</p>`,28),u=s("\u4F7F\u7528"),r=n("code",null,"gcc",-1),m=s("\u547D\u4EE4\u6587\u6863"),v={href:"https://man7.org/linux/man-pages/man1/gcc.1.html",target:"_blank",rel:"noopener noreferrer"},b=s("https://man7.org/linux/man-pages/man1/gcc.1.html"),k=e(`<h3 id="\u9884\u5904\u7406-gcc-e\u64CD\u4F5C-\u4F7F\u7528\u9884\u5904\u7406\u5668" tabindex="-1"><a class="header-anchor" href="#\u9884\u5904\u7406-gcc-e\u64CD\u4F5C-\u4F7F\u7528\u9884\u5904\u7406\u5668" aria-hidden="true">#</a> \u9884\u5904\u7406\uFF1A<code>gcc -E</code>\u64CD\u4F5C,\u4F7F\u7528\u9884\u5904\u7406\u5668</h3><blockquote><p>-E Stop after the preprocessing stage; do not run the compiler proper. The output is in the form of preprocessed source code, which is sent to the standard output.</p></blockquote><p>\u9884\u5904\u7406\u540E\u7684\u6587\u4EF6\u4E5F\u662F\u4E00\u4E2A\u6E90\u7801\u6587\u4EF6</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>gcc -E demo1.c -o demo1.i

<span class="token comment"># \u67E5\u770B\u6587\u4EF6\u5185\u5BB9</span>
<span class="token function">cat</span> demo1.i
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F1A\u53D1\u73B0\u6709\u5F88\u591A\u5934\u6587\u4EF6\u548C\u4E00\u4E9B\u4EE3\u7801\u63D2\u5165\u8FDB\u6765\u3002</p><h3 id="\u7F16\u8BD1-gcc-s-\u4F7F\u7528\u7F16\u8BD1\u5668" tabindex="-1"><a class="header-anchor" href="#\u7F16\u8BD1-gcc-s-\u4F7F\u7528\u7F16\u8BD1\u5668" aria-hidden="true">#</a> \u7F16\u8BD1\uFF1A<code>gcc -S</code>\uFF0C\u4F7F\u7528\u7F16\u8BD1\u5668</h3><blockquote><p>-S Stop after the stage of compilation proper; do not assemble. The output is in the form of an assembler code file for each non-assembler input file specified.</p><p>\u200B</p><p>\u200B By default, the assembler file name for a source file is made \u200B by replacing the suffix .c, .i, etc., with .s.</p><p>\u200B Input files that don&#39;t require compilation are ignored.</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>gcc -S demo1.i -o demo1.s

<span class="token comment"># \u751F\u6210\u6C47\u7F16\u4EE3\u7801\u6587\u4EF6</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>\u279C <span class="token function">file</span> demo1.s
demo1.s: assembler <span class="token builtin class-name">source</span> text, ASCII text
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u6C47\u7F16-gcc-c-\u4F7F\u7528\u6C47\u7F16\u5668-\u5C06\u6C47\u7F16\u6E90\u7801\u8F6C\u6362\u4E3A\u673A\u5668\u6307\u4EE4" tabindex="-1"><a class="header-anchor" href="#\u6C47\u7F16-gcc-c-\u4F7F\u7528\u6C47\u7F16\u5668-\u5C06\u6C47\u7F16\u6E90\u7801\u8F6C\u6362\u4E3A\u673A\u5668\u6307\u4EE4" aria-hidden="true">#</a> \u6C47\u7F16\uFF1A<code>gcc -c</code>\uFF0C\u4F7F\u7528\u6C47\u7F16\u5668\uFF0C\u5C06\u6C47\u7F16\u6E90\u7801\u8F6C\u6362\u4E3A\u673A\u5668\u6307\u4EE4</h3><blockquote><p>-c Compile or assemble the source files, but do not link. The linking stage simply is not done. The ultimate output is in the form of an object file for each source file.</p><p>\u200B By default, the object file name for a source file is made by \u200B replacing the suffix .c, .i, .s, etc., with .o.</p><p>\u200B Unrecognized input files, not requiring compilation or</p><p>\u200B assembly, are ignored.</p></blockquote><p>\u7FFB\u8BD1\uFF1A</p><blockquote><p>\u7F16\u8BD1\u6216\u7EC4\u88C5\u6E90\u6587\u4EF6\uFF0C\u4F46\u4E0D\u8981\u94FE\u63A5\u7684 \u8FDE\u7CFB\u9636\u6BB5\u8FD8\u6CA1\u6709\u5B8C\u6210\u3002\u6700\u7EC8\u7684\u8F93\u51FA\u662F in \u6BCF\u4E2A\u6E90\u6587\u4EF6\u7684\u76EE\u6807\u6587\u4EF6\u7684\u5F62\u5F0F\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u6E90\u6587\u4EF6\u7684\u5BF9\u8C61\u6587\u4EF6\u540D\u7531 \u5C06\u540E\u7F00.c\uFF0C .i\uFF0C .s \u7B49\u66FF\u6362\u4E3A.o\u3002</p><p>\u65E0\u6CD5\u8BC6\u522B\u7684\u8F93\u5165\u6587\u4EF6\uFF0C\u4E0D\u9700\u8981\u7F16\u8BD1\u6216</p><p>\u5927\u4F1A,\u5C06\u88AB\u5FFD\u7565\u3002</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>gcc -c demo1.s -o demo1.o

\u279C <span class="token function">file</span> demo1.o
demo1.o: Mach-O <span class="token number">64</span>-bit object arm64

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6211\u8FD9\u8FB9\u7528\u7684\u662F<code>mac unix</code>\u7F16\u8BD1\u7684\uFF0C\u5982\u679C\u662F linux \u5219\u662F<code>elf</code>\u53EF\u91CD\u5B9A\u5411\u6587\u4EF6</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">file</span> demo1.o
demo1.o: ELF <span class="token number">64</span>-bit LSB relocatable, x86-64, version <span class="token number">1</span> <span class="token punctuation">(</span>SYSV<span class="token punctuation">)</span>, not stripped
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7ECF\u8FC7\u4E0A\u8FF0 3 \u4E2A\u64CD\u4F5C\u4E4B\u540E\u751F\u6210\u7684\u6587\u4EF6\u662F<code>ELF</code>\u53EF\u91CD\u5B9A\u5411\u6587\u4EF6\uFF0C\u987A\u5E26\u4ECB\u7ECD\u4E00\u4E0B<code>elf</code>\u6587\u4EF6\u7684\u7C7B\u578B</p><ul><li>REL(Relocatable file)</li><li>EXEC(Executable file)</li></ul><h3 id="\u94FE\u63A5-\u4F7F\u7528\u94FE\u63A5\u5668" tabindex="-1"><a class="header-anchor" href="#\u94FE\u63A5-\u4F7F\u7528\u94FE\u63A5\u5668" aria-hidden="true">#</a> \u94FE\u63A5\uFF1A\u4F7F\u7528\u94FE\u63A5\u5668</h3><blockquote><p>\u4E3B\u8981\u529F\u80FD\uFF1A\u628A\u5404\u4E2A\u6A21\u5757\u94FE\u63A5\u8D77\u6765\u7EC4\u7EC7\u6210\u4E3A\u53EF\u6267\u884C\u6587\u4EF6</p><p>\u5982\u679C\u662F\u76F4\u63A5<code>gcc demo1.c</code>\uFF0C\u4F1A\u76F4\u63A5\u628A\u4F60\u4E0A\u8FF0\u51E0\u4E2A\u8FC7\u7A0B\u90FD\u505A\u4E86\u76F4\u63A5\u751F\u6210\u53EF\u6267\u884C\u6587\u4EF6\uFF0C\u5305\u62EC\u73B0\u5728\u7684\u7F16\u8F91\u5668\u70B9\u51FB\u7684<code>Run</code>\u8FD0\u884C\u4E5F\u662F\u8FD9\u6837\u7684\u4E00\u4E2A\u8FC7\u7A0B\u3002</p></blockquote><p>\u4F8B\u5982\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>a.c b.c \u6E90\u7801\u6587\u4EF6
a.o b.o \u76EE\u6807\u6587\u4EF6
a.o b.o \u4E00\u4E9B\u5E93\u6587\u4EF6[\u8FD0\u884C\u5E93]
\u6700\u540E\u4E00\u8D77\u94FE\u63A5\u5F97\u5230\u53EF\u6267\u884C\u6587\u4EF6
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E3A\u4EC0\u4E48\u8981\u94FE\u63A5\uFF1A\u56E0\u4E3A\u6211\u4EEC\u67D0\u4E9B\u6587\u4EF6\u91CC\u7684\uFF0C\u4F7F\u7528\u7684\u6BD4\u5982\uFF1A<code>printf</code>\u5C31\u662F\u6807\u51C6\u5E93\u63D0\u4F9B\u7684\uFF0C\u94FE\u63A5\u7684\u65F6\u5019\u4F1A\u53BB\u94FE\u63A5\u5B83\u6240\u5728\u7684\u5E93\u6587\u4EF6\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>gcc demo1.o -o demo1

\u279C <span class="token function">file</span> demo1
demo1: Mach-O <span class="token number">64</span>-bit executable arm64

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u73B0\u5728\u8FD9\u4E2A\u6587\u4EF6\u5C31\u662F\u4E00\u4E2A\u53EF\u6267\u884C\u6587\u4EF6\u3002</p><p>\u76F4\u63A5\u6267\u884C</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>./demo1
hello world
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7B26\u53F7\uFF1A<code>Symbol</code></p><blockquote><p>\u5728\u94FE\u63A5\u4E2D\uFF0C\u628A\u51FD\u6570\u7684\u540D\u5B57\uFF0C\u53D8\u91CF\u3010\u5168\u5C40\u53D8\u91CF\u3011\u7684\u540D\u5B57\u90FD\u79F0\u4E3A\u7B26\u53F7</p></blockquote><p>\u5728\u5F00\u53D1\u5927\u578B\u9879\u76EE\u65F6\uFF0C\u4F1A\u628A\u7CFB\u7EDF\u62C6\u5206\u6210\u5404\u4E2A\u6A21\u5757\uFF0C\u53BB\u5F00\u53D1\u7F16\u5199\uFF0C\u5728\u7F16\u8BD1\u65F6\uFF0C\u662F\u5355\u72EC\u7F16\u8BD1\u6210\u5404\u4E2A\u76EE\u6807\u6587\u4EF6\u5F97\u5230<code>.o</code>\u6587\u4EF6\uFF0C\u8FD9\u4E9B\u6A21\u5757\u4F1A\u6D89\u53CA\u5230\u51FD\u6570\u4EE5\u53CA\u53D8\u91CF\u7684\u8C03\u7528\u3010\u8BBF\u95EE\u3011\uFF0C\u5982\u679C<code>a.c \u8C03\u7528foo\u51FD\u6570</code>\u6CA1\u6709\u58F0\u660E\u4E5F\u6CA1\u6709\u5B9A\u4E49\uFF0C\u5728<code>b.c\u91CD\u5B9A\u4E49\u597D\u7684foo\u51FD\u6570</code>\uFF0C\u94FE\u63A5\u5668\u4F1A\u5E2E\u5B83\u53BB\u627E\u5230\u5BF9\u5E94\u7684\u51FD\u6570\u5730\u5740\uFF0C\u5C06\u5404\u4E2A\u6A21\u5757\u94FE\u63A5\u8D77\u6765\u3002</p><p>\u5B9E\u9645\u4E0A\u6211\u4EEC\u53EF\u4EE5\u76F4\u63A5\u4F7F\u7528<code>gcc demo1.c</code>\u751F\u6210<code>demo1</code>\u53EF\u6267\u884C\u6587\u4EF6\uFF0C\u52A0\u4E0A<code>-o</code>\u53EF\u4EE5\u6307\u5B9A\u5BF9\u5E94\u7684\u6587\u4EF6\u540D\u79F0\u3002</p><h3 id="\u6B65\u9AA4\u603B\u7ED3" tabindex="-1"><a class="header-anchor" href="#\u6B65\u9AA4\u603B\u7ED3" aria-hidden="true">#</a> \u6B65\u9AA4\u603B\u7ED3</h3><p>demo.c</p><ol><li><code>gcc -E demo1.c -o demo1.i</code> \u6E90\u7801\u6587\u4EF6</li><li><code>gcc -S demo1.i -0 demo1.o</code> \u6E90\u7801\u6587\u4EF6</li><li><code>gcc -c demo1.s -o demo1.o</code> \u76EE\u6807\u6587\u4EF6 ELF \u683C\u5F0F\u5B58\u50A8</li><li><code>gcc demo1.o -o demo1</code> \u53EF\u6267\u884C\u6587\u4EF6 \u662F\u7A0B\u5E8F ELF \u683C\u5F0F\u5B58\u50A8</li></ol><p>\u76F4\u63A5\u6B65\u9AA4\uFF1A<code>gcc demo1.c</code>\u76F4\u63A5\u5F97\u5230\u53EF\u6267\u884C\u6587\u4EF6\u3002</p><h3 id="\u76EE\u6807\u6587\u4EF6-\u53EF\u6267\u884C\u6587\u4EF6\u91CC\u9762\u7684\u5185\u5BB9" tabindex="-1"><a class="header-anchor" href="#\u76EE\u6807\u6587\u4EF6-\u53EF\u6267\u884C\u6587\u4EF6\u91CC\u9762\u7684\u5185\u5BB9" aria-hidden="true">#</a> \u76EE\u6807\u6587\u4EF6/\u53EF\u6267\u884C\u6587\u4EF6\u91CC\u9762\u7684\u5185\u5BB9</h3><p>\u4F7F\u7528<code>objdump -h</code>\u6765\u67E5\u770B\u76EE\u6807\u6587\u4EF6\u6BB5\u5185\u5BB9</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>objdump -h demo1.o
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/4021/20220503175419.png" alt="section header" loading="lazy"></p><ul><li><code>.bss</code>\uFF1A\u672A\u521D\u59CB\u5316\u6570\u636E\u6BB5</li><li><code>.rodata</code>\uFF1A\u53EA\u8BFB\u6570\u636E\u6BB5</li><li><code>.text</code>\uFF1A\u8868\u793A\u7684\u5C31\u662F\u7A0B\u5E8F\u7684\u4EE3\u7801\u6BB5\u3010\u7A0B\u5E8F\u6307\u4EE4\u3011\uFF0C\u5C31\u662F\u7A0B\u5E8F\u7684\u4EE3\u7801\u4FDD\u5B58\u5728<code>.text</code>\u6BB5\u91CC\u3002</li></ul><blockquote><p>\u7B80\u5355\u603B\u7ED3\uFF1A\u8FD9\u4E2A\u6587\u4EF6\u5185\u5BB9\u5C31\u662F\u7A0B\u5E8F\u6307\u4EE4 + \u7A0B\u5E8F\u6570\u636E\u6784\u6210\u3002</p></blockquote><p>\u4F7F\u7528<code>objdump -s -d demo1.o</code>\u67E5\u770B\u6307\u4EE4\u5185\u5BB9</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>demo1.o:     <span class="token function">file</span> <span class="token function">format</span> elf64-x86-64

Contents of section .text:
 0000 554889e5 bf000000 00e80000 00005dc3  UH<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">]</span>.
Contents of section .rodata:
 0000 68656c6c 6f20776f 726c642c 63206c61  hello world,c la
 0010 6e677561 <span class="token number">67652063</span> 6f726500           nguage core.
Contents of section .comment:
 0000 00474343 3a202847 4e552920 342e382e  .GCC: <span class="token punctuation">(</span>GNU<span class="token punctuation">)</span> <span class="token number">4.8</span>.
 0010 <span class="token number">35203230</span> <span class="token number">31353036</span> <span class="token number">32332028</span> <span class="token number">52656420</span>  <span class="token number">5</span> <span class="token number">20150623</span> <span class="token punctuation">(</span>Red
 0020 <span class="token number">48617420</span> 342e382e 352d3434 <span class="token number">2900</span>      Hat <span class="token number">4.8</span>.5-44<span class="token punctuation">)</span>.
Contents of section .eh_frame:
 0000 <span class="token number">14000000</span> 00000000 017a5200 01781001  <span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.zR<span class="token punctuation">..</span>x<span class="token punctuation">..</span>
 0010 1b0c0708 <span class="token number">90010000</span> 1c000000 1c000000  <span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
 0020 00000000 <span class="token number">10000000</span> 00410e10 8602430d  <span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.A<span class="token punctuation">..</span><span class="token punctuation">..</span>C.
 0030 064b0c07 08000000                    .K<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>

Disassembly of section .text:


<span class="token comment"># \u4E0B\u9762\u662F\u7A0B\u5E8F\u4EE3\u7801\u6BB5\u3010\u7A0B\u5E8F\u6307\u4EE4\u3011\u7684\u5185\u5BB9\u4EE5\u53CA\u5BF9\u5E94\u7684\u6C47\u7F16\u4EE3\u7801</span>
0000000000000000 <span class="token operator">&lt;</span>main<span class="token operator">&gt;</span>:
   <span class="token number">0</span>:	<span class="token number">55</span>                   	push   %rbp
   <span class="token number">1</span>:	<span class="token number">48</span> <span class="token number">89</span> e5             	mov    %rsp,%rbp
   <span class="token number">4</span>:	bf 00 00 00 00       	mov    <span class="token variable">$0x0</span>,%edi
   <span class="token number">9</span>:	e8 00 00 00 00       	callq  e <span class="token operator">&lt;</span>main+0xe<span class="token operator">&gt;</span>
   e:	5d                   	pop    %rbp
   f:	c3                   	retq
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>file format elf64-x86-64\uFF1A\u6587\u4EF6\u7C7B\u578B</li><li><code>554889e5 bf000000 00e80000 00005dc3</code>\uFF1A\u7A0B\u5E8F\u6307\u4EE4\u7684\u5185\u5BB9\u4EE5 16 \u8FDB\u5236\u7684\u5F62\u5F0F\u663E\u793A\u51FA\u6765\uFF0C\u5BF9\u5E94\u7684\u5341\u516D\u8FDB\u5236<code>0x55</code>\u5C31\u662F\u5F00\u5934\u7684\u90E8\u5206\u7684\uFF0C\u5BF9\u5E94\u7684\u662F\u7A0B\u5E8F\u6307\u4EE4\u7684\u5185\u5BB9\uFF0C\u5B83\u53CD\u6C47\u7F16\u540E\u5BF9\u5E94\u7684\u6C47\u7F16\u6307\u4EE4\u662F<code>push %rbp</code></li><li><code>UH............].</code>\uFF1A\u8FD9\u90E8\u5206\u662F\u7A0B\u5E8F\u6307\u4EE4\u5BF9\u5E94\u7684<code>ASCII</code>\u7801\u6587\u672C</li></ul><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/4021/20220505111234.png" alt="\u6C47\u7F16\u6307\u4EE4\u5185\u5BB9" loading="lazy"></p>`,45);function h(g,f){const a=o("ExternalLinkIcon");return i(),t("div",null,[p,n("p",null,[u,r,m,n("a",v,[b,l(a)])]),k])}var _=c(d,[["render",h],["__file","c-ld.html.vue"]]);export{_ as default};
