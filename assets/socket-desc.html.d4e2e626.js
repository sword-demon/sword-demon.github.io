import{_ as i}from"./plugin-vue_export-helper.21dcd24c.js";import{r as a,o as k,c as r,b as t,w as e,a as n,d as s,e as d}from"./app.0e0aab5a.js";const m={},b=n("h2",{id:"\u6982\u8FF0",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u6982\u8FF0","aria-hidden":"true"},"#"),s(" \u6982\u8FF0")],-1),v=n("blockquote",null,[n("p",null,[s("\u7F16\u5199\u7684\u7F51\u7EDC\u5E94\u7528\u7A0B\u5E8F\u4EE5"),n("code",null,"Socket API"),s("\u6765\u5B9E\u73B0\uFF0C\u53D8\u6210\u8BED\u8A00\u867D\u7136\u5404\u4E0D\u76F8\u540C\uFF0C\u4F46\u7CFB\u7EDF\u8C03\u7528 API \u5B8C\u5168\u4E00\u81F4\uFF0C\u53EF\u4EE5\u901A\u8FC7"),n("code",null,"Strace"),s("\u5DE5\u5177\u8DDF\u8E2A\u7CFB\u7EDF\u8C03\u7528\u3002")])],-1),g=d(`<p>\u64CD\u4F5C\u7CFB\u7EDF\u4EE5\u7CFB\u7EDF\u8C03\u7528<code>Socket API</code>\u7F51\u7EDC\u63A5\u53E3\u63D0\u4F9B\u7ED9\u5F15\u7528\u5C42\u7684\u7A0B\u5E8F\u3002</p><ul><li><p>\u6570\u636E\u94FE\u8DEF\u5C42/ARP/RAPP\uFF1A\u4E3B\u8981\u5B8C\u6210 IP \u5730\u5740\u548C\u7269\u7406 MAC \u5730\u5740\u8F6C\u6362</p><blockquote><p>ARP \u8BF7\u6C42\uFF1A\u6570\u636E\u94FE\u8DEF\u5C42\u63A5\u6536\u5230\u4E0A\u5C42\u4F20\u9012\u8FDB\u6765\u7684\u6570\u636E\uFF0C\u9996\u5148\u5148\u62FF\u5230 IP\uFF0C\u518D\u4F7F\u7528 ARP \u7A0B\u5E8F\u53D1\u8D77\u4E00\u4E2A\u8BF7\u6C42\uFF0C\u5B83\u4F1A\u628A\u5BF9\u65B9 IP \u548C\u81EA\u5DF1\u7684 IP\uFF0C\u81EA\u5DF1\u7684\u7269\u7406\u5730\u5740 MAC \u8FDB\u884C\u5C01\u88C5\uFF0C\u5C01\u88C5\u540E\u53D1\u9001\u51FA\u53BB\u3002</p></blockquote><blockquote><p>ARP \u54CD\u5E94\uFF1A\u7F51\u7EDC\u4E0A\u7684\u4E3B\u673A\u63A5\u6536\u5230 ARP \u8BF7\u6C42\u65F6\uFF0C\u4F1A\u5224\u65AD IP \u662F\u4E0D\u662F\u81EA\u5DF1\uFF0C\u7136\u540E\u8FDB\u884C\u54CD\u5E94\uFF0C\u628A\u81EA\u5DF1\u7684 IP\uFF0CMAC \u53D1\u9001\u7ED9\u5BF9\u65B9(\u7F51\u5361\u6765\u53D1\u9001)</p></blockquote><p>\u7136\u540E\u518D\u628A\u6570\u636E\uFF0CMAC \u5730\u5740\u8FDB\u884C\u5C01\u88C5\u4E3A\u6570\u636E\u5E27<code>frame</code>\uFF1A\u76EE\u7684\u7269\u7406\u5730\u5740\u3001\u6E90\u7269\u7406\u5730\u5740\u3001\u6570\u636E\u3002\u3002\u3002</p><p>MAC \u7269\u7406\u5730\u5740\u4E00\u822C\u5B58\u50A8\u518D\u7F51\u5361\u7684\u5B58\u50A8\u5668\u91CC\u3002</p></li><li><p>\u7F51\u7EDC\u5C42 IP\u3001ICMP\uFF1A\u4E3B\u8981\u5C31\u662F\u6570\u636E\u7684\u9009\u8DEF\u548C\u8F6C\u53D1</p><p>ICMP\uFF1A\u7F51\u7EDC\u8FD0\u7EF4\u4EBA\u5458\u7ECF\u5E38\u4F7F\u7528<code>ping,iptables</code>\u7B49\u914D\u7F6E</p><p>\u63A5\u6536\u6570\u636E\u65F6\uFF1A\u5B83\u4F1A\u8FDB\u884C\u5224\u65AD\uFF0C\u6570\u636E\u662F\u4E0D\u662F\u53D1\u7ED9\u81EA\u5DF1\u7684\uFF0C</p><ul><li>\u5982\u679C\u662F\u53D1\u7ED9\u81EA\u5DF1\u7684\uFF0C\u4F1A\u4F20\u9012\u5230\u4F20\u8F93\u5C42\uFF0C\u6700\u7EC8\u4F20\u9012\u5230\u5E94\u7528\u5C42\u7684\u67D0\u4E2A\u5177\u4F53\u8FDB\u7A0B\u3010\u8FDB\u7A0B\u5177\u6709\u8BFB\u5199\u80FD\u529B(\u63A5\u6536\u6570\u636E\u548C\u53D1\u9001\u6570\u636E)\u3011</li><li>\u5982\u679C\u4E0D\u662F\u53D1\u7ED9\u81EA\u5DF1\u65F6\uFF1A\u5B83\u4F1A\u8FDB\u884C\u8F6C\u53D1</li></ul><p>\u53D1\u9001\u6570\u636E\u65F6\uFF1A\u5B83\u4F1A\u8FDB\u884C\u5C01\u88C5\u4E3A IP \u6570\u636E\u5305\uFF0C\u53D1\u9001\u5230\u4F20\u8F93\u5C42</p></li><li><p>\u4F20\u8F93\u5C42</p><p>TCP/UPD</p><p>TCP: \u57FA\u4E8E\u6D41<code>Stream</code>\u7684\u670D\u52A1\uFF0C\u5B57\u8282\u6D41\uFF1B\u7279\u70B9\uFF1A\u8981\u8FDB\u884C\u8FDE\u63A5\u624D\u80FD\u901A\u4FE1\uFF0C\u5FC5\u987B\u662F\u5168\u53CC\u5DE5(\u53CC\u65B9\u90FD\u8FDE\u63A5\u54CD\u5E94\u6210\u529F)\uFF0C\u6709\u5E8F\u7684\u3001\u53EF\u9760\u7684(\u6709\u8D85\u65F6\u91CD\u4F20)\u3002\u5E94\u7528\u7A0B\u5E8F\u5728\u6536\u53D1\u6570\u636E\u65F6\uFF0C\u9700\u8981\u81EA\u5DF1\u53BB\u5224\u65AD\u6570\u636E\u7684\u8FB9\u754C\uFF0C\u56E0\u4E3A\u5B83\u50CF\u6C34\u4E00\u6837\u6CA1\u6709\u8FB9\u754C\u3010\u4F1A\u6D89\u53CA\u5230\u6570\u636E\u7C98\u5305\u3001\u5C11\u5305\u7684\u95EE\u9898\u3011</p><p>UDP\uFF1A\u6570\u636E\u62A5\u670D\u52A1\uFF0C\u4F20\u8F93\u6570\u636E\u662F\u56FA\u5B9A\u7684\uFF0C\u4F46\u662F\u4E0D\u53EF\u9760\u7684\uFF0C<strong>\u53D1\u9001\u65B9\u53D1\u9001\u4E00\u6B21\uFF0C\u63A5\u6536\u65B9\u5FC5\u987B\u53CA\u65F6\u63A5\u6536\uFF0C\u5426\u5219\u6570\u636E\u4E22\u5F03</strong></p></li><li><p>\u5E94\u7528\u5C42\u5728\u5B9E\u73B0\u7684\u65F6\u5019\u662F\u8C03\u7528\u4E0B\u5C42\u63D0\u4F9B\u7684\u63A5\u53E3\uFF0C\u51C6\u786E\u6765\u8BF4\u662F\u4F7F\u7528\u64CD\u4F5C\u7CFB\u7EDF\u63D0\u4F9B\u7684\u4F7F\u7528\u51FD\u6570\uFF1A<code>socket api</code>\uFF1B\u5E94\u7528\u5C42\u5728\u5B9E\u73B0\u7684\u65F6\u5019\uFF0C\u7F16\u7A0B\u8BED\u8A00\u5404\u4E0D\u76F8\u540C\uFF0C\u5199\u6CD5\u4E5F\u4E0D\u4E00\u6837\uFF0C\u4F46\u662F\u5E95\u5C42\u8C03\u7528\u7684\u51FD\u6570\u662F\u4E00\u6837\u7684\u3002</p><ul><li><p>\u5E94\u7528\u5C42\u7684\u6570\u636E\u7ECF\u8FC7\u5C42\u5C42\u5C01\u88C5\uFF0C\u7ECF\u8FC7 TCP \u534F\u8BAE\u5C42\u5C01\u88C5\u65F6\u4E3A<code>TCP\u62A5\u6587\u6BB5</code>\uFF0C\u7ECF\u8FC7\u7F51\u7EDC\u5C42\u53D8\u6210<code>IP\u6570\u636E\u6BB5</code>\uFF0C\u5230\u8FBE\u6570\u636E\u94FE\u8DEF\u5C42\u53D8\u6210\u6570\u636E\u5E27<code>frame</code>\uFF1B</p></li><li><p>\u63A5\u6536\u6570\u636E\u7684\u65F6\u5019\u540C\u6837\u8981\u7ECF\u8FC7\u6BCF\u4E00\u5C42\u7684\u5904\u7406</p></li></ul></li></ul><p>\u200B</p><h2 id="\u4F7F\u7528\u547D\u4EE4\u6765\u89C2\u5BDF\u62A5\u6587" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528\u547D\u4EE4\u6765\u89C2\u5BDF\u62A5\u6587" aria-hidden="true">#</a> \u4F7F\u7528\u547D\u4EE4\u6765\u89C2\u5BDF\u62A5\u6587</h2><blockquote><p>\u53EF\u4EE5\u4F7F\u7528<code>tcpdump</code>\u6765\u6293\u5305\u6765\u67E5\u770B\u6570\u636E\u7ECF\u8FC7 TCP \u5C01\u88C5\u7684\u62A5\u6587\u89C2\u5BDF</p></blockquote><p>\u670D\u52A1\u7AEF\u4EE3\u7801\u6848\u4F8B\uFF1A</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token comment">// \u521B\u5EFA\u6709\u4E00\u4E2Asocket\u6587\u4EF6\u63CF\u8FF0\u7B26</span>
<span class="token variable">$server</span> <span class="token operator">=</span> <span class="token function">socket_create</span><span class="token punctuation">(</span><span class="token constant">AF_INET</span><span class="token punctuation">,</span> <span class="token constant">SOCK_STREAM</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u7ED1\u5B9Aip\u548C\u7AEF\u53E3</span>
<span class="token function">socket_bind</span><span class="token punctuation">(</span><span class="token variable">$server</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;0.0.0.0&quot;</span><span class="token punctuation">,</span> <span class="token number">1234</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u76D1\u542C\u5185\u6838\u7B49\u5F85\u961F\u52175\u4E2A</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">socket_listen</span><span class="token punctuation">(</span><span class="token variable">$server</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token constant">STDOUT</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;listen ok: on 1234&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u963B\u585E\u63A5\u6536\u5BA2\u6237\u7AEF\u8FDE\u63A5</span>
<span class="token variable">$connfd</span> <span class="token operator">=</span> <span class="token function">socket_accept</span><span class="token punctuation">(</span><span class="token variable">$server</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// \u6570\u636E\u8BFB\u5199</span>
<span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;recv: &quot;</span><span class="token operator">.</span><span class="token function">socket_read</span><span class="token punctuation">(</span><span class="token variable">$connfd</span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;write len: &quot;</span><span class="token operator">.</span><span class="token function">socket_write</span><span class="token punctuation">(</span><span class="token variable">$connfd</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;hi&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">socket_close</span><span class="token punctuation">(</span><span class="token variable">$server</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">socket_close</span><span class="token punctuation">(</span><span class="token variable">$connfd</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BA2\u6237\u7AEF\u4EE3\u7801\uFF1A</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token variable">$client</span> <span class="token operator">=</span> <span class="token function">socket_create</span><span class="token punctuation">(</span><span class="token constant">AF_INET</span><span class="token punctuation">,</span> <span class="token constant">SOCK_STREAM</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">socket_connect</span><span class="token punctuation">(</span><span class="token variable">$client</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;1234&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;write len:&quot;</span><span class="token operator">.</span><span class="token function">socket_write</span><span class="token punctuation">(</span><span class="token variable">$client</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;client&quot;</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;recv from server1: &quot;</span><span class="token operator">.</span><span class="token function">socket_read</span><span class="token punctuation">(</span><span class="token variable">$client</span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">socket_close</span><span class="token punctuation">(</span><span class="token variable">$client</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6211\u4EEC\u5C06\u670D\u52A1\u4EE3\u7801\u8FD0\u884C\u8D77\u6765\uFF1A<code>php server1.php</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@jb51 process<span class="token punctuation">]</span><span class="token comment"># php server1.php</span>
listen ok: on <span class="token number">1234</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F7F\u7528\u547D\u4EE4\uFF1A<code>netstat -luntp</code>\u6765\u67E5\u770B\u76D1\u542C\u7684\u7AEF\u53E3</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>root@jb51 process<span class="token punctuation">]</span><span class="token comment"># netstat -luntp</span>
Active Internet connections <span class="token punctuation">(</span>only servers<span class="token punctuation">)</span>
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name
tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">0.0</span>.0.0:1234            <span class="token number">0.0</span>.0.0:*               LISTEN
<span class="token number">6828</span>/php
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F7F\u7528<code>tcpdump</code>\u547D\u4EE4\u6765\u76D1\u542C</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@jb51 process<span class="token punctuation">]</span><span class="token comment"># tcpdump -X -AAA -i eth0 port 1234</span>
tcpdump: verbose output suppressed, use -v or -vv <span class="token keyword">for</span> full protocol decode
listening on eth0, link-type EN10MB <span class="token punctuation">(</span>Ethernet<span class="token punctuation">)</span>, capture size <span class="token number">262144</span> bytes

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>eth0</code>\u662F\u7F51\u5361\uFF0C\u53EF\u4EE5\u901A\u8FC7<code>ifconfig</code>\u53BB\u67E5\u770B</li></ul><p>\u6700\u540E\u6211\u4EEC\u5728\u5BA2\u6237\u7AEF\u6267\u884C\u5BA2\u6237\u7AEF\u4EE3\u7801</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@jb51 process<span class="token punctuation">]</span><span class="token comment"># /usr/bin/php client1.php</span>
<span class="token function">write</span> len:5recv from server1: hi
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u670D\u52A1\u7AEF\u54CD\u5E94\u5185\u5BB9\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@jb51 process<span class="token punctuation">]</span><span class="token comment"># php server1.php</span>
listen ok: on 1234recv: clienwrite len: <span class="token number">2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><code>tcpdump</code>\u76D1\u542C\u62A5\u6587\u5185\u5BB9</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@jb51 process<span class="token punctuation">]</span><span class="token comment"># tcpdump -X -AAA -i eth0 port 1234</span>
tcpdump: verbose output suppressed, use -v or -vv <span class="token keyword">for</span> full protocol decode
listening on eth0, link-type EN10MB <span class="token punctuation">(</span>Ethernet<span class="token punctuation">)</span>, capture size <span class="token number">262144</span> bytes
<span class="token number">21</span>:31:54.825669 IP jb51.net.http <span class="token operator">&gt;</span> <span class="token number">103.142</span>.100.9.search-agent: Flags <span class="token punctuation">[</span>S.<span class="token punctuation">]</span>, <span class="token function">seq</span> <span class="token number">2011740119</span>, ack <span class="token number">1598462250</span>, win <span class="token number">29200</span>, options <span class="token punctuation">[</span>mss <span class="token number">1460</span>,nop,nop,sackOK<span class="token punctuation">]</span>, length <span class="token number">0</span>
        0x0000:  <span class="token number">4500</span> 0030 0000 <span class="token number">4000</span> <span class="token number">4006</span> 552d 0a00 <span class="token number">1004</span>  E<span class="token punctuation">..</span><span class="token number">0</span><span class="token punctuation">..</span>@.@.U-<span class="token punctuation">..</span><span class="token punctuation">..</span>
        0x0010:  678e <span class="token number">6409</span> 0050 04d2 77e8 b7d7 5f46 992a  g.d<span class="token punctuation">..</span>P<span class="token punctuation">..</span>w<span class="token punctuation">..</span>._F.*
        0x0020:  <span class="token number">7012</span> <span class="token number">7210</span> fe10 0000 0204 05b4 0101 0402  p.r<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.
<span class="token number">21</span>:32:03.025658 IP jb51.net.http <span class="token operator">&gt;</span> <span class="token number">103.142</span>.100.9.search-agent: Flags <span class="token punctuation">[</span>S.<span class="token punctuation">]</span>, <span class="token function">seq</span> <span class="token number">2011740119</span>, ack <span class="token number">1598462250</span>, win <span class="token number">29200</span>, options <span class="token punctuation">[</span>mss <span class="token number">1460</span>,nop,nop,sackOK<span class="token punctuation">]</span>, length <span class="token number">0</span>
        0x0000:  <span class="token number">4500</span> 0030 0000 <span class="token number">4000</span> <span class="token number">4006</span> 552d 0a00 <span class="token number">1004</span>  E<span class="token punctuation">..</span><span class="token number">0</span><span class="token punctuation">..</span>@.@.U-<span class="token punctuation">..</span><span class="token punctuation">..</span>
        0x0010:  678e <span class="token number">6409</span> 0050 04d2 77e8 b7d7 5f46 992a  g.d<span class="token punctuation">..</span>P<span class="token punctuation">..</span>w<span class="token punctuation">..</span>._F.*
        0x0020:  <span class="token number">7012</span> <span class="token number">7210</span> fe10 0000 0204 05b4 0101 0402  p.r<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.
<span class="token number">21</span>:32:19.025689 IP jb51.net.http <span class="token operator">&gt;</span> <span class="token number">103.142</span>.100.9.search-agent: Flags <span class="token punctuation">[</span>S.<span class="token punctuation">]</span>, <span class="token function">seq</span> <span class="token number">2011740119</span>, ack <span class="token number">1598462250</span>, win <span class="token number">29200</span>, options <span class="token punctuation">[</span>mss <span class="token number">1460</span>,nop,nop,sackOK<span class="token punctuation">]</span>, length <span class="token number">0</span>
        0x0000:  <span class="token number">4500</span> 0030 0000 <span class="token number">4000</span> <span class="token number">4006</span> 552d 0a00 <span class="token number">1004</span>  E<span class="token punctuation">..</span><span class="token number">0</span><span class="token punctuation">..</span>@.@.U-<span class="token punctuation">..</span><span class="token punctuation">..</span>
        0x0010:  678e <span class="token number">6409</span> 0050 04d2 77e8 b7d7 5f46 992a  g.d<span class="token punctuation">..</span>P<span class="token punctuation">..</span>w<span class="token punctuation">..</span>._F.*
        0x0020:  <span class="token number">7012</span> <span class="token number">7210</span> fe10 0000 0204 05b4 0101 0402  p.r<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>eth0 \u76D1\u542C\u8FD9\u4E2A\u7F51\u5361</li><li>Ethernet \u4EE5\u592A\u7F51\u6570\u636E\u5E27</li><li>21:31:54\uFF1A\u5F53\u524D\u65F6\u95F4</li><li>IP \u540E\u9762\u662F\u5BA2\u6237\u7AEF IP</li><li>103.142.100.9.search-agent: <code>hostnamectl</code>\u91CC\u7684\u5BF9\u5E94\u7684\u4F60\u8FD9\u53F0\u4E3B\u673A</li><li>Flags [S.]\uFF1ATCP \u62A5\u6587\u7684\u4E00\u4E2A\u6807\u5FD7\uFF0CS\uFF1ASYN\uFF0C\u662F\u4E00\u4E2A\u540C\u6B65\u62A5\u6587\uFF0C\u53EF\u4EE5\u8BA4\u4E3A\u662F\u4E00\u4E2A\u8FDE\u63A5\u62A5\u6587</li><li>seq 2011740119\uFF1AISN \u5E8F\u53F7\u503C</li></ul><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>IP jb51.net.http &gt; 103.142.100.9.search-agent: Flags [S.], seq 2011740119, ack 1598462250, win 29200, options [mss 1460,nop,nop,sackOK], length 0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4E0B\u9762\u4E00\u4E2A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>IP jb51.net.http &gt; 103.142.100.9.search-agent: Flags [S.], seq 2011740119, ack 1598462250, win 29200, options [mss 1460,nop,nop,sackOK], length 0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><hr><p>\u4E0A\u9762\u7684\u5148\u6682\u65F6\u653E\u4E0B\uFF0C\u56E0\u4E3A\u9047\u5230\u4E86\u4E00\u4E2A\u95EE\u9898\uFF1A</p><div class="custom-container info"><p class="custom-container-title">\u5173\u4E8E\u6293\u53D6\u4E0D\u5230\u5305\u7684\u95EE\u9898</p><p><code>eth0</code>\u662F\u4E00\u822C\u7528\u4E8E\u4EE5\u592A\u7F51\u7684\u63A5\u53E3\uFF0C<code>lo</code>\u662F\u6307\u672C\u5730\u56DE\u73AF\u63A5\u53E3\uFF0C\u7B2C\u4E00\u6B21\u4F7F\u7528\u6CA1\u6709\u6293\u4E0D\u5230\u51C6\u786E\u7684\u6570\u636E\u5305\u7684\u539F\u56E0\u662F\uFF1A\u672C\u5730\u56DE\u73AF\u4E0D\u7ECF\u8FC7\u4EE5\u592A\u7F51\u5361\uFF0C\u6240\u4EE5\u73B0\u5728\u6362\u6210\u4F7F\u7528<code>-i lo</code>\u6765\u6293\u53D6\u672C\u5730\u56DE\u73AF\u6570\u636E</p></div><p>\u73B0\u5728\u6211\u91CD\u65B0\u6362\u4E86\u4E00\u4E2A<code>1235</code>\u7684\u7AEF\u53E3</p><details class="custom-container details"><summary>\u67E5\u770B\u8FFD\u8E2A\u7ED3\u679C</summary><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@jb51 process<span class="token punctuation">]</span><span class="token comment"># tcpdump -X -AAA -i lo port 1235</span>
tcpdump: verbose output suppressed, use -v or -vv <span class="token keyword">for</span> full protocol decode
listening on lo, link-type EN10MB <span class="token punctuation">(</span>Ethernet<span class="token punctuation">)</span>, capture size <span class="token number">262144</span> bytes
<span class="token number">22</span>:23:41.475469 IP VM-16-4-centos.48994 <span class="token operator">&gt;</span> VM-16-4-centos.mosaicsyssvc1: Flags <span class="token punctuation">[</span>S<span class="token punctuation">]</span>, <span class="token function">seq</span> <span class="token number">714256101</span>, win <span class="token number">43690</span>, options <span class="token punctuation">[</span>mss <span class="token number">65495</span>,sackOK,TS val <span class="token number">4174891569</span> ecr <span class="token number">0</span>,nop,wscale <span class="token number">7</span><span class="token punctuation">]</span>, length <span class="token number">0</span>
        0x0000:  <span class="token number">4500</span> 003c 64d4 <span class="token number">4000</span> <span class="token number">4006</span> d7e5 7f00 0001  E<span class="token punctuation">..</span><span class="token operator">&lt;</span>d.@.@<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.
        0x0010:  7f00 0001 bf62 04d3 2a92 aee5 0000 0000  <span class="token punctuation">..</span><span class="token punctuation">..</span>.b<span class="token punctuation">..</span>*<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.
        0x0020:  a002 aaaa fe30 0000 0204 ffd7 0402 080a  <span class="token punctuation">..</span><span class="token punctuation">..</span>.0<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
        0x0030:  f8d7 ca31 0000 0000 0103 0307            <span class="token punctuation">..</span>.1<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
<span class="token number">22</span>:23:41.475494 IP VM-16-4-centos.mosaicsyssvc1 <span class="token operator">&gt;</span> VM-16-4-centos.48994: Flags <span class="token punctuation">[</span>S.<span class="token punctuation">]</span>, <span class="token function">seq</span> <span class="token number">877540770</span>, ack <span class="token number">714256102</span>, win <span class="token number">43690</span>, options <span class="token punctuation">[</span>mss <span class="token number">65495</span>,sackOK,TS val <span class="token number">4174891569</span> ecr <span class="token number">4174891569</span>,nop,wscale <span class="token number">7</span><span class="token punctuation">]</span>, length <span class="token number">0</span>
        0x0000:  <span class="token number">4500</span> 003c 0000 <span class="token number">4000</span> <span class="token number">4006</span> 3cba 7f00 0001  E<span class="token punctuation">..</span><span class="token operator">&lt;</span><span class="token punctuation">..</span>@.@.<span class="token operator">&lt;</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.
        0x0010:  7f00 0001 04d3 bf62 344e 35a2 2a92 aee6  <span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.b4N5.*<span class="token punctuation">..</span>.
        0x0020:  a012 aaaa fe30 0000 0204 ffd7 0402 080a  <span class="token punctuation">..</span><span class="token punctuation">..</span>.0<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
        0x0030:  f8d7 ca31 f8d7 ca31 0103 0307            <span class="token punctuation">..</span>.1<span class="token punctuation">..</span>.1<span class="token punctuation">..</span><span class="token punctuation">..</span>
<span class="token number">22</span>:23:41.475512 IP VM-16-4-centos.48994 <span class="token operator">&gt;</span> VM-16-4-centos.mosaicsyssvc1: Flags <span class="token punctuation">[</span>.<span class="token punctuation">]</span>, ack <span class="token number">1</span>, win <span class="token number">342</span>, options <span class="token punctuation">[</span>nop,nop,TS val <span class="token number">4174891569</span> ecr <span class="token number">4174891569</span><span class="token punctuation">]</span>, length <span class="token number">0</span>
        0x0000:  <span class="token number">4500</span> 0034 64d5 <span class="token number">4000</span> <span class="token number">4006</span> d7ec 7f00 0001  E<span class="token punctuation">..</span>4d.@.@<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.
        0x0010:  7f00 0001 bf62 04d3 2a92 aee6 344e 35a3  <span class="token punctuation">..</span><span class="token punctuation">..</span>.b<span class="token punctuation">..</span>*<span class="token punctuation">..</span>.4N5.
        0x0020:  <span class="token number">8010</span> 0156 fe28 0000 0101 080a f8d7 ca31  <span class="token punctuation">..</span>.V.<span class="token punctuation">(</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.1
        0x0030:  f8d7 ca31                                <span class="token punctuation">..</span>.1
<span class="token number">22</span>:23:41.476100 IP VM-16-4-centos.48994 <span class="token operator">&gt;</span> VM-16-4-centos.mosaicsyssvc1: Flags <span class="token punctuation">[</span>P.<span class="token punctuation">]</span>, <span class="token function">seq</span> <span class="token number">1</span>:6, ack <span class="token number">1</span>, win <span class="token number">342</span>, options <span class="token punctuation">[</span>nop,nop,TS val <span class="token number">4174891570</span> ecr <span class="token number">4174891569</span><span class="token punctuation">]</span>, length <span class="token number">5</span>
        0x0000:  <span class="token number">4500</span> 0039 64d6 <span class="token number">4000</span> <span class="token number">4006</span> d7e6 7f00 0001  E<span class="token punctuation">..</span>9d.@.@<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.
        0x0010:  7f00 0001 bf62 04d3 2a92 aee6 344e 35a3  <span class="token punctuation">..</span><span class="token punctuation">..</span>.b<span class="token punctuation">..</span>*<span class="token punctuation">..</span>.4N5.
        0x0020:  <span class="token number">8018</span> 0156 fe2d 0000 0101 080a f8d7 ca32  <span class="token punctuation">..</span>.V.-<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.2
        0x0030:  f8d7 ca31 636c <span class="token number">6965</span> 6e                   <span class="token punctuation">..</span>.1clien
<span class="token number">22</span>:23:41.476157 IP VM-16-4-centos.mosaicsyssvc1 <span class="token operator">&gt;</span> VM-16-4-centos.48994: Flags <span class="token punctuation">[</span>.<span class="token punctuation">]</span>, ack <span class="token number">6</span>, win <span class="token number">342</span>, options <span class="token punctuation">[</span>nop,nop,TS val <span class="token number">4174891570</span> ecr <span class="token number">4174891570</span><span class="token punctuation">]</span>, length <span class="token number">0</span>
        0x0000:  <span class="token number">4500</span> 0034 ff92 <span class="token number">4000</span> <span class="token number">4006</span> 3d2f 7f00 0001  E<span class="token punctuation">..</span><span class="token number">4</span><span class="token punctuation">..</span>@.@.<span class="token operator">=</span>/<span class="token punctuation">..</span><span class="token punctuation">..</span>
        0x0010:  7f00 0001 04d3 bf62 344e 35a3 2a92 aeeb  <span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.b4N5.*<span class="token punctuation">..</span>.
        0x0020:  <span class="token number">8010</span> 0156 fe28 0000 0101 080a f8d7 ca32  <span class="token punctuation">..</span>.V.<span class="token punctuation">(</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.2
        0x0030:  f8d7 ca32                                <span class="token punctuation">..</span>.2
<span class="token number">22</span>:23:41.476198 IP VM-16-4-centos.mosaicsyssvc1 <span class="token operator">&gt;</span> VM-16-4-centos.48994: Flags <span class="token punctuation">[</span>P.<span class="token punctuation">]</span>, <span class="token function">seq</span> <span class="token number">1</span>:3, ack <span class="token number">6</span>, win <span class="token number">342</span>, options <span class="token punctuation">[</span>nop,nop,TS val <span class="token number">4174891570</span> ecr <span class="token number">4174891570</span><span class="token punctuation">]</span>, length <span class="token number">2</span>
        0x0000:  <span class="token number">4500</span> 0036 ff93 <span class="token number">4000</span> <span class="token number">4006</span> 3d2c 7f00 0001  E<span class="token punctuation">..</span><span class="token number">6</span><span class="token punctuation">..</span>@.@.<span class="token operator">=</span>,<span class="token punctuation">..</span><span class="token punctuation">..</span>
        0x0010:  7f00 0001 04d3 bf62 344e 35a3 2a92 aeeb  <span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.b4N5.*<span class="token punctuation">..</span>.
        0x0020:  <span class="token number">8018</span> 0156 fe2a 0000 0101 080a f8d7 ca32  <span class="token punctuation">..</span>.V.*<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.2
        0x0030:  f8d7 ca32 <span class="token number">6869</span>                           <span class="token punctuation">..</span>.2hi
<span class="token number">22</span>:23:41.476237 IP VM-16-4-centos.mosaicsyssvc1 <span class="token operator">&gt;</span> VM-16-4-centos.48994: Flags <span class="token punctuation">[</span>F.<span class="token punctuation">]</span>, <span class="token function">seq</span> <span class="token number">3</span>, ack <span class="token number">6</span>, win <span class="token number">342</span>, options <span class="token punctuation">[</span>nop,nop,TS val <span class="token number">4174891570</span> ecr <span class="token number">4174891570</span><span class="token punctuation">]</span>, length <span class="token number">0</span>
        0x0000:  <span class="token number">4500</span> 0034 ff94 <span class="token number">4000</span> <span class="token number">4006</span> 3d2d 7f00 0001  E<span class="token punctuation">..</span><span class="token number">4</span><span class="token punctuation">..</span>@.@.<span class="token operator">=</span>-<span class="token punctuation">..</span><span class="token punctuation">..</span>
        0x0010:  7f00 0001 04d3 bf62 344e 35a5 2a92 aeeb  <span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.b4N5.*<span class="token punctuation">..</span>.
        0x0020:  <span class="token number">8011</span> 0156 fe28 0000 0101 080a f8d7 ca32  <span class="token punctuation">..</span>.V.<span class="token punctuation">(</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.2
        0x0030:  f8d7 ca32                                <span class="token punctuation">..</span>.2
<span class="token number">22</span>:23:41.482154 IP VM-16-4-centos.48994 <span class="token operator">&gt;</span> VM-16-4-centos.mosaicsyssvc1: Flags <span class="token punctuation">[</span>.<span class="token punctuation">]</span>, ack <span class="token number">3</span>, win <span class="token number">342</span>, options <span class="token punctuation">[</span>nop,nop,TS val <span class="token number">4174891576</span> ecr <span class="token number">4174891570</span><span class="token punctuation">]</span>, length <span class="token number">0</span>
        0x0000:  <span class="token number">4500</span> 0034 64d7 <span class="token number">4000</span> <span class="token number">4006</span> d7ea 7f00 0001  E<span class="token punctuation">..</span>4d.@.@<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.
        0x0010:  7f00 0001 bf62 04d3 2a92 aeeb 344e 35a5  <span class="token punctuation">..</span><span class="token punctuation">..</span>.b<span class="token punctuation">..</span>*<span class="token punctuation">..</span>.4N5.
        0x0020:  <span class="token number">8010</span> 0156 fe28 0000 0101 080a f8d7 ca38  <span class="token punctuation">..</span>.V.<span class="token punctuation">(</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.8
        0x0030:  f8d7 ca32                                <span class="token punctuation">..</span>.2
<span class="token number">22</span>:23:41.482203 IP VM-16-4-centos.48994 <span class="token operator">&gt;</span> VM-16-4-centos.mosaicsyssvc1: Flags <span class="token punctuation">[</span>F.<span class="token punctuation">]</span>, <span class="token function">seq</span> <span class="token number">6</span>, ack <span class="token number">4</span>, win <span class="token number">342</span>, options <span class="token punctuation">[</span>nop,nop,TS val <span class="token number">4174891576</span> ecr <span class="token number">4174891570</span><span class="token punctuation">]</span>, length <span class="token number">0</span>
        0x0000:  <span class="token number">4500</span> 0034 64d8 <span class="token number">4000</span> <span class="token number">4006</span> d7e9 7f00 0001  E<span class="token punctuation">..</span>4d.@.@<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.
        0x0010:  7f00 0001 bf62 04d3 2a92 aeeb 344e 35a6  <span class="token punctuation">..</span><span class="token punctuation">..</span>.b<span class="token punctuation">..</span>*<span class="token punctuation">..</span>.4N5.
        0x0020:  <span class="token number">8011</span> 0156 fe28 0000 0101 080a f8d7 ca38  <span class="token punctuation">..</span>.V.<span class="token punctuation">(</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.8
        0x0030:  f8d7 ca32                                <span class="token punctuation">..</span>.2
<span class="token number">22</span>:23:41.482222 IP VM-16-4-centos.mosaicsyssvc1 <span class="token operator">&gt;</span> VM-16-4-centos.48994: Flags <span class="token punctuation">[</span>.<span class="token punctuation">]</span>, ack <span class="token number">7</span>, win <span class="token number">342</span>, options <span class="token punctuation">[</span>nop,nop,TS val <span class="token number">4174891576</span> ecr <span class="token number">4174891576</span><span class="token punctuation">]</span>, length <span class="token number">0</span>
        0x0000:  <span class="token number">4500</span> 0034 ff95 <span class="token number">4000</span> <span class="token number">4006</span> 3d2c 7f00 0001  E<span class="token punctuation">..</span><span class="token number">4</span><span class="token punctuation">..</span>@.@.<span class="token operator">=</span>,<span class="token punctuation">..</span><span class="token punctuation">..</span>
        0x0010:  7f00 0001 04d3 bf62 344e 35a6 2a92 aeec  <span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.b4N5.*<span class="token punctuation">..</span>.
        0x0020:  <span class="token number">8010</span> 0156 fe28 0000 0101 080a f8d7 ca38  <span class="token punctuation">..</span>.V.<span class="token punctuation">(</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.8
        0x0030:  f8d7 ca38                                <span class="token punctuation">..</span>.8
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><div class="custom-container tip"><p class="custom-container-title">TCP \u4E09\u6B21\u63E1\u624B</p><p>\u7B80\u5355\u5206\u6790\uFF1A</p><p>\u542B\u6709 SYN \u7684\u6807\u5FD7\u79F0\u4E3A\u540C\u6B65\u62A5\u6587</p><blockquote><p>IP VM-16-4-centos.48994 &gt; VM-16-4-centos.mosaicsyssvc1: Flags [S], seq 714256101</p></blockquote><p>\u8FD9\u4E2A\u65F6\u5019\u6807\u5FD7\u591A\u4E86<code>[S.]</code>\uFF0C\u6B64\u65F6\u7684<code>ack</code>\u6BD4\u4E0A\u9762\u7684<code>seq</code>\u591A\u4E86 1\uFF0C\u8FD9\u4E2A\u5C31\u662F\u786E\u8BA4\u62A5\u6587</p><blockquote><p>IP VM-16-4-centos.mosaicsyssvc1 &gt; VM-16-4-centos.48994: Flags [S.], seq 877540770, ack 714256102</p></blockquote><p>\u8FD9\u4E2A\u662F\u5BA2\u6237\u7AEF\u7684\u54CD\u5E94\uFF0C\u6807\u5FD7\u6CA1\u6709\u4E86\uFF0C\u8FD9\u91CC\u6709\u4E00\u4E2A<code>ack 1</code>\uFF0C\u4E5F\u662F\u786E\u8BA4\u62A5\u6587\uFF0C\u8FD9\u91CC\u7684<code>ack 1 = 877540770+1</code>\u7684</p><blockquote><p>IP VM-16-4-centos.48994 &gt; VM-16-4-centos.mosaicsyssvc1: Flags [.], ack 1</p></blockquote><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/4021/20220621222931.png" alt="\u4E09\u6B21\u63E1\u624B" loading="lazy"></p></div><p>P \u6807\u5FD7\u7684\u610F\u4E49\u63D0\u793A\u5C3D\u5FEB\u7684\u53BB\u63A5\u6536\u6570\u636E</p><blockquote><p>IP VM-16-4-centos.48994 &gt; VM-16-4-centos.mosaicsyssvc1: Flags [P.], seq 1:6, ack 1, win 342, options [nop,nop,TS val 4174891570 ecr 4174891569], length 5</p></blockquote><p>\u670D\u52A1\u7AEF\u4E3B\u52A8\u5173\u95ED\uFF1A<code>FIN</code>\u6807\u5FD7\uFF1A\u7ED3\u675F\u62A5\u6587</p><blockquote><p>IP VM-16-4-centos.mosaicsyssvc1 &gt; VM-16-4-centos.48994: Flags [F.], seq 3, ack 6</p></blockquote><p>\u5BA2\u6237\u7AEF\u4F7F\u7528<code>ack</code>\u786E\u8BA4\u62A5\u6587\uFF0C\u5E76\u6CA1\u6709\u5F7B\u5E95\u5173\u95ED</p><blockquote><p>IP VM-16-4-centos.48994 &gt; VM-16-4-centos.mosaicsyssvc1: Flags [.], ack 3</p></blockquote><p>\u5BA2\u6237\u7AEF\u518D\u4F7F\u7528<code>FIN</code>\u7ED3\u675F\u62A5\u6587\u518D\u53D1\u8D77\u4E00\u6B21\u786E\u8BA4</p><blockquote><p>IP VM-16-4-centos.48994 &gt; VM-16-4-centos.mosaicsyssvc1: Flags [F.], seq 6, ack 4</p></blockquote><p>\u670D\u52A1\u7AEF\u6700\u7EC8\u786E\u8BA4\u5173\u95ED</p><blockquote><p>IP VM-16-4-centos.mosaicsyssvc1 &gt; VM-16-4-centos.48994: Flags [.], ack 7</p></blockquote><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/4021/20220621223509.png" alt="\u5173\u95ED" loading="lazy"></p><p>\u670D\u52A1\u7AEF\u8C03\u7528<code>listen</code>\u51FD\u6570\u5904\u4E8E<code>LISTEN</code>\u72B6\u6001</p><p>\u5BA2\u6237\u7AEF\u8C03\u7528<code>connect</code>\u51FD\u6570\u53D1\u9001<code>SYN</code>\u540C\u6B65\u62A5\u6587\u5904\u4E8E<code>SYN_SENT</code></p><p>\u670D\u52A1\u7AEF\u4F7F\u7528<code>ACK</code>\u786E\u8BA4\u62A5\u6587\u6765\u8FDB\u884C\u786E\u8BA4\uFF0C\u53CC\u65B9\u5904\u4E8E\u8FDE\u63A5<code>ESTABLEISH</code>\u72B6\u6001</p><p>\u4E0B\u9762\u53CC\u65B9\u5C31\u53EF\u4EE5\u6536\u53D1\u6570\u636E\u4E86\uFF0C\u4E0A\u9762\u5C31\u662F TCP \u4E09\u6B21\u63E1\u624B\u7684\u5177\u4F53\u7EC6\u8282\u4E86\u3002</p><h3 id="\u5207\u6362\u8BED\u8A00\u6765\u89C2\u5BDF\u7CFB\u7EDF\u8C03\u7528\u7684\u51FD\u6570\u662F\u5426\u4E00\u81F4" tabindex="-1"><a class="header-anchor" href="#\u5207\u6362\u8BED\u8A00\u6765\u89C2\u5BDF\u7CFB\u7EDF\u8C03\u7528\u7684\u51FD\u6570\u662F\u5426\u4E00\u81F4" aria-hidden="true">#</a> \u5207\u6362\u8BED\u8A00\u6765\u89C2\u5BDF\u7CFB\u7EDF\u8C03\u7528\u7684\u51FD\u6570\u662F\u5426\u4E00\u81F4</h3><p><code>server1.py</code></p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> socket

s <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span><span class="token punctuation">)</span>
host <span class="token operator">=</span> <span class="token string">&quot;0.0.0.0&quot;</span>
port <span class="token operator">=</span> <span class="token number">1235</span>
s<span class="token punctuation">.</span>bind<span class="token punctuation">(</span><span class="token punctuation">(</span>host<span class="token punctuation">,</span> port<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">)</span>

s<span class="token punctuation">.</span>listen<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>

<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        c<span class="token punctuation">,</span> addr <span class="token operator">=</span> s<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8FDE\u63A5\u5730\u5740: &quot;</span><span class="token punctuation">,</span> addr<span class="token punctuation">)</span>
        c<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">&quot;nihao!&quot;</span><span class="token punctuation">)</span>
        c<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BF9\u6BD4</p>`,51),h=n("h4",{id:"php",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#php","aria-hidden":"true"},"#"),s(" php")],-1),f=n("p",null,[n("code",null,"strace -f -s 65500 /usr/local/php server1.php"),s("\u76F4\u63A5\u770B\u6700\u5E95\u4E0B\u7684\u51E0\u884C")],-1),x=n("div",{class:"language-bash ext-sh line-numbers-mode"},[n("pre",{class:"language-bash"},[n("code",null,[s("socket"),n("span",{class:"token punctuation"},"("),s("AF_INET, SOCK_STREAM, IPPROTO_IP"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"3"),s(`
bind`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"3"),s(", "),n("span",{class:"token punctuation"},"{"),s("sa_family"),n("span",{class:"token operator"},"="),s("AF_INET, "),n("span",{class:"token assign-left variable"},"sin_port"),n("span",{class:"token operator"},"="),s("htons"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1235"),n("span",{class:"token punctuation"},")"),s(", "),n("span",{class:"token assign-left variable"},"sin_addr"),n("span",{class:"token operator"},"="),s("inet_addr"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"0.0.0.0"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"}"),s(", "),n("span",{class:"token number"},"16"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
listen`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"3"),s(", "),n("span",{class:"token number"},"5"),n("span",{class:"token punctuation"},")"),s("                            "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
write`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1"),s(", "),n("span",{class:"token string"},'"listen ok: on 1235"'),s(", 18listen ok: on "),n("span",{class:"token number"},"1235"),n("span",{class:"token punctuation"},")"),s("      "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"18"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),_=n("ul",null,[n("li",null,[s("socket(AF_INET, SOCK_STREAM, IPPROTO_IP) = 3\uFF1A\u4F7F\u7528"),n("code",null,"socket"),s("\u51FD\u6570\u4F7F\u7528\u5957\u63A5\u5B57\uFF0CIPV4 \u7684\u534F\u8BAE"),n("code",null,"AF_INET"),s("\uFF0C\u5957\u63A5\u5B57\u7C7B\u578B\uFF0C\u7136\u540E\u5177\u4F53\u534F\u8BAE\uFF0C\u521B\u5EFA\u6210\u529F\u540E\u8FD4\u56DE\u6587\u4EF6\u63CF\u8FF0\u7B26 3")]),n("li",null,[s("\u4F7F\u7528"),n("code",null,"bind"),s("\u7ED1\u5B9A\u51FD\u6570\uFF0C\u7ED1\u5B9A 1235 \u7AEF\u53E3")]),n("li",null,[s("\u4F7F\u7528\u76D1\u542C\u51FD\u6570"),n("code",null,"listen")]),n("li",null,[s("\u4F7F\u7528"),n("code",null,"accept"),s("\u51FD\u6570\u963B\u585E")])],-1),P=n("p",null,"\u76D1\u542C\u5BA2\u6237\u7AEF",-1),q=n("p",null,[n("code",null,"strace -f -s 65500 /usr/local/php client1.php")],-1),E=n("div",{class:"language-bash ext-sh line-numbers-mode"},[n("pre",{class:"language-bash"},[n("code",null,[s("socket"),n("span",{class:"token punctuation"},"("),s("AF_INET, SOCK_STREAM, IPPROTO_IP"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"3"),s(`
connect`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"3"),s(", "),n("span",{class:"token punctuation"},"{"),s("sa_family"),n("span",{class:"token operator"},"="),s("AF_INET, "),n("span",{class:"token assign-left variable"},"sin_port"),n("span",{class:"token operator"},"="),s("htons"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1235"),n("span",{class:"token punctuation"},")"),s(", "),n("span",{class:"token assign-left variable"},"sin_addr"),n("span",{class:"token operator"},"="),s("inet_addr"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"127.0.0.1"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"}"),s(", "),n("span",{class:"token number"},"16"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
write`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"3"),s(", "),n("span",{class:"token string"},'"clien"'),s(", "),n("span",{class:"token number"},"5"),n("span",{class:"token punctuation"},")"),s("                    "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"5"),s(`
write`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1"),s(", "),n("span",{class:"token string"},[s('"write len:5'),n("span",{class:"token entity",title:"\\n"},"\\n"),s('"')]),s(`, 12write len:5
`),n("span",{class:"token punctuation"},")"),s("           "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"12"),s(`
recvfrom`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"3"),s(", "),n("span",{class:"token string"},'"hi"'),s(", "),n("span",{class:"token number"},"128"),s(", "),n("span",{class:"token number"},"0"),s(", NULL, NULL"),n("span",{class:"token punctuation"},")"),s("   "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"2"),s(`
write`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1"),s(", "),n("span",{class:"token string"},[s('"recv from server1: hi'),n("span",{class:"token entity",title:"\\n"},"\\n"),s('"')]),s(`, 22recv from server1: hi
`),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"22"),s(`
close`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"3"),n("span",{class:"token punctuation"},")"),s("                                "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
close`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},")"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f0ce29b3000, "),n("span",{class:"token number"},"2176600"),n("span",{class:"token punctuation"},")"),s("         "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f0ce279a000, "),n("span",{class:"token number"},"2196680"),n("span",{class:"token punctuation"},")"),s("         "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f0cf10d3000, "),n("span",{class:"token number"},"192512"),n("span",{class:"token punctuation"},")"),s("          "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f0ce2599000, "),n("span",{class:"token number"},"2097248"),n("span",{class:"token punctuation"},")"),s("         "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f0ce44a6000, "),n("span",{class:"token number"},"4284872"),n("span",{class:"token punctuation"},")"),s("         "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f0ce4234000, "),n("span",{class:"token number"},"2560784"),n("span",{class:"token punctuation"},")"),s("         "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f0ce3dd1000, "),n("span",{class:"token number"},"4596616"),n("span",{class:"token punctuation"},")"),s("         "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f0ce3b84000, "),n("span",{class:"token number"},"2410688"),n("span",{class:"token punctuation"},")"),s("         "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f0ce389b000, "),n("span",{class:"token number"},"3050080"),n("span",{class:"token punctuation"},")"),s("         "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f0ce3697000, "),n("span",{class:"token number"},"2109928"),n("span",{class:"token punctuation"},")"),s("         "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f0ce3464000, "),n("span",{class:"token number"},"2302680"),n("span",{class:"token punctuation"},")"),s("         "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f0ce3254000, "),n("span",{class:"token number"},"2160296"),n("span",{class:"token punctuation"},")"),s("         "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f0ce3050000, "),n("span",{class:"token number"},"2109720"),n("span",{class:"token punctuation"},")"),s("         "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f0ce2e29000, "),n("span",{class:"token number"},"2255216"),n("span",{class:"token punctuation"},")"),s("         "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f0ce2bc7000, "),n("span",{class:"token number"},"2494984"),n("span",{class:"token punctuation"},")"),s("         "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f0cf1153000, "),n("span",{class:"token number"},"196608"),n("span",{class:"token punctuation"},")"),s("          "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f0ceae00000, "),n("span",{class:"token number"},"2097152"),n("span",{class:"token punctuation"},")"),s("         "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f0cf1032000, "),n("span",{class:"token number"},"659456"),n("span",{class:"token punctuation"},")"),s("          "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f0cf11ac000, "),n("span",{class:"token number"},"135168"),n("span",{class:"token punctuation"},")"),s("          "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
exit_group`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},")"),s("                           "),n("span",{class:"token operator"},"="),s(` ?
+++ exited with `),n("span",{class:"token number"},"0"),s(` +++
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),A=n("p",null,"\u7136\u540E\u670D\u52A1\u7AEF\u54CD\u5E94\u5185\u5BB9\uFF0C\u7B49\u5230\u6709\u5BA2\u6237\u7AEF\u8FDB\u6765\u5C31\u4E0D\u963B\u585E\u4E86",-1),I=n("div",{class:"language-bash ext-sh line-numbers-mode"},[n("pre",{class:"language-bash"},[n("code",null,[s("socket"),n("span",{class:"token punctuation"},"("),s("AF_INET, SOCK_STREAM, IPPROTO_IP"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"3"),s(`
bind`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"3"),s(", "),n("span",{class:"token punctuation"},"{"),s("sa_family"),n("span",{class:"token operator"},"="),s("AF_INET, "),n("span",{class:"token assign-left variable"},"sin_port"),n("span",{class:"token operator"},"="),s("htons"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1235"),n("span",{class:"token punctuation"},")"),s(", "),n("span",{class:"token assign-left variable"},"sin_addr"),n("span",{class:"token operator"},"="),s("inet_addr"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"0.0.0.0"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"}"),s(", "),n("span",{class:"token number"},"16"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
listen`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"3"),s(", "),n("span",{class:"token number"},"5"),n("span",{class:"token punctuation"},")"),s("                            "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
write`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1"),s(", "),n("span",{class:"token string"},'"listen ok: on 1235"'),s(", 18listen ok: on "),n("span",{class:"token number"},"1235"),n("span",{class:"token punctuation"},")"),s("      "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"18"),s(`
accept`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"3"),s(", "),n("span",{class:"token punctuation"},"{"),s("sa_family"),n("span",{class:"token operator"},"="),s("AF_INET, "),n("span",{class:"token assign-left variable"},"sin_port"),n("span",{class:"token operator"},"="),s("htons"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"50626"),n("span",{class:"token punctuation"},")"),s(", "),n("span",{class:"token assign-left variable"},"sin_addr"),n("span",{class:"token operator"},"="),s("inet_addr"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"127.0.0.1"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"}"),s(", "),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"128"),s("-"),n("span",{class:"token operator"},">"),n("span",{class:"token number"},"16"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"4"),s(`
recvfrom`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"4"),s(", "),n("span",{class:"token string"},'"clien"'),s(", "),n("span",{class:"token number"},"128"),s(", "),n("span",{class:"token number"},"0"),s(", NULL, NULL"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"5"),s(`
write`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1"),s(", "),n("span",{class:"token string"},[s('"recv: clien'),n("span",{class:"token entity",title:"\\n"},"\\n"),s('"')]),s(`, 12recv: clien
`),n("span",{class:"token punctuation"},")"),s("           "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"12"),s(`
write`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"4"),s(", "),n("span",{class:"token string"},'"hi"'),s(", "),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},")"),s("                       "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"2"),s(`
write`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1"),s(", "),n("span",{class:"token string"},[s('"write len: 2'),n("span",{class:"token entity",title:"\\n"},"\\n"),s('"')]),s(", 13write len: "),n("span",{class:"token number"},"2"),s(`
`),n("span",{class:"token punctuation"},")"),s("          "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"13"),s(`
close`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"3"),n("span",{class:"token punctuation"},")"),s("                                "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
close`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"4"),n("span",{class:"token punctuation"},")"),s("                                "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
close`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},")"),s("                                "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f766dfb3000, "),n("span",{class:"token number"},"2176600"),n("span",{class:"token punctuation"},")"),s("         "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f766dd9a000, "),n("span",{class:"token number"},"2196680"),n("span",{class:"token punctuation"},")"),s("         "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f767c594000, "),n("span",{class:"token number"},"192512"),n("span",{class:"token punctuation"},")"),s("          "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f766db99000, "),n("span",{class:"token number"},"2097248"),n("span",{class:"token punctuation"},")"),s("         "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f766faa6000, "),n("span",{class:"token number"},"4284872"),n("span",{class:"token punctuation"},")"),s("         "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f766f834000, "),n("span",{class:"token number"},"2560784"),n("span",{class:"token punctuation"},")"),s("         "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f766f3d1000, "),n("span",{class:"token number"},"4596616"),n("span",{class:"token punctuation"},")"),s("         "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f766f184000, "),n("span",{class:"token number"},"2410688"),n("span",{class:"token punctuation"},")"),s("         "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f766ee9b000, "),n("span",{class:"token number"},"3050080"),n("span",{class:"token punctuation"},")"),s("         "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f766ec97000, "),n("span",{class:"token number"},"2109928"),n("span",{class:"token punctuation"},")"),s("         "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f766ea64000, "),n("span",{class:"token number"},"2302680"),n("span",{class:"token punctuation"},")"),s("         "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f766e854000, "),n("span",{class:"token number"},"2160296"),n("span",{class:"token punctuation"},")"),s("         "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f766e650000, "),n("span",{class:"token number"},"2109720"),n("span",{class:"token punctuation"},")"),s("         "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f766e429000, "),n("span",{class:"token number"},"2255216"),n("span",{class:"token punctuation"},")"),s("         "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f766e1c7000, "),n("span",{class:"token number"},"2494984"),n("span",{class:"token punctuation"},")"),s("         "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f767c614000, "),n("span",{class:"token number"},"196608"),n("span",{class:"token punctuation"},")"),s("          "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f7676400000, "),n("span",{class:"token number"},"2097152"),n("span",{class:"token punctuation"},")"),s("         "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f767c4f3000, "),n("span",{class:"token number"},"659456"),n("span",{class:"token punctuation"},")"),s("          "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
munmap`),n("span",{class:"token punctuation"},"("),s("0x7f767c66d000, "),n("span",{class:"token number"},"135168"),n("span",{class:"token punctuation"},")"),s("          "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
exit_group`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},")"),s("                           "),n("span",{class:"token operator"},"="),s(` ?
+++ exited with `),n("span",{class:"token number"},"0"),s(` +++
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),T=n("h4",{id:"python",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#python","aria-hidden":"true"},"#"),s(" python")],-1),y=n("p",null,[n("code",null,"strace -f -s 65500 python server1.py")],-1),M=n("div",{class:"language-bash ext-sh line-numbers-mode"},[n("pre",{class:"language-bash"},[n("code",null,[s("socket"),n("span",{class:"token punctuation"},"("),s("AF_INET, SOCK_STREAM"),n("span",{class:"token operator"},"|"),s("SOCK_CLOEXEC, IPPROTO_IP"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"3"),s(`
bind`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"3"),s(", "),n("span",{class:"token punctuation"},"{"),s("sa_family"),n("span",{class:"token operator"},"="),s("AF_INET, "),n("span",{class:"token assign-left variable"},"sin_port"),n("span",{class:"token operator"},"="),s("htons"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1234"),n("span",{class:"token punctuation"},")"),s(", "),n("span",{class:"token assign-left variable"},"sin_addr"),n("span",{class:"token operator"},"="),s("inet_addr"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"0.0.0.0"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"}"),s(", "),n("span",{class:"token number"},"16"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
listen`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"3"),s(", "),n("span",{class:"token number"},"5"),n("span",{class:"token punctuation"},")"),s("                            "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(`
accept4`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"3"),s(`,
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),F=n("p",null,"\u540C\u6837\u7684\u6700\u5E95\u4E0B\u7684\u57FA\u5C42\u4EE3\u7801\u90FD\u662F\u4E00\u6837\u7684\u3002",-1),S=n("h2",{id:"\u603B\u7ED3",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u603B\u7ED3","aria-hidden":"true"},"#"),s(" \u603B\u7ED3")],-1),w=n("p",null,"\u6240\u4EE5\u7EFC\u4E0A\u6240\u8FF0\u5462\uFF0C\u4E0D\u7BA1\u5565\u7F16\u7A0B\u8BED\u8A00\uFF0C\u5E95\u5C42\u8C03\u7528\u7684\u7CFB\u7EDF\u51FD\u6570\u5B8C\u5168\u4E00\u81F4\uFF0C\u53EA\u662F\u5404\u4E2A\u8BED\u6CD5\u4E0D\u4E00\u6837\u3002",-1);function V(N,B){const p=a("Mermaid"),o=a("Tabs");return k(),r("div",null,[b,v,t(p,{id:"mermaid-1a962852",code:"flowchart%20TB%0A%09subgraph%20A%5B%E5%BA%94%E7%94%A8%E5%B1%82%20%E7%94%A8%E6%88%B7%E7%A9%BA%E9%97%B4%5D%0A%09%09HTTP%2FDNS%2FTELNMET%2FPING%2FWEBSOCKET%2FMQTT%2FXMAPP%2FRMPT...%0A%09end%0A%09subgraph%20B%5B%E5%86%85%E6%A0%B8%E7%A9%BA%E9%97%B4%5D%0A%20%20%20%20%09C%5B%E4%BC%A0%E8%BE%93%E5%B1%82TCP%2FUDP%5D%0A%20%20%20%20%09D%5B%E7%BD%91%E7%BB%9C%E5%B1%82IP%2FICMP%5D%0A%20%20%20%20%09E%5B%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82ARP%2FRARP%5D%0A%20%20%20%20end%0A"}),g,t(o,{data:[{title:"PHP"},{title:"Python"}],active:0},{tab0:e(({title:c,value:l,isActive:u})=>[h,f,x,_,P,q,E,A,I]),tab1:e(({title:c,value:l,isActive:u})=>[T,y,M,F]),_:1}),S,w])}var R=i(m,[["render",V],["__file","socket-desc.html.vue"]]);export{R as default};
