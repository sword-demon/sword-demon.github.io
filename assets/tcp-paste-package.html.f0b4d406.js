import{_ as n}from"./plugin-vue_export-helper.21dcd24c.js";import{o as s,c as a,e as p}from"./app.91534c1d.js";const e={},t=p(`<h1 id="tcp-\u7C98\u5305" tabindex="-1"><a class="header-anchor" href="#tcp-\u7C98\u5305" aria-hidden="true">#</a> TCP \u7C98\u5305</h1><h2 id="\u6808" tabindex="-1"><a class="header-anchor" href="#\u6808" aria-hidden="true">#</a> \u6808</h2><blockquote><p>\u64CD\u4F5C\u7CFB\u7EDF\u5206\u914D\u7ED9\u8FDB\u7A0B/\u7EBF\u7A0B\u7684\u4E00\u5757\u8FDE\u7EED\u7684\u5185\u5B58\u533A\u57DF\u3010\u4E13\u7528\u5185\u5B58\u3011</p></blockquote><p>\u6808\u7684\u4E3B\u8981\u5185\u5BB9\uFF1A\u51FD\u6570\u7684\u53C2\u6570\u3001\u51FD\u6570\u91CC\u7684\u5C40\u90E8\u53D8\u91CF\u3001\u51FD\u6570\u7684\u8FD4\u56DE\u503C\u3010\u9690\u5F62\u7684\u8FD4\u56DE\u5730\u5740\u3011</p><p>\u5728\u8FDB\u7A0B\u91CC\uFF0CCPU \u7684\u6267\u884C\u53D7\u7A0B\u5E8F\u8BA1\u6570\u5668\u63A7\u5236\u3010\u5B83\u7684\u5BC4\u5B58\u5668\u540D\u79F0\u4E3A IP(<code>instruction pointer</code>) 8 \u4F4D\u7684\u53E4\u8463\u7EA7\u3011</p><p>32 \u4F4D\u7684 EIP 64 \u4F4D\u7684 RIP \u3010\u5BC4\u5B58\u5668\u4E0A\u9762\u5B58\u50A8\u4E86\u4E0B\u4E00\u4E2A\u6761\u8981\u6267\u884C\u7684\u6307\u4EE4\u7684\u5730\u5740\u3011</p><p>CPU \u53D6\u51FA\u5BC4\u5B58\u5668\u4E0A\u7684\u6307\u4EE4\u53BB\u6267\u884C\uFF0C\u672C\u8EAB\u662F\u987A\u5E8F\u6267\u884C\u7684\uFF0C\u5982\u679C\u9700\u8981\u6709\u6761\u4EF6\u5224\u65AD\uFF0C\u5219\u4F1A\u8FDB\u884C\u6709\u6761\u4EF6\u7684\u8DF3\u8F6C\u6267\u884C</p><p>\u6808\u9876\u7531 RSP \u5BC4\u5B58\u5668 \u6765\u7BA1</p><p>\u6808\u5E95\u7531 RBP \u5BC4\u5B58\u5668 \u6765\u7BA1</p><p>\u4EE3\u7801\u89E3\u6790</p><div class="language-c ext-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>

<span class="token keyword">void</span> <span class="token function">C</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;i am c func&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">long</span> <span class="token operator">*</span>p<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    p<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">long</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>p<span class="token punctuation">;</span>
    <span class="token operator">*</span><span class="token punctuation">(</span>p<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span>C<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>0x4005d9 &lt;main+9&gt;               callq  0x4005c0 &lt;A&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><code>callq</code>\u662F<code>x86_64</code>\u67B6\u6784\u7684\u4E00\u4E2A\u6307\u4EE4</p><p>\u5730\u5740 &lt;\u51FD\u6570\u7684\u540D\u5B57&gt;</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>\u25020x4005c4 <span class="token operator">&lt;</span>A+<span class="token operator"><span class="token file-descriptor important">4</span>&gt;</span>          mov    <span class="token variable">$0x0</span>,%eax                                        \u2502
\u25020x4005c9 <span class="token operator">&lt;</span>A+<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span>          callq  0x40059a <span class="token operator">&lt;</span>B<span class="token operator">&gt;</span>        <span class="token comment"># \u51C6\u5907\u8981\u8FDB\u5165B\u51FD\u6570                              \u2502</span>
\u25020x4005ce <span class="token operator">&lt;</span>A+1<span class="token operator"><span class="token file-descriptor important">4</span>&gt;</span>         pop    %rbp  <span class="token comment"># \u7A0B\u5E8F\u7684\u8FD4\u56DE\u5730\u5740 \u9690\u5F62\u7684</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BC4\u5B58\u5668 rax \u7684\u5730\u5740</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>\u2502rax            0x0      <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>\u25020x40059e <span class="token operator">&lt;</span>B+<span class="token operator"><span class="token file-descriptor important">4</span>&gt;</span>  movq   <span class="token variable">$0x0</span>,-0x8<span class="token punctuation">(</span>%rbp<span class="token punctuation">)</span>    long *p <span class="token operator">=</span> <span class="token number">0</span>                                      \u2502
   \u25020x4005a6 <span class="token operator">&lt;</span>B+1<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> lea<span class="token punctuation">(</span>\u53D6\u5730\u5740<span class="token punctuation">)</span>    -0x8<span class="token punctuation">(</span>%rbp<span class="token punctuation">)</span>,%rax     p <span class="token operator">=</span> <span class="token punctuation">(</span>long*<span class="token punctuation">)</span><span class="token operator">&amp;</span>p                                   \u2502
   \u25020x4005aa <span class="token operator">&lt;</span>B+1<span class="token operator"><span class="token file-descriptor important">6</span>&gt;</span> mov    %rax,-0x8<span class="token punctuation">(</span>%rbp<span class="token punctuation">)</span>                                            \u2502
   \u25020x4005ae <span class="token operator">&lt;</span>B+2<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span> mov    -0x8<span class="token punctuation">(</span>%rbp<span class="token punctuation">)</span>,%rax                                          \u2502
   \u25020x4005b2 <span class="token operator">&lt;</span>B+2<span class="token operator"><span class="token file-descriptor important">4</span>&gt;</span> lea    0x10<span class="token punctuation">(</span>%rax<span class="token punctuation">)</span>,%rdx                                          \u2502
   \u25020x4005b6 <span class="token operator">&lt;</span>B+2<span class="token operator"><span class="token file-descriptor important">8</span>&gt;</span> mov    <span class="token variable">$0x40057d</span>,%eax    \u6B64\u65F6\u8FD4\u56DE\u5730\u5740\u5DF2\u7ECF\u6539\u6210\u4E86C\u51FD\u6570\u7684\u5730\u5740                                       \u2502
   \u25020x4005bb <span class="token operator">&lt;</span>B+3<span class="token operator"><span class="token file-descriptor important">3</span>&gt;</span> mov    %rax,<span class="token punctuation">(</span>%rdx<span class="token punctuation">)</span>                                              \u2502
  <span class="token operator">&gt;</span>\u25020x4005be <span class="token operator">&lt;</span>B+3<span class="token operator"><span class="token file-descriptor important">6</span>&gt;</span> pop    %rbp                                                     \u2502
   \u25020x4005bf <span class="token operator">&lt;</span>B+3<span class="token operator"><span class="token file-descriptor important">7</span>&gt;</span> retq \u8FD4\u56DE\u6307\u4EE4\uFF0C\u4ECE\u6808\u7A7A\u95F4\u91CC\u53D6\u51FA\u8FD4\u56DE\u5730\u5740\u3010\u5730\u5740\u5DF2\u7ECF\u53D8\u6210\u4E86C\u51FD\u6570\u7684\u5730\u5740\u3011\uFF0C\u5E76\u4E14\u4FEE\u6539RIP\uFF0CCPU\u53EA\u7BA1\u53D6\u6307\u4EE4\u8FD0\u884C
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u901A\u8FC7\u8D4B\u503C\u5730\u5740\u4E4B\u540E<code>rax</code>\u53D8\u6210\u5982\u4E0B\u5185\u5BB9\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>\u2502rax            0x7fffffffe438   <span class="token number">140737488348216</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><code>p</code>\u7684\u5730\u5740\u5B58\u7684\u662F\u4E00\u4E2A 0</p><p><code>*(p+2)</code>\uFF1A\u8868\u793A \u5730\u5740 + 2*8 \u8DF3\u8F6C\u4E86 16 \u4E2A\u5B57\u8282</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> si
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> p <span class="token variable">$rsp</span> \u6253\u5370\u6808\u7684\u5185\u5B58\u5730\u5740
<span class="token variable">$14</span> <span class="token operator">=</span> <span class="token punctuation">(</span>void *<span class="token punctuation">)</span> 0x7fffffffe448 \u6B64\u65F6\u7684\u5730\u5740\u5B58\u50A8\u7684\u662FC\u51FD\u6570\u7684\u5730\u5740
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> si
C <span class="token punctuation">(</span><span class="token punctuation">)</span> at a.c:5
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u7A0B\u5E8F\u7684\u8DF3\u8F6C" tabindex="-1"><a class="header-anchor" href="#\u7A0B\u5E8F\u7684\u8DF3\u8F6C" aria-hidden="true">#</a> \u7A0B\u5E8F\u7684\u8DF3\u8F6C</h2><ol><li>\u6709\u6761\u4EF6\u7684\u8DF3\u8F6C <ol><li><code>ifelse while for</code>\u7B49</li></ol></li><li>\u65E0\u6761\u4EF6\u7684\u8DF3\u8F6C <ol><li>\u51FD\u6570\u8C03\u7528</li></ol></li></ol>`,25),o=[t];function c(l,i){return s(),a("div",null,o)}var d=n(e,[["render",c],["__file","tcp-paste-package.html.vue"]]);export{d as default};
